<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Rust Forge</title>
        
        <meta name="robots" content="noindex" />
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="Supplemental documentation for contributing to The Rust Programming Language">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "light" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="index.html">Overview</a></li><li class="chapter-item expanded "><a href="chat/index.html">Chat Platforms</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="chat/discord.html">Discord</a></li><li class="chapter-item expanded "><a href="chat/email.html">Email</a></li><li class="chapter-item expanded "><a href="chat/zulip.html">Zulip</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="chat/zulip/moderation.html">Moderation</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="core/index.html">Core</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="core/blogs.html">Rust Blog Guidelines</a></li></ol></li><li class="chapter-item expanded "><a href="community/index.html">Community</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="community/survey-faq.html">State of Rust Survey FAQ</a></li></ol></li><li class="chapter-item expanded "><a href="compiler/index.html">Compiler</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="compiler/cross-compilation/index.html">Cross Compilation</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="compiler/cross-compilation/windows.html">Windows</a></li></ol></li><li class="chapter-item expanded "><a href="compiler/triage-meeting.html">Triage Meeting</a></li><li class="chapter-item expanded "><a href="compiler/steering-meeting.html">Steering Meeting</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="compiler/steering-meeting/submit.html">Submitting a proposal</a></li><li class="chapter-item expanded "><a href="compiler/steering-meeting/how-to-run-planning.html">How to run the planning meeting</a></li><li class="chapter-item expanded "><a href="compiler/steering-meeting/how-to-run-design.html">How to run a design meeting</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="crates-io/index.html">crates.io</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="crates-io/crate-removal.html">Crate removal</a></li></ol></li><li class="chapter-item expanded "><a href="docs-rs/index.html">docs.rs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="docs-rs/add-dependencies.html">Adding dependencies to the build environment</a></li><li class="chapter-item expanded "><a href="docs-rs/no-docker-compose.html">Developing without docker-compose</a></li><li class="chapter-item expanded "><a href="docs-rs/self-hosting.html">Self-hosting a docs.rs instance</a></li><li class="chapter-item expanded "><a href="docs-rs/maintenance.html">Maintenance procedures</a></li><li class="chapter-item expanded "><a href="docs-rs/migrate-s3.html">Migrating from a local database to S3</a></li></ol></li><li class="chapter-item expanded "><a href="github.html">GitHub</a></li><li class="chapter-item expanded "><a href="governance/index.html">Governance</a></li><li class="chapter-item expanded "><a href="infra/index.html">Infrastructure</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="infra/other-installation-methods.html">Other Installation Methods</a></li><li class="chapter-item expanded "><a href="infra/channel-layout.html">Release Channel Layout</a></li><li class="chapter-item expanded "><a href="infra/service-infrastructure.html">Service Infrastructure</a></li><li class="chapter-item expanded "><a href="infra/team-maintenance.html">Team Maintenance</a></li><li class="chapter-item expanded "><a href="infra/toolstate.html">The Toolstate System</a></li><li class="chapter-item expanded "><a href="infra/policies/index.html">Policies</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="infra/policies/broken-nightlies.html">Broken nightlies</a></li></ol></li><li class="chapter-item expanded "><a href="infra/guidelines/index.html">Guidelines</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="infra/guidelines/static-websites.html">Static websites</a></li></ol></li><li class="chapter-item expanded "><a href="infra/docs/index.html">Documentation</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="infra/docs/aws-access.html">AWS access for team members</a></li><li class="chapter-item expanded "><a href="infra/docs/aws-access-management.html">AWS access management</a></li><li class="chapter-item expanded "><a href="infra/docs/bastion.html">Bastion server</a></li><li class="chapter-item expanded "><a href="infra/docs/crater-agents.html">Crater agents</a></li><li class="chapter-item expanded "><a href="infra/docs/discord-mods-bot.html">Discord moderation bot</a></li><li class="chapter-item expanded "><a href="infra/docs/dns.html">Domain names and DNS</a></li><li class="chapter-item expanded "><a href="infra/docs/docs-rs.html">docs.rs</a></li><li class="chapter-item expanded "><a href="infra/docs/ecs-services.html">ECS services management</a></li><li class="chapter-item expanded "><a href="infra/docs/monitoring.html">Monitoring</a></li><li class="chapter-item expanded "><a href="infra/docs/rust-bots.html">rust-bots server</a></li><li class="chapter-item expanded "><a href="infra/docs/rustc-ci.html">rust-lang/rust CI</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="lang/index.html">Language</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="lang/rfc-merge-procedure.html">RFC Merge Procedure</a></li><li class="chapter-item expanded "><a href="lang/triage-meeting-procedure.html">Triage Meeting Procedure</a></li></ol></li><li class="chapter-item expanded "><a href="libs/index.html">Libs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="libs/maintaining-std.html">Maintaining the standard library</a></li></ol></li><li class="chapter-item expanded "><a href="release/index.html">Release</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="release/beta-backporting.html">Beta Backporting</a></li><li class="chapter-item expanded "><a href="release/platform-support.html">Platform Support</a></li><li class="chapter-item expanded "><a href="release/release-notes.html">Preparing Release Notes</a></li><li class="chapter-item expanded "><a href="release/process.html">Release Process</a></li><li class="chapter-item expanded "><a href="release/rollups.html">Rollup Procedure</a></li><li class="chapter-item expanded "><a href="release/triage-procedure.html">Triage Procedure</a></li><li class="chapter-item expanded "><a href="release/crater.html">Triaging Crater Runs</a></li></ol></li><li class="chapter-item expanded "><a href="archive/index.html">Archive</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="archive/fott.html">Friends of the Tree</a></li><li class="chapter-item expanded "><a href="archive/release-history.html">Release History</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Rust Forge</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        <a href="https://github.com/rust-lang/rust-forge" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#rust-forge" id="rust-forge">Rust Forge</a></h1>
<p>Welcome to the Rust Forge! Rust Forge serves as a repository of supplementary
documentation useful for members of <a href="https://rust-lang.org">The Rust Programming Language</a>. If
you find any mistakes, typos, or want to add to the Rust Forge, feel free to
file an issue or PR on the <a href="https://github.com/rust-lang/rust-forge">Rust Forge GitHub</a>.</p>
<h3><a class="header" href="#help-wanted" id="help-wanted">Help Wanted</a></h3>
<p>Want to contribute to Rust, but don't know where to start? Here's a list of 
<code>rust-lang</code> projects that have marked issues that need help and issues that are
good first issues.</p>
<table><thead><tr><th>Repository</th><th>Description</th></tr></thead><tbody>
<tr><td><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+is%3Aissue+label%3AE-help-wanted+no%3Aassignee">rust</a></td><td>The Rust Language &amp; Compiler</td></tr>
<tr><td><a href="https://github.com/rust-lang/cargo/issues?q=is%3Aopen+is%3Aissue+label%3AE-help-wanted+no%3Aassignee">cargo</a></td><td>The Rust package manager</td></tr>
<tr><td><a href="https://github.com/rust-lang/crates.io/issues?q=is%3Aopen+is%3Aissue+label%3AE-help-wanted+no%3Aassignee">crates.io</a></td><td>Source code for <a href="https://crates.io">crates.io</a></td></tr>
<tr><td><a href="https://github.com/rust-lang/www.rust-lang.org/labels/good%20first%20issue+no%3Aassignee">www.rust-lang.org</a></td><td>The Rust website</td></tr>
</tbody></table>
<h3><a class="header" href="#current-release-versions" id="current-release-versions">Current Release Versions</a></h3>
<!-- All `<span id="..."></span>` elements are filled at run time when a reader
visits the website. Please refer to `js/index.js` for how these values
are generated.

Avoid changing the "Current Release Versions" without also updating the selector
in `js/index.js`.
-->
<table><thead><tr><th>Channel</th><th>Version</th><th>Release Date</th></tr></thead><tbody>
<tr><td>Stable</td><td><span id="stable-version"></span></td><td><span id="stable-release-date"></span></td></tr>
<tr><td>Beta</td><td><span id="beta-version"></span></td><td><span id="beta-release-date"></span></td></tr>
<tr><td>Nightly</td><td><span id="nightly-version"></span></td><td><span id="nightly-release-date"></span></td></tr>
<tr><td>Nightly +1</td><td><span id="next-version"></span></td><td><span id="next-release-date"></span></td></tr>
</tbody></table>
<h3><a class="header" href="#no-tools-breakage-week" id="no-tools-breakage-week">No Tools Breakage Week</a></h3>
<p>To ensure the beta release includes all the tools, no <a href="./infra/toolstate.html">tool breakages</a> are
allowed in the week before the beta cutoff (except for nightly-only tools).</p>
<table><thead><tr><th>Channel</th><th>Version</th><th>No Breakage Week</th></tr></thead><tbody>
<tr><td>Beta</td><td><span id="beta-cycle"></span></td><td><span id="beta-timespan"></span></td></tr>
<tr><td>Nightly</td><td><span id="nightly-cycle"></span></td><td><span id="nightly-timespan"></span></td></tr>
</tbody></table>
<h3><a class="header" href="#external-links" id="external-links">External Links</a></h3>
<ul>
<li><a href="https://rustc-dev-guide.rust-lang.org/appendix/bibliography.html">Bibliography</a> of research papers and other projects that influenced Rust.</li>
<li><a href="https://pontoon.rust-lang.org/">Rust Pontoon</a> is a translation management system used to localize the Rust
website.</li>
</ul>
<h2><a class="header" href="#chat-platforms" id="chat-platforms">Chat Platforms</a></h2>
<p>Rust uses a number of different platforms for internal communications between
teams. This does not currently seek to be an exhaustive list, rather documenting
the policies for a select few chat platforms used by the teams.</p>
<h2><a class="header" href="#discord" id="discord">Discord</a></h2>
<p>Rust's Discord is currently used by a variety of teams such as Community, Ops, and Documentation, as well as their working groups. It is also maintained as a communication tool for Domain Working Groups, and provides a space for general discussion among Rust users, contributors, and beginners. </p>
<h1><a class="header" href="#where-to-go-for-help-with-using-discord" id="where-to-go-for-help-with-using-discord">Where to go for help with using Discord</a></h1>
<p>Discord's support center provides documentation about its <a href="https://support.discordapp.com/hc/en-us/categories/200404398">user interface</a> and <a href="https://support.discordapp.com/hc/en-us/categories/200404358">account settings</a>.</p>
<h1><a class="header" href="#getting-started" id="getting-started">Getting started</a></h1>
<ol>
<li>
<p>Understand community standards <br/>
Discord, like all official Rust spaces, is governed by the Code of Conduct. Before joining the conversation there, you can prepare by reading the <a href="https://www.rust-lang.org/community#conduct">Code of Conduct and Moderation Guidelines</a>.
It is also useful to read <a href="https://discordapp.com/guidelines">Discord's Community Guidelines</a></p>
</li>
<li>
<p>Access channels <br/>
To access the Rust Discord, visit <a href="https://discord.gg/rust-lang">https://discord.gg/rust-lang</a>. If you do not already have a Discord account, you can register for one as part of the process of gaining access. Your first action should be agreeing to our Code of Conduct by following the instructions in #welcome.</p>
</li>
<li>
<p>Configure notifications <br/>
It is a good idea to disable notifications for channels that are not relevant to you, so that you will not be overwhelmed with messages. 
Select the expansion arrow next to the server name banner (titled &quot;The Rust Programming Language&quot;) and select Notifications from the dropdown. Then follow the configuration instructions provided <a href="https://support.discordapp.com/hc/en-us/articles/215253258-Notifications-Settings-101">on the Discord Support site</a>.</p>
</li>
</ol>
<h1><a class="header" href="#appropriate-conversation" id="appropriate-conversation">Appropriate conversation</a></h1>
<p>Discussions should be related to the channel purpose. On team channels, conversation should be related to team business.
All channels are expected to be used for purposes related to the Rust project. Discussion of (for example) wildlife or sightseeing are not appropriate. </p>
<h1><a class="header" href="#channels" id="channels">Channels</a></h1>
<p>The following channels are relevant to newcomers to the Rust project: </p>
<ul>
<li>welcome - Where you agree to the CoC.</li>
<li>rust-usage - This is a channel where you can access support for resolving specific language use questions. The <a href="https://users.rust-lang.org/">Rust Users Forum</a> is also relevant to your needs.</li>
<li>beginners - Here, you can meet people who began using Rust relatively recently. </li>
<li>contribute - Interested in contributing to the Rust project? In addition to joining this channel, you can subscribe to the <a href="https://this-week-in-rust.org/">This Week In Rust</a> newsletter, where many opportunities are regularly posted. 
It may also help to find out more about <a href="https://www.rust-lang.org/governance#teams">specific teams</a>.</li>
</ul>
<p>Channels outside of General are for contributors to Rust.</p>
<h1><a class="header" href="#messages" id="messages">Messages</a></h1>
<p>Discord conversation takes place when people are available, so you should not generally expect that your messages will receive a response quickly unless a meeting is taking place. Depending on how your notifications are configured, you will see a red circle on top of the Discord icon in your system tray when new messages are received. If you wish to communicate with a specific individual, right-click on their user icon and select &quot;Message&quot; in the dropdown menu.</p>
<h1><a class="header" href="#read-only-view" id="read-only-view">Read-only view</a></h1>
<p>Set up a Discord account (as described in Getting Started, above) in order to access Discord. There is not
currently a read-only archive view available. </p>
<h1><a class="header" href="#email" id="email">Email</a></h1>
<p>While most of Rust's discussion happens on other platforms, email is eternal and
we occasionally need a way to approach individuals or groups privately. Our
email is hosted through Mailgun (provided by Mozilla). We create and edit the
mailing lists for teams through the <a href="https://github.com/rust-lang/team">rust-lang/team</a> repository. Our email
domain is <code>rust-lang.org</code>, e.g. <code>ferris@rust-lang.org</code>.</p>
<h2><a class="header" href="#sending-a-public-broadcast" id="sending-a-public-broadcast">Sending a public broadcast</a></h2>
<p>If your teams need to reach everyone in Rust organisation they can send a
email to <code>all@</code>. It is recommended that you only use this mailing list when you
know that you need contact every member, such as for organising a members event
like the All Hands, or security alerts.</p>
<h3><a class="header" href="#keeping-responses-private" id="keeping-responses-private">Keeping responses private</a></h3>
<p>When sending a message to <code>all@</code>, do not put <code>all@</code> in <code>To</code>. This will mean that
any replies to your broadcast will also be sent to everyone. Instead put your
team's email address in <code>To</code> field, and place <code>all@</code> in the <code>Bcc</code> field. Then
any replies will be sent to just your team.</p>
<h1><a class="header" href="#zulip" id="zulip">Zulip</a></h1>
<p><a href="https://rust-lang.zulipchat.com">Rust's Zulip</a> is used by a number of teams, notably
the compiler, language, and library teams, along with their working groups.</p>
<p>Zulip can be an unintuitive platform to get started with. To get started, take a
look at the <a href="https://zulipchat.com/help/getting-started-with-zulip">getting started
guide</a>. For more detail,
examine the <a href="https://zulipchat.com/help/">Zulip user documentation</a>!</p>
<h2><a class="header" href="#where-to-go-for-help-with-using-zulip" id="where-to-go-for-help-with-using-zulip">Where to go for help with using Zulip</a></h2>
<p>If you're testing a feature, or want to get help, the <code>#zulip</code> stream is the
place to go. Like elsewhere, the best thing to do is to create a new topic
for each question.</p>
<h2><a class="header" href="#getting-started-1" id="getting-started-1">Getting started</a></h2>
<p>It is recommended to first look at the official <a href="https://zulipchat.com/help/getting-started-with-zulip">getting started
guide</a>. Like Rust itself,
Zulip is a bit special and reading the documentation before digging can be
really helpful.</p>
<p>You'll definitely want to configure the streams that you're subscribed to when
getting started; the default set is quite limited, and there are many groups
that exist beyond it. Subscribing to a stream is very low cost -- it is similar
to being &quot;in&quot; an IRC channel, except that logs are available for all streams,
regardless of subscription status.</p>
<p>It's not necessary to introduce yourself, but feel free to say hello in the
<code>#new members</code> stream.</p>
<h2><a class="header" href="#user-groups" id="user-groups">User groups</a></h2>
<p>User groups can be pinged by anyone with the <code>@&lt;group&gt;</code> notation, same as
pinging another user. Groups can be created by anyone, and anyone can join a
group.</p>
<p>Users should feel free to join (or leave) groups on their own. Furthermore,
users should feel free to create groups as needed, though it is currently
expected that this is somewhat rare. You should name your group similar to how
you would name a stream for the same purpose, though groups can be more
fine-grained (or less). For example, <code>@T-compiler/meeting</code> currently does not
have a dedicated stream.</p>
<h2><a class="header" href="#appropriate-conversation-1" id="appropriate-conversation-1">Appropriate conversation</a></h2>
<p>In most streams, you should try to keep conversations related to team business.
The <code>#general</code> stream is a bit broader, but even there, discussions should be
closely related to Rust (though may not relate to projects of any particular
team). All channels are expected to be used for discussions related to the Rust
project, though; discussions of (for example) wildlife or sightseeing are not
appropriate.</p>
<h2><a class="header" href="#streams" id="streams">Streams</a></h2>
<p>These are similar to &quot;channels&quot; on other platforms (i.e., there should not be
too many). On the other hand, you can choose which streams you subscribe to, so
there can be more than channels on other platforms. Read <a href="https://zulipchat.com/help/about-streams-and-topics">Zulip's
documentation</a> for more
details.</p>
<p>Streams are appropriate for any Rust official group. For example, working
groups, project groups, teams are all examples of official groups. These should
ideally also be represented in the <a href="chat/../infra/team-maintenance.html">team repository</a>.</p>
<h3><a class="header" href="#default-streams" id="default-streams">Default streams</a></h3>
<p><strong>This section is still under debate, and it is not yet clear which direction we
will go. It is non-normative, and should not be used yet for modifications to
the Zulip instance.</strong></p>
<p>The default set of streams is chosen to allow incoming people to be able to have
at least one place to go that can then, if necessary, direct them to a more
specific location.</p>
<p>Currently that means that every top-level group present on Zulip is by default
visible. Specifically, no stream that contains a <code>/</code> will be enabled by default.</p>
<p>Currently this set is:</p>
<ul>
<li>general</li>
<li>t-lang</li>
<li>t-compiler</li>
<li>t-libs</li>
<li>project-ffi-unwind</li>
<li>project-inline-asm</li>
<li>project-safe-transmute</li>
<li>rust-survey-2019</li>
<li>wg-async-foundations</li>
<li>wg-database</li>
<li>wg-formal-methods</li>
<li>wg-secure-code</li>
<li>wg-traits</li>
<li>zulip</li>
</ul>
<p>An alternative, minimalistic, approach is to use:</p>
<ul>
<li>general</li>
<li>zulip</li>
<li>announce</li>
<li>new members</li>
</ul>
<p>as the default set, which would push people into customizing their default set when
starting out.</p>
<h3><a class="header" href="#stream-naming" id="stream-naming">Stream naming</a></h3>
<p>A stream should be named such as <code>#t-{team}/{group name}</code>. For example,
<code>#t-compiler/wg-parallel-rustc</code>. More levels of nesting are fine, e.g., a
working group might want &quot;subgroups&quot; as well, though you may want to omit the
team name in such a case -- keeping the stream name short is good for usability,
to avoid confusion between different streams which share the same prefix.</p>
<p>If no top-level team exists, or the group spans multiple teams (e.g.,
project-ffi-unwind), then the top level team should be omitted.</p>
<p>Streams should be clearly communicated as being for a specific purpose. That
purpose can be broad, but it should likely include a group of some kind (even if
that group is transient, e.g., people who are having trouble with the rust build
system, or people working on the compiler). Furthermore, we do not currently
intend for this Zulip to be a general place for community projects not
affiliated with the Rust organization; if they wish to use Zulip, it is <a href="https://zulipchat.com/for/open-source/">free
for open source</a>.</p>
<p>When a new stream is created, you should announce it in <code>#announce</code>. This is
generally done automatically by Zulip.</p>
<h2><a class="header" href="#topics" id="topics">Topics</a></h2>
<p>A topic is attached to every message within a given stream (these are the
subdivisions within streams). Topics are generally transient, and live for as
long as there is active discussion on a topic. Thinking of topics like email
subjects is helpful.</p>
<p>New conversation in a given stream should almost always start in a new topic,
not a preexisting one. Unlike (for example) GitHub issues, you should not
attempt to search for a past topic on the same subject. Do not spend too long on
the name of the topic, either, beyond trying to make it short. Topics should
generally be no longer than 20 characters (loosely two to three words), to make
sure it is visible to users.</p>
<p>You should eagerly fork new discussion topics into fresh topics. Note that this
can be done with the tail of another topic (if accidentally you diverge into
another area of discussion).</p>
<p>To fork from an existing topic, see Zulip's documentation
<a href="https://zulipchat.com/help/rename-a-topic">here</a>.</p>
<h2><a class="header" href="#messages-1" id="messages-1">Messages</a></h2>
<p>Zulip is a unique platform which combines synchronous and
asynchronous communication in one location. You should not generally expect that
your messages will receive a response quickly, and unlike (for example) Discord,
there is likely not much reason to &quot;re-ping&quot; on a particular issue every few
hours as your message is unlikely to vanish into history, being isolated to a
specific topic.</p>
<h3><a class="header" href="#linkifiers" id="linkifiers">Linkifiers</a></h3>
<p>Our Zulip supports a lot of helpful linkifiers, and we're generally happy to add
more on request. See <a href="https://rust-lang.zulipchat.com/help/add-a-custom-linkification-filter">the
documentation</a>
for the format. Propose one in <code>#zulip</code>!</p>
<p>Generally, <code>github-org/repo#123</code> works for linking to an issue or PR; the below
list gives a few more &quot;special cased&quot; repositories.</p>
<p>Don't forget that standard Markdown syntax for links also works.</p>
<p>We currently support linking to issues on a few repositories:</p>
<ul>
<li>rust-lang/rust with <a href="https://github.com/rust-lang/rust/issues/4545"><code>#4545</code></a> or <code>rust#4545</code></li>
<li>rust-lang/rfcs with <code>RFC#3434</code> or <code>rfc#3434</code></li>
<li>rust-lang/async-book with <code>async-book#2334</code></li>
<li>rust-lang-nursery/chalk with <code>chalk#2334</code></li>
<li>rust-lang/compiler-team with <code>compiler-team#3433</code></li>
<li>rust-lang-nursery/ena with <code>ena#3434</code></li>
<li>rust-lang/miri with <code>miri#3434</code></li>
<li>rust-lang-nursery/polonius with <code>polonius#3434</code></li>
<li>rust-analyzer/rust-analyzer with <code>rust-analyzer#3434</code></li>
<li>rust-lang/rustc-dev-guide with <code>rustc-dev-guide#3434</code></li>
<li>rust-lang/stdarch with <code>stdarch#3434</code></li>
<li>rust-lang/team with <code>team#3434</code></li>
<li>rust-lang/unsafe-code-guidelines with <code>ucg#3434</code></li>
</ul>
<p>We currently support linking to commits on these repositories:</p>
<ul>
<li>rust-lang/rust with 40-character long SHAs, e.g., <a href="https://github.com/rust-lang/rust/commit/25434f898b499876203a3b95c1b38bad5ed2cc5d"><code>25434f898b499876203a3b95c1b38bad5ed2cc5d</code></a></li>
</ul>
<h2><a class="header" href="#read-only-view-1" id="read-only-view-1">Read-only view</a></h2>
<p>Zulip by default requires an account for interaction, though this &quot;bug&quot; is being
actively worked on by the Zulip developers. We currently maintain a read-only
view of the Zulip at <a href="https://zulip-archive.rust-lang.org">https://zulip-archive.rust-lang.org</a>; this has relatively
up to date information (we update every 5 minutes). If you're linking to Zulip
from a GitHub comment with the intent to leave a permanent link, this is a good
place to link to. There is not currently good tooling for generating the links.</p>
<h1><a class="header" href="#zulip-moderation" id="zulip-moderation">Zulip Moderation</a></h1>
<p>Zulip, like all official Rust spaces, is governed by the <a href="https://www.rust-lang.org/policies/code-of-conduct">Code of
Conduct</a>. If you have
concerns, please feel free to escalate to the moderation team.</p>
<p>However, though the moderation team is the top-level body here, it is not the
only place where you can seek help with moderation within Zulip.</p>
<p>One method for reaching the Zulip administrators privately is to email
<code>zulip-admin.239bd484c0347d2d43214d8581f3e125.show-sender@streams.zulipchat.com</code>.
See <a href="https://rust-lang.zulipchat.com/help/message-a-stream-by-email">this page</a>
for details on how this works.</p>
<p>You can also ping the <code>@mods</code> group on Zulip; note that this will be public.</p>
<p>It is not currently possible for normal users to self-administrate (e.g., muting
another user). However, each individual stream, including private streams, can
be muted:</p>
<h2><a class="header" href="#for-adminsmoderators" id="for-adminsmoderators">For admins/moderators</a></h2>
<p>Some common actions for moderators are listed <a href="https://zulipchat.com/help/moderating-open-organizations">on this
page</a>.</p>
<p>Notably,</p>
<ul>
<li>in <a href="https://rust-lang.zulipchat.com/#organization/organization-permissions">&quot;Organization permissions&quot;</a>
we can restrict users to mandate invitations before joining (this is the &quot;no new users&quot; button)</li>
</ul>
<p>New admins/moderators should add themselves to the <code>mods</code> group on Zulip. (Note
that this is something that any user can do!)</p>
<h1><a class="header" href="#core" id="core">Core</a></h1>
<p>This section documents policies established by the core team. These
policies tend to apply for &quot;project-wide resources&quot;, such as the Rust
blogs.</p>
<h1><a class="header" href="#rust-blog-guidelines" id="rust-blog-guidelines">Rust Blog Guidelines</a></h1>
<h2><a class="header" href="#context" id="context">Context</a></h2>
<p>The Rust project maintains two blogs. The “main blog” (blog.rust-lang.org) and a “team blog”
(blog.rust-lang.org/inside-rust). This document provides the guidelines for what it takes to write
a post for each of those blogs, as well as how to propose a post and to choose which blog is most
appropriate.</p>
<h2><a class="header" href="#how-to-select-the-right-blog-audience" id="how-to-select-the-right-blog-audience">How to select the right blog: audience</a></h2>
<p>So you want to write a Rust blog post, and you’d like to know which blog you should post it on.
Ultimately, there are three options:</p>
<ul>
<li>The main Rust blog
<ul>
<li>Suitable when your audience is “all Rust users or potential users”</li>
<li>Written from an “official position”, even if signed by an individual</li>
</ul>
</li>
<li>The team Rust blog
<ul>
<li>Suitable when your audience is “all Rust contributors or potential contributors”</li>
<li>Written from an “official position”, even if signed by an individual</li>
</ul>
</li>
<li>Your own personal blog
<ul>
<li>Everything else</li>
</ul>
</li>
</ul>
<p>There are two key questions to answer in deciding which of these seems right:</p>
<ul>
<li>Are you speaking in an “official capacity” or as a “private citizen”?</li>
<li>Who is the audience for your post?</li>
</ul>
<p>In general, if you are speaking as a “private citizen”, then you are probably best off writing on
your own personal blog.</p>
<p>If, however, you are writing in an <strong>official capacity</strong>, then one of the Rust blogs would be a
good fit. Note that this doesn’t mean you can’t write as an individual. Plenty of the posts on
Rust’s blog are signed by individuals, and, in fact, that is the preferred option. However, those
posts are typically documenting the official position of a team — a good example is Aaron Turon’s
classic post on <a href="https://blog.rust-lang.org/2017/03/02/lang-ergonomics.html">Rust’s language ergonomics
initiative</a>. Sometimes, the posts are
describing an exciting project, but again in a way that represents the project as a whole (e.g.,
Manish Goregaokar’s report on <a href="https://blog.rust-lang.org/2017/11/14/Fearless-Concurrency-In-Firefox-Quantum.html">Fearless Concurrency in Firefox
Quantum</a>).</p>
<p>To decide between the main blog and the team blog, the question to ask yourself is <strong>who is the
audience</strong> for your post. Posts on the main blog should be targeting <strong>all</strong> Rust users or
potential users — they tend to be lighter on technical detail, and written without requiring as
much context. Posts on the team blog can assume a lot more context and familiarity with Rust.</p>
<h2><a class="header" href="#writing-for-the-main-rust-blog" id="writing-for-the-main-rust-blog">Writing for the Main Rust blog</a></h2>
<p>The core team ultimately decides what to post on the main Rust blog.</p>
<p>Post proposals describing exciting developments from within the Rust org are welcome, as well as
posts that describe exciting applications of Rust. We do not generally do “promotional
cross-posting” with other projects, however.</p>
<p>If you would like to propose a blog post for the main blog, please reach out to a <a href="https://www.rust-lang.org/governance/teams/core">core team
member</a>. It is not suggested to just open PRs
against the main Rust blog that add posts without first discussing it with a core team member.</p>
<h3><a class="header" href="#release-note-blog-posts" id="release-note-blog-posts">Release note blog posts</a></h3>
<p>One special case are the regular release note posts that accompany every Rust release. These are
managed by the release team and go on the main blog.</p>
<p>The blog posts are published on the same day as the release by the same person in the release team
running the release. Releases always happen on Thursdays.</p>
<p>Before publishing a release post, it goes through a drafting process:</p>
<ol>
<li>The milestone (e.g. for <a href="https://github.com/rust-lang/rust/milestone/66?closed=1">1.39.0</a>) for the release is consulted.</li>
<li>PRs that we think are sufficiently important are included, and some items are headlined.
The writing of a blog post typically happens through a <a href="https://hackmd.io/">hackmd</a> document.</li>
<li>Headlined items are sometimes written by different people, and we try to peer-review each
subsection.</li>
<li>The blog post draft is submitted as a PR on the blog repo for final review a few days before the
release.</li>
</ol>
<h2><a class="header" href="#team-rust-blogs" id="team-rust-blogs">Team Rust blogs</a></h2>
<p>Teams can generally decide for themselves what to write on the team Rust blog.</p>
<p>Typical subjects for team Rust blog posts include:</p>
<ul>
<li>New initiatives and calls for participation</li>
<li>Updates and status reports from ongoing work</li>
<li>Design notes</li>
</ul>
<p>To propose a blog post for the team blog of a particular team, reach out to the team lead or some
other team representative.</p>
<h1><a class="header" href="#community" id="community">Community</a></h1>
<p>This section documents the processes of the community team, and related projects.</p>
<h3><a class="header" href="#external-links-1" id="external-links-1">External Links</a></h3>
<ul>
<li>The <a href="https://github.com/rust-community/team">Community team</a> GitHub repository contains information about how the community team organizes.</li>
<li>The <a href="https://rustbridge.com">RustBridge</a> website contains information on hosting your own local RustBridge event.</li>
<li><a href="https://github.com/rust-lang/rustlings">Rustlings</a> is an project with small exercises designed around getting newcomers used to reading and writing Rust.</li>
</ul>
<h1><a class="header" href="#state-of-rust-survey-faq" id="state-of-rust-survey-faq">State of Rust Survey FAQ</a></h1>
<p>In this FAQ we try to answer common questions about the Annual State of the Rust Language Community Survey. If in your opinion there is a missing question or if you have a concern about this document, please do not hesitate to contact the <a href="community/community-team@rust-lang.org">Rust Community Team</a> or open an <a href="https://github.com/rust-community/team/issues">issue with the Community Team</a>.</p>
<h2><a class="header" href="#why-is-this-survey-important-for-the-rust-project" id="why-is-this-survey-important-for-the-rust-project">Why is this survey important for the Rust project?</a></h2>
<p><a href="https://rust-lang.org">Rust</a> is an Open Source project. As such, we want to hear both from people inside and outside our ecosystem about the language, how it is perceived, and how we can make the language more accessible and our community more welcoming. This feedback will give our community the opportunity to participate on shaping the future of the project. We want to focus in the requirements of the language current and potential users to offer a compelling tool for them to solve real world problems in a safe, efficient and modern way.</p>
<h2><a class="header" href="#what-are-the-goals-of-the-survey" id="what-are-the-goals-of-the-survey">What are the goals of the survey?</a></h2>
<ul>
<li>To understand the community's main development priorities and needs</li>
<li>To categorize the population of users of the language</li>
<li>To focus our efforts on events and conferences to drive more impact</li>
<li>To identify potential new contributors to the community goals</li>
</ul>
<h2><a class="header" href="#how-much-time-will-it-take-to-answer-the-survey" id="how-much-time-will-it-take-to-answer-the-survey">How much time will it take to answer the survey?</a></h2>
<p>In average, it should take from 10 to 15 minutes.</p>
<h2><a class="header" href="#what-kind-of-questions-are-included-in-the-survey" id="what-kind-of-questions-are-included-in-the-survey">What kind of questions are included in the survey?</a></h2>
<p>It includes some basic questions about how do responders use Rust, their opinion the ecosystem's tools and libraries, some basic questions regarding the responders' employer or organization and their intention to use Rust, technical background and demographic questions and some feedback related to the Rust project's community activities and general priorities.</p>
<h2><a class="header" href="#how-will-we-use-the-data-from-the-survey-responses" id="how-will-we-use-the-data-from-the-survey-responses">How will we use the data from the survey responses?</a></h2>
<p>The answers from the survey will be anonymized, aggregated, and summarized. A high level writeup will be posted to https://blog.rust-lang.org.</p>
<h3><a class="header" href="#how-is-personally-identifiable-information-handled" id="how-is-personally-identifiable-information-handled">How is personally identifiable information handled?</a></h3>
<p>Nearly every question in the survey is optional. You are welcome to share as much or as little information as you are comfortable with. Only the Rust language Core Team and the Community Team Survey Leads will have access to the raw data from the survey. All the answers are anonymized prior to be shared with the rest of the teams and prior to the results publication.</p>
<h3><a class="header" href="#why-is-the-survey-collecting-contact-information" id="why-is-the-survey-collecting-contact-information">Why is the survey collecting contact information?</a></h3>
<p>The survey optionally collects contact information for the following cases if you expressed interest in:</p>
<ul>
<li>future conferences or meetups in your area</li>
<li>helping to organize a Rust event, meetup, or conference</li>
<li>talking to a Rust team about using Rust inside your company</li>
<li>Rust training</li>
<li>interest in a Rust team contacting you about your survey responses</li>
</ul>
<p>If you would like to be contacted about any of this, or any other concerns, but you don't want to associate your email with your survey responses, you can instead email the Rust Community Team at community-team@rust-lang.org or the Core Team at core-team@rust-lang.org, and we will connect you to the right people.</p>
<h2><a class="header" href="#where-and-when-is-the-survey-results-report-published" id="where-and-when-is-the-survey-results-report-published">Where and when is the survey results report published?</a></h2>
<p>We expect to publish results from the survey within a month or two of the survey completion. The survey results will be posted to <a href="https://blog.rust-lang.org">project's blog</a>.</p>
<h2><a class="header" href="#where-can-i-see-the-previous-survey-reports" id="where-can-i-see-the-previous-survey-reports">Where can I see the previous survey reports?</a></h2>
<ul>
<li><a href="https://blog.rust-lang.org/2018/11/27/Rust-survey-2018.html">State of Rust 2018</a></li>
<li><a href="https://blog.rust-lang.org/2017/09/05/Rust-2017-Survey-Results.html">State of Rust 2017</a></li>
<li><a href="https://blog.rust-lang.org/2016/06/30/State-of-Rust-Survey-2016.html">State of Rust 2016</a></li>
</ul>
<h1><a class="header" href="#compiler" id="compiler">Compiler</a></h1>
<p>This section documents the Rust compiler itself, its APIs, and how to
contribute and provide bug fixes for the compiler.</p>
<h3><a class="header" href="#external-links-2" id="external-links-2">External Links</a></h3>
<ul>
<li>The <a href="https://rustc-dev-guide.rust-lang.org/">Rustc Dev Guide</a> documents how the compiler works as well providing helpful
information to help get new contributors involved in the development.</li>
<li>Rustc's <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/">internal documentation</a>.</li>
<li>The <a href="https://rust-lang.github.io/compiler-team/">Compiler team</a> website is the home for all of the compiler
team's planning.</li>
<li>oli-obk's <a href="https://oli-obk.github.io/fixmeh/">FIXME page</a> lists all of the <code>FIXME</code> comments in the Rust compiler.</li>
</ul>
<h1><a class="header" href="#cross-compilation" id="cross-compilation">Cross Compilation</a></h1>
<p>This subsection documents cross compiling your code on one platform to another.</p>
<h1><a class="header" href="#windows" id="windows">Windows</a></h1>
<ol>
<li>Acquire LLD somehow. Either your distro provides it or you have to build it
from source.</li>
<li>You'll need an lld-link wrapper, which is just lld using the link flavor so
it accepts the same flags as link.exe. You may either have a binary called
lld-link, or you may have to write some sort of script to wrap lld.</li>
<li>If you want to be able to cross compile C/C++ as well, you will need to
obtain clang-cl, which is clang pretending to be cl.</li>
<li>You'll need libraries from an existing msvc installation on Windows to link
your Rust code against. You'll need the VC++ libraries from either VS 2015 or
VS 2017, and the system libraries from either the Windows 8.1 or Windows 10
SDK. Here are some approximate paths which may vary depending on the exact
version you have installed. Copy them over to your non-windows machine.
<ul>
<li>VS 2015: <code>C:\Program Files (x86)\Microsoft Visual Studio 14.0\VC\lib</code></li>
<li>VS 2017: <code>C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\VC\Tools\MSVC\14.10.24728\lib</code></li>
<li>Windows 10 SDK: <code>C:\Program Files (x86)\Windows Kits\10\Lib\10.0.14393.0</code></li>
<li>Windows 8.1 SDK: <code>C:\Program Files (x86)\Windows Kits\8.1\Lib\winv6.3</code></li>
</ul>
</li>
<li>If you want to cross compile C/C++ you'll also need headers. Replace <code>lib</code> in
the above paths with <code>include</code> to get the appropriate headers.</li>
<li>Set your LIB and INCLUDE environment variables to semicolon separated lists
of all the relevant directories for the correct architecture.</li>
<li>In your .cargo/config add <code>[target.x86_64-pc-windows-msvc] linker = &quot;lld-link&quot;</code>
or whatever your lld pretending to be link.exe is called.</li>
<li>For cross compiling C/C++, you'll need to get the gcc crate working
correctly. I never tested it to cross compile, I have no idea whether it will
even do anything sane.</li>
<li>Install the appropriate target using rustup and pass
<code>--target=x86_64-pc-windows-msvc</code> while building. Hopefully it works. If it
doesn't, well... I don't know.</li>
</ol>
<h1><a class="header" href="#compiler-team-triage-meeting" id="compiler-team-triage-meeting">Compiler-team Triage Meeting</a></h1>
<h2><a class="header" href="#what-is-it" id="what-is-it">What is it?</a></h2>
<p>The triage meeting is a weekly meeting where we go over the open
issues, look at regressions, consider beta backports, and other such
business. In the tail end of the meeting, we also do brief check-ins
with active working groups to get an idea what they've been working
on.</p>
<h2><a class="header" href="#when-and-where-is-it" id="when-and-where-is-it">When and where is it?</a></h2>
<p>See the <a href="https://rust-lang.github.io/compiler-team/#meeting-calendar">compiler team meeting calendar</a> for the canonical date and
time. The meetings take place in the #t-compiler stream on the
<a href="https://rust-lang.github.io/compiler-team/about/chat-platform/">rust-lang Zulip</a>.</p>
<h2><a class="header" href="#where-can-i-lean-more" id="where-can-i-lean-more">Where can I lean more?</a></h2>
<p>The meeting procedure is documented in <a href="https://github.com/rust-lang/rust/issues/54818">rust-lang/rust#54818</a>.</p>
<p>The working group check-in schedule is available on the <a href="https://rust-lang.github.io/compiler-team/about/triage-meeting/">compiler-team website</a>.</p>
<h1><a class="header" href="#compiler-team-steering-meeting" id="compiler-team-steering-meeting">Compiler-team Steering Meeting</a></h1>
<h2><a class="header" href="#what-is-it-1" id="what-is-it-1">What is it?</a></h2>
<p>The &quot;steering meeting&quot; is a weekly meeting dedicated to planning and
high-level discussion. The meeting operates on a repeating schedule:</p>
<ul>
<li>Week 1: Planning</li>
<li>Week 2: Technical or non-technical discussion</li>
<li>Week 3: Technical or non-technical discussion</li>
<li>Week 4: Non-technical discussion</li>
</ul>
<p>The first meeting of the 4-week cycle is used for <strong>planning</strong>. The
primary purpose of this meeting is to <strong>select the topics for the next
three meetings</strong>. The topics are selected from a set of topic
proposals, which must be uploaded and available for perusal before the
meeting starts. The planning meeting is also an opportunity to check
on the &quot;overall balance&quot; of our priorities.</p>
<p>The remaining meetings are used for design or general discussion.
Weeks 2 and 3 can be used for <strong>technical</strong> or <strong>non-technical</strong>
discussion; it is also possible to use both weeks to discuss the same
topic, if that topic is complex. <strong>Week 4 is reserved for
non-technical topics</strong>, so as to ensure that we are keeping an eye on
the overall health and functioning of the team.</p>
<h2><a class="header" href="#announcing-the-schedule" id="announcing-the-schedule">Announcing the schedule</a></h2>
<p>After each planning meeting, the topics for the next three weeks are
added to the <a href="https://rust-lang.github.io/compiler-team/#meeting-calendar">compiler-team meeting calendar</a> and a blog post is
posted to the <a href="https://blog.rust-lang.org/inside-rust/">Inside Rust blog</a>.</p>
<h2><a class="header" href="#when-and-where-is-it-1" id="when-and-where-is-it-1">When and where is it?</a></h2>
<p>See the <a href="https://rust-lang.github.io/compiler-team/#meeting-calendar">compiler team meeting calendar</a> for the canonical date and
time. The meetings take place in the #t-compiler stream on the
<a href="https://rust-lang.zulipchat.com">rust-lang Zulip</a>.</p>
<h1><a class="header" href="#submitting-a-proposal" id="submitting-a-proposal">Submitting a proposal</a></h1>
<p>If you would like to submit a proposal to the steering meeting for
group discussion, read on! This page has all the details.</p>
<h2><a class="header" href="#tldr" id="tldr">TL;DR</a></h2>
<p>In short, all you have to do is</p>
<ul>
<li><a href="https://github.com/rust-lang/compiler-team/issues">open an issue on the compiler-team repository</a>
<ul>
<li>use the template for meeting proposals</li>
<li>you only need a few sentences to start, but by the time the meeting
takes place we typically expect a more detailed writeup, e.g.
using <a href="https://github.com/rust-lang/compiler-team/blob/master/templates/steering-meeting-proposal.md">this template</a></li>
</ul>
</li>
</ul>
<p>You don't have to have a lot of details to start: just a few sentences
is enough. But, especially for technical design discussions, we will
typically expect that some form of more detailed overview be made
available by the time the meeting takes place.</p>
<h2><a class="header" href="#examples-of-good-candidates-for-discussing-at-the-steering-meeting" id="examples-of-good-candidates-for-discussing-at-the-steering-meeting">Examples of good candidates for discussing at the steering meeting</a></h2>
<p>Here are some examples of possible technical topics that would be
suitable for the steering meeting:</p>
<ul>
<li>A working group has an idea to refactor the HIR to make some part of their
job easier. They have sketched out a proposal and would like feedback.</li>
<li>Someone has encountered a problem that is really hard to solve with
the existing data structures. They would like feedback on a good
solution to their problem.</li>
<li>Someone has done major refactoring work on a PR and they would like
to be able to explain the work they did and request review.</li>
</ul>
<p>Steering meetings are also a good place to discuss other kinds of proposals:</p>
<ul>
<li>A proposal to move some part of the compiler into an out-of-tree crate.</li>
<li>A proposal to start a new working group.</li>
</ul>
<p>Note that a steering meeting is <strong>not</strong> required to create a new
working group or an out-of-tree crate, but it can be useful if the
proposal is complex or controversial, and you would like a dedicated
time to talk out the plans in more detail.</p>
<h2><a class="header" href="#criteria-for-selection" id="criteria-for-selection">Criteria for selection</a></h2>
<p>When deciding the topics for upcoming meetings, we must balance a number of things:</p>
<ul>
<li>We don't want to spend time on design work unless there are known
people who will implement it and support it; this includes not only
the &quot;main coder&quot; but also a suitable reviewer.</li>
<li>We don't want to take on &quot;too many&quot; tasks at once, even if there <em>are</em> people to
implement them.</li>
<li>We also don't want to have active projects that will be &quot;stepping on
each others' toes&quot;, changing the same set of code in deep ways.</li>
</ul>
<h2><a class="header" href="#meetings-are-not-mandatory" id="meetings-are-not-mandatory">Meetings are not mandatory</a></h2>
<p>It is perfectly acceptable to choose <em>not</em> to schedule a particular
slot. This could happen if (e.g.) there are no proposals available or
if nothing seems important enough to discuss at this moment.  Note
that, to keep the &quot;time expectations&quot; under control, we should
generally stick to the same 4-week cycle and simply opt to skip
meetings, rather than (e.g.) planning things at the last minute.</p>
<h2><a class="header" href="#adding-a-proposal" id="adding-a-proposal">Adding a proposal</a></h2>
<p>Proposals can be added by opening an issue on the <a href="https://github.com/rust-lang/compiler-team/issues">compiler-team
repository</a>. There is an issue template for meeting
proposals that gives directions. The basic idea is that you open an
issue with a few sentences describing what you would like to talk
about.</p>
<p>Some details that might be useful to include:</p>
<ul>
<li>how complex of a topic you think this is</li>
<li>people in the compiler team that you think should be present for the meeting</li>
</ul>
<h3><a class="header" href="#expectations-for-the-meeting" id="expectations-for-the-meeting">Expectations for the meeting</a></h3>
<p>By the time the meeting takes place, we generally would prefer to have
a more detailed write-up or proposal. You can find a <a href="https://github.com/rust-lang/compiler-team/blob/master/templates/steering-meeting-proposal.md">template</a> for
such a proposal here. This should be created in the form of a hackmd
document -- usually we will then update this document with the minutes
and consensus from the meeting. The final notes are then stored in the
<a href="https://github.com/rust-lang/compiler-team/tree/master/content/minutes">minutes</a> directory of the compiler-team repository.</p>
<h3><a class="header" href="#expectations-for-a-non-technical-proposal" id="expectations-for-a-non-technical-proposal">Expectations for a non-technical proposal</a></h3>
<p><strong>The requirements for non-technical proposals are somewhat looser.</strong>  A
few sentences or paragraphs may well suffice, if it is sufficient to
understand the aims of the discussion.</p>
<h2><a class="header" href="#frequently-asked-questions" id="frequently-asked-questions">Frequently asked questions</a></h2>
<p><strong>What happens if there are not enough proposals?</strong> As noted above,
meetings are not mandatory. If there aren't enough proposals in some
particular iteration, then we can just opt to not discuss anything.</p>
<h1><a class="header" href="#how-to-run-the-planning-meeting" id="how-to-run-the-planning-meeting">How to run the planning meeting</a></h1>
<h2><a class="header" href="#week-of-the-meeting" id="week-of-the-meeting">Week of the meeting</a></h2>
<ul>
<li>Announce the meeting in the triage meeting</li>
<li>Skim over the list of proposals and ping people who have open
proposals to get their availability over the next few weeks</li>
</ul>
<h2><a class="header" href="#day-of-the-meeting" id="day-of-the-meeting">Day of the meeting</a></h2>
<ul>
<li>Create a <code>design meeting YYYY.MM.DD</code> topic
<ul>
<li>Ping <code>@t-compiler/meeting</code>, ideally 1h or so before the meeting actually starts,
to remind people</li>
</ul>
</li>
<li>At the time of the meeting, return to the topic
<ul>
<li>Ping <code>@t-compiler/meeting</code> to let people know the meeting is starting</li>
</ul>
</li>
<li>We typically begin with a 5min announcement period</li>
<li>Visit the <a href="compiler/steering-meeting/XXX">compiler-team</a> repository to get a list of proposed meetings</li>
</ul>
<p>To actually make the final selection, we recommend</p>
<ul>
<li>First, try to identify topics that are clear non-candidates
<ul>
<li>for example, sometimes more investigative work (e.g., data gathering) is needed</li>
<li>try to identify people to do those tasks</li>
<li>other issues may be out of date, or clear non-starters, and they can be closed</li>
</ul>
</li>
<li>Next tackle technical design meetings, then non-technical
<ul>
<li>Typical ratio is 2 technical, 1 non-technical, but this is not set in stone</li>
<li>It's ok to have fewer than 3 meetings</li>
</ul>
</li>
</ul>
<h2><a class="header" href="#announce-the-meetings" id="announce-the-meetings">Announce the meetings</a></h2>
<p>For each scheduled meeting, create a calendar event:</p>
<ul>
<li>invite key participants to the meeting</li>
<li>set the location to <code>#t-compiler, Zulip</code></li>
<li>include a link to the design meeting issue in the event</li>
</ul>
<p>In the relevant issues, add the <code>meeting-scheduled</code> label and add a
message like:</p>
<pre><code>In today's [planning meeting], we decided to schedule this meeting for **DATE**.

[Calendar event]

[planning meeting]: XXX link to Zulip topic
[Calendar event]: XXX link to calendar event
</code></pre>
<p>You can get the link to the calendar event by clicking on the event in
google calendar and selecting &quot;publish&quot;.</p>
<h2><a class="header" href="#publish-a-blog-post" id="publish-a-blog-post">Publish a blog post</a></h2>
<p>Add a blog post to the Inside Rust blog using the <a href="compiler/steering-meeting/XXX">template found on
the compiler-team repository</a>.</p>
<h1><a class="header" href="#how-to-run-the-design-meeting" id="how-to-run-the-design-meeting">How to run the design meeting</a></h1>
<h2><a class="header" href="#week-of-the-meeting-1" id="week-of-the-meeting-1">Week of the meeting</a></h2>
<ul>
<li>Announce the meeting in the triage meeting</li>
<li>Skim over the list of proposals and ping people who have open
proposals to get their availability over the next few weeks</li>
<li>Make sure that a write-up is available and nag the meeting person otherwise</li>
</ul>
<h2><a class="header" href="#day-of-the-meeting-1" id="day-of-the-meeting-1">Day of the meeting</a></h2>
<ul>
<li>Create a <code>design meeting YYYY.MM.DD</code> topic
<ul>
<li>Ping <code>@t-compiler/meeting</code>, ideally 1h or so before the meeting actually starts,
to remind people</li>
<li>Include a link to the design meeting write-up</li>
</ul>
</li>
<li>At the time of the meeting, return to the topic
<ul>
<li>Ping <code>@t-compiler/meeting</code> to let people know the meeting is starting</li>
<li>Include a link to the design meeting write-up</li>
</ul>
</li>
<li>We typically begin with a 5min announcement period</li>
</ul>
<p>To guide the meeting, create a shared hackmd document everyone can
view (or adapt an existing one, if there is a write-up). Use this to
help structure the meeting, document consensus, and take live
notes. Try to ensure that the meeting ends with sort of consensus
statement, even if that consensus is just &quot;here are the problems, here
is a space of solutions and their pros/cons, but we don't have
consensus on which solution to take&quot;.</p>
<h2><a class="header" href="#after-the-meeting" id="after-the-meeting">After the meeting</a></h2>
<ul>
<li>Post the final contents of the summary hackmd as minutes to the
<a href="https://github.com/rust-lang/compiler-team/tree/master/content/minutes/design-meeting"><code>minutes/design-meeting</code> directory in the compiler-team
repository</a></li>
<li>(Optional) Create an Inside Rust blog post pointing people at the
minutes and maybe giving a few notes</li>
</ul>
<h1><a class="header" href="#cratesio" id="cratesio">crates.io</a></h1>
<p>This section documents the processes of the crates.io team.</p>
<h1><a class="header" href="#crate-removal-procedure" id="crate-removal-procedure">Crate removal procedure</a></h1>
<blockquote>
<p><strong>Status 2020-01-21</strong>: this document is incomplete and unvetted. We anticipate to
be receiving guidelines from Mozilla Legal in the near future. If this notice
is still here on 2020-03-21, please comment on <a href="https://github.com/rust-lang/crates-io-cargo-teams/issues/63">this issue</a>
asking for a status update.</p>
</blockquote>
<p>If we get a DMCA takedown notice, here's what needs to happen:</p>
<h2><a class="header" href="#remove-relevant-versions-andor-entire-crates-from-cratesio" id="remove-relevant-versions-andor-entire-crates-from-cratesio">Remove relevant version(s) and/or entire crates from crates.io</a></h2>
<ul>
<li>
<p>Remove it from the database:</p>
<pre><code>heroku run -- cargo run --bin delete-crate [crate-name]
</code></pre>
<p>or</p>
<pre><code>heroku run -- cargo run --bin delete-version [crate-name] [version-number]
</code></pre>
</li>
<li>
<p>Remove the crate or version from the index. To remove an entire crate, remove
the entire crate file. For a version, remove the line corresponding to the
relevant version.</p>
</li>
<li>
<p>Remove the crate archive(s) and readme file(s) from S3.</p>
</li>
<li>
<p>Invalidate the CloudFront cache – remove both the relevant readme and crate
files. If in doubt, invalidate <code>/*</code> to flush everything.</p>
</li>
</ul>
<h2><a class="header" href="#remove-entire-crates-from-docsrs" id="remove-entire-crates-from-docsrs">Remove entire crates from docs.rs</a></h2>
<p>The docs.rs application supports deleting all the documentation ever published
of a crate, by running a CLI command. The people who currently have permissions
to access the server and run it are:</p>
<ul>
<li>docs.rs Team:
<ul>
<li><a href="https://github.com/QuietMisdreavus">@QuietMisdreavus</a></li>
<li><a href="https://github.com/pietroalbini">@pietroalbini</a></li>
<li><a href="https://github.com/onur">@onur</a></li>
<li><a href="https://github.com/jyn514">@jyn514</a></li>
</ul>
</li>
<li>Infrastructure Team:
<ul>
<li><a href="https://github.com/Mark-Simulacrum">@Mark-Simulacrum</a></li>
</ul>
</li>
<li>People with elevated 1password access</li>
</ul>
<p>You can find the documentation on how to run the command <a href="https://forge.rust-lang.org/infra/docs/docs-rs.html#removing-a-crate-from-the-website">here</a>.</p>
<h1><a class="header" href="#docsrs" id="docsrs">docs.rs</a></h1>
<p><a href="https://docs.rs/">docs.rs</a> is a website that hosts documentation for crates published to <a href="https://crates.io/">crates.io</a>.</p>
<h2><a class="header" href="#external-links-3" id="external-links-3">External Links</a></h2>
<ul>
<li>Source code: <a href="https://github.com/rust-lang/docs.rs">rust-lang/docs.rs</a></li>
<li>Hosted on: <code>docsrs.infra.rust-lang.org</code> (behind the bastion -- <a href="https://github.com/rust-lang/infra-team/blob/master/docs/hosts/bastion.md#logging-into-servers-through-the-bastion">how to connect</a>)</li>
<li>Maintainers: <a href="https://www.rust-lang.org/governance/teams/dev-tools#docs-rs">docs.rs team</a></li>
<li><a href="https://grafana.rust-lang.org/d/rpXrFfKWz/instance-metrics?orgId=1&amp;var-instance=docsrs.infra.rust-lang.org:9100">Instance metrics</a> (only available to infra team members).</li>
<li><a href="https://grafana.rust-lang.org/d/-wWFg2cZz/docs-rs?orgId=1">Application metrics</a> (only available to infra team members).</li>
</ul>
<h1><a class="header" href="#add-a-dependency-to-the-build-environment" id="add-a-dependency-to-the-build-environment">Add a dependency to the build environment</a></h1>
<p>Rustwide internally uses <code>rustops/crates-build-env</code> as the build environment for the crate. If you want to add a system package for crates to link to, this is place you're looking for.</p>
<h2><a class="header" href="#getting-started-2" id="getting-started-2">Getting started</a></h2>
<p>First, clone the crates-build-env repo:</p>
<pre><code class="language-sh">git clone https://github.com/rust-lang/crates-build-env &amp;&amp; cd crates-build-env
</code></pre>
<p>Next, add the package to <code>packages.txt</code>. This should be the name of a package in the <strong>Ubuntu 18.04</strong> Repositories. See <a href="https://packages.ubuntu.com/">the package home page</a> for a full list/search bar, or use <code>apt search</code> locally.</p>
<h2><a class="header" href="#building-the-image" id="building-the-image">Building the image</a></h2>
<p>Now build the image. This will take a very long time, probably 10-20 minutes.</p>
<pre><code class="language-sh">docker build --tag build-env .
</code></pre>
<h2><a class="header" href="#testing-the-image" id="testing-the-image">Testing the image</a></h2>
<p>Use the image to build your crate.</p>
<pre><code class="language-sh">cd /path/to/docs.rs
docker-compose build
# NOTE: this must be an absolute path, not a relative path
# On platforms with coreutils, you can instead use `$(realpath ../relative/path)`
YOUR_CRATE=/path/to/your/crate
# avoid docker-compose creating the volume if it doesn't exist
if [ -e &quot;$YOUR_CRATE&quot; ]; then
  docker-compose run -e DOCS_RS_LOCAL_DOCKER_IMAGE=build-env \
                     -e RUST_BACKTRACE=1 \
                     -v &quot;$YOUR_CRATE&quot;:/opt/rustwide/workdir \
    web build crate --local /opt/rustwide/workdir
else
  echo &quot;$YOUR_CRATE does not exist&quot;;
fi
</code></pre>
<h2><a class="header" href="#making-multiple-changes" id="making-multiple-changes">Making multiple changes</a></h2>
<p>If your build fails even after your changes, it will be annoying to rebuild the image from scratch just to add a single package. Instead, you can make changes directly to the Dockerfile so that the existing packages are cached. Be sure to move these new packages from the Dockerfile to <code>packages.txt</code> once you are sure they work.</p>
<p>On line 7 of the Dockerfile, add this line: <code>RUN apt-get install -y your_second_package</code>.
Rerun the build and start the container; it should take much less time now:</p>
<pre><code class="language-sh">cd /path/to/crates-build-env
docker build --tag build-env .
cd /path/to/docs.rs
docker-compose run -e DOCS_RS_LOCAL_DOCKER_IMAGE=build-env \
                     -v &quot;$YOUR_CRATE&quot;:/opt/rustwide/workdir \
    web build crate --local /opt/rustwide/workdir
</code></pre>
<h2><a class="header" href="#run-the-lint-script" id="run-the-lint-script">Run the lint script</a></h2>
<p>Before you make a PR, run the shell script <code>ci/lint.sh</code> and make sure it passes. It ensures <code>packages.txt</code> is in order and will tell you exactly what changes you need to make if not.</p>
<h2><a class="header" href="#make-a-pull-request" id="make-a-pull-request">Make a pull request</a></h2>
<p>Once you are sure your package builds, you can make a pull request to get it adopted upstream for docs.rs and crater. Go to https://github.com/rust-lang/crates-build-env and click 'Fork' in the top right. Locally, add your fork as a remote in git and push your changes:</p>
<pre><code class="language-sh">git remote add personal https://github.com/&lt;your_username_here&gt;/crates-build-env
git add -u
git commit -m 'add packages necessary for &lt;your_package_here&gt; to compile'
git push personal
</code></pre>
<p>Back on github, make a pull request:</p>
<ol>
<li>Go to https://github.com/rust-lang/crates-build-env/compare</li>
<li>Click 'compare across forks'</li>
<li>Click 'head repository' -&gt; &lt;your_username&gt;/crates-build-env</li>
<li>Click 'Create pull request'</li>
<li>Add a description of what packages you added and what crate they fixed</li>
<li>Click 'Create pull request' again in the bottom right.</li>
</ol>
<p>Hopefully your changes will be merged quickly! After that you can either publish a point release (rebuilds your docs immediately) or request for a member of the docs.rs team to schedule a new build (may take a while depending on their schedules).</p>
<h1><a class="header" href="#developing-locally-without-docker-compose" id="developing-locally-without-docker-compose">Developing locally without docker-compose</a></h1>
<p>These are instructions for developing docs.rs locally. For deploying in a production environment, see <a href="docs-rs/self-hosting.html">Self-hosting a docs.rs instance</a>.</p>
<p>While the docker-compose allows for easier setup of the required dependencies and environment, here is a breakdown of how to use the service without an outer docker container. This is useful e.g. for quickly iterating during development.</p>
<p>Note that this does not remove the docker dependency altogether, since docs.rs uses docker at runtime for sandboxing. This just allows you to run commands more quickly since you are building in debug mode instead of release and are also caching more of the build.</p>
<h2><a class="header" href="#requirements" id="requirements">Requirements</a></h2>
<p>The commands and package names on this page will assume a Debian-like machine with <code>apt</code> installed, but most dependencies should be relatively easy to find on Linux. Do note however that this requires the host to be <code>x86_64-unknown-linux-gnu</code>.</p>
<p>Docs.rs has a few basic requirements:</p>
<ul>
<li>Rust</li>
<li>Git</li>
<li>CMake, GCC, G++, and <code>pkg-config</code> (to build dependencies for crates and docs.rs itself)</li>
<li>OpenSSL, zlib, curl, and <code>libmagic</code> (to link against)</li>
<li>PostgreSQL</li>
</ul>
<pre><code class="language-console"># apt install build-essential git curl cmake gcc g++ pkg-config libmagic-dev libssl-dev zlib1g-dev postgresql
$ sudo -u postgres psql -c &quot;CREATE USER cratesfyi WITH PASSWORD 'password';&quot;
$ sudo -u postgres psql -c &quot;CREATE DATABASE cratesfyi OWNER cratesfyi;&quot;
</code></pre>
<h2><a class="header" href="#building-the-site" id="building-the-site">Building the site</a></h2>
<p>Be warned - this builds over 350 crates! Depending on your computer, this may
take upwards of 10 minutes.</p>
<pre><code class="language-console">$ git clone https://github.com/rust-lang/docs.rs &amp;&amp; cd docs.rs
$ cargo build
</code></pre>
<h2><a class="header" href="#the-prefix-directory" id="the-prefix-directory">The &quot;prefix&quot; directory</a></h2>
<p>docs.rs stores several files in a &quot;prefix&quot; directory. This can be anywhere, but if you put it in the doc.rs repo, it should go under the ./ignored/ directory so that it is not seen by git or the docker daemon.</p>
<pre><code class="language-console">$ mkdir -p ignored/cratesfyi-prefix
$ cd ignored/cratesfyi-prefix
$ mkdir -vp documentations public_html sources
$ git clone https://github.com/rust-lang/crates.io-index &amp;&amp; cd crates.io-index
$ git branch crates-index-diff_last-seen
</code></pre>
<p>(That last command is used to set up the <code>crates-index-diff</code> crate, so we can start monitoring new crate releases.)</p>
<h2><a class="header" href="#docker-group" id="docker-group">Docker group</a></h2>
<p>docs.rs needs to run docker containers for sandboxing. Therefore, you need to be in the 'docker' group to build crates. If you are already in the docker group, you can skip this step (you can check with <code>groups</code>).</p>
<pre><code class="language-console"># usermod -a -G docker &quot;$USER&quot;
$ # now logout and back in to your shell
$ cd /path/to/docs.rs/ignored/cratesfyi-prefix
</code></pre>
<h2><a class="header" href="#environment-for-the-server" id="environment-for-the-server">Environment for the server</a></h2>
<p>To ensure that the docs.rs server is configured properly, we need to set a few environment variables. This is most easily done by making a shell script.</p>
<pre><code class="language-sh">$ cd ..
$ echo '
export CRATESFYI_PREFIX=.
# or add an appropriate username/password as necessary
export CRATESFYI_DATABASE_URL=postgresql://cratesfyi:password@localhost
export CRATESFYI_GITHUB_USERNAME=
export CRATESFYI_GITHUB_ACCESSTOKEN=
export RUST_LOG=cratesfyi,rustwide=info
' &gt; env.sh
</code></pre>
<p>This last command assumes you put the shell script in <code>./env.sh</code>,
but you can name it anything as long as it is in the current directory.</p>
<pre><code class="language-console">$ . ./env.sh
$ cargo run database migrate
$ cargo run database update-search-index
$ cargo run database update-release-activity
# This will take between 5 and 30 minutes on the first run, depending on your internet speed.
# It downloads the rustops/crates-build-env crates which is almost 1 GB.
# It does not currently display a progress bar, this is https://github.com/rust-lang/rustwide/issues/9
# As a workaround, you can run `docker pull rustops/crates-build-env` in a separate terminal.
$ cargo run build crate rand 0.5.5
</code></pre>
<h2><a class="header" href="#building-on-platforms-other-than-linux" id="building-on-platforms-other-than-linux">Building on platforms other than Linux</a></h2>
<p>This is not currently possible. We assume in several places that the rustup toolchain is x86_64-unknown-linux-gnu. As a result, the only way to build on Mac or Alpine is to use the docker-compose file.</p>
<h2><a class="header" href="#resetting-the-database" id="resetting-the-database">Resetting the database</a></h2>
<p>Occasionally, if you make changes to the migrations in a PR, those migrations will be saved in the database but will not be in the code when you switch back to the master branch. In this case, there is no way to undo the migration without knowing exactly which version of the code made the change (<code>cargo migrate</code> will have no effect). Here is a convenient shell script to reset the database so you don't have to remember how to undo your changes.</p>
<p>NOTE: DO NOT RUN THIS IN PRODUCTION.</p>
<pre><code class="language-sh">#!/bin/sh
set -euv

. ./env.sh

sudo -u postgres dropdb cratesfyi --if-exists
sudo -u postgres psql -c 'CREATE DATABASE cratesfyi OWNER cratesfyi;'
cargo run database migrate
</code></pre>
<h1><a class="header" href="#self-hosting-a-docsrs-instance" id="self-hosting-a-docsrs-instance">Self hosting a docs.rs instance</a></h1>
<p>These are instructions for deploying the server in a production environment. For instructions on developing locally without docker-compose, see <a href="docs-rs/no-docker-compose.html">Developing without docker-compose</a>.</p>
<p>Here is a breakdown of what it takes to turn a regular server into its own version of docs.rs.</p>
<p>Beware: This process is rather rough! Attempts at cleaning it up, automating setup components, etc, would be greatly appreciated!</p>
<h2><a class="header" href="#requirements-1" id="requirements-1">Requirements</a></h2>
<p>The commands and package names on this page will assume an Ubuntu server running systemd, but hopefully the explanatory text should give enough information to adapt to other systems. Note that docs.rs depends on the host being <code>x86_64-unknown-linux-gnu</code>.</p>
<p>Docs.rs has a few basic requirements:</p>
<ul>
<li>Rust (preferably via <code>rustup</code>)</li>
<li>Git</li>
<li>CMake, GCC, G++, and <code>pkg-config</code> (to build dependencies for crates and docs.rs itself)</li>
<li>OpenSSL, zlib, curl, and <code>libmagic</code> (to link against)</li>
<li>PostgreSQL</li>
<li>LXC tools (doc builds run inside an LXC container)</li>
</ul>
<pre><code class="language-console">$ curl https://sh.rustup.rs -sSf | sh -s -- -y --default-toolchain nightly
$ source $HOME/.cargo/env
# apt install build-essential git curl cmake gcc g++ pkg-config libmagic-dev libssl-dev zlib1g-dev postgresql lxc-utils
</code></pre>
<h2><a class="header" href="#the-cratesfyi-user" id="the-cratesfyi-user">The <code>cratesfyi</code> user</a></h2>
<p>To help things out later on, we can create a new unprivileged user that will run the server process. This user will own all the files required by the docs.rs process. This user will need to be able to run <code>lxc-attach</code> through <code>sudo</code> to be able to run docs builds, so give it a sudoers file at the same time:</p>
<pre><code class="language-console"># adduser --disabled-login --disabled-password --gecos &quot;&quot; cratesfyi
# echo 'cratesfyi  ALL=(ALL) NOPASSWD: /usr/bin/lxc-attach' &gt; /etc/sudoers.d/cratesfyi
</code></pre>
<p>(The name <code>cratesfyi</code> is a historical one: Before the site was called &quot;docs.rs&quot;, it was called &quot;crates.fyi&quot; instead. If you want to update the name of the user, feel free! Just be aware that the name <code>cratesfyi</code> will be used throughout this document.)</p>
<h2><a class="header" href="#the-prefix-directory-1" id="the-prefix-directory-1">The &quot;prefix&quot; directory</a></h2>
<p>In addition to the LXC container, docs.rs also stores several related files in a &quot;prefix&quot; directory. This directory can be stored anywhere, but the <code>cratesfyi</code> user needs to be able to access it:</p>
<pre><code class="language-console"># mkdir /cratesfyi-prefix
# chown cratesfyi:cratesfyi /cratesfyi-prefix
</code></pre>
<p>Now we can set up some required folders. To make sure they all have proper ownership, run them all as <code>cratesfyi</code>:</p>
<pre><code class="language-console">$ sudo -u cratesfyi mkdir -vp /cratesfyi-prefix/documentations /cratesfyi-prefix/public_html /cratesfyi-prefix/sources
$ sudo -u cratesfyi git clone https://github.com/rust-lang/crates.io-index.git /cratesfyi-prefix/crates.io-index
$ sudo -u cratesfyi git --git-dir=/cratesfyi-prefix/crates.io-index/.git branch crates-index-diff_last-seen
</code></pre>
<p>(That last command is used to set up the <code>crates-index-diff</code> crate, so we can start monitoring new crate releases.)</p>
<h2><a class="header" href="#lxc-container" id="lxc-container">LXC container</a></h2>
<p>To help contain what crates' build scripts can access, documentation builds run inside an LXC container. To create one inside the prefix directory:</p>
<pre><code class="language-console"># LANG=C lxc-create -n cratesfyi-container -P /cratesfyi-prefix -t download -- --dist ubuntu --release bionic --arch amd64
# ln -s /cratesfyi-prefix/cratesfyi-container /var/lib/lxc
# chmod 755 /cratesfyi-prefix/cratesfyi-container
# chmod 755 /var/lib/lxc
</code></pre>
<p>(To make deployment simpler, it's important that the OS the container is using is the same as the host! In this case, the host is assumed to be running 64-bit Ubuntu 18.04. If you make the container use a different release or distribution, you'll need to build docs.rs separately inside the container when deploying.)</p>
<p>You'll also need to configure networking for the container. The following is a sample <code>/etc/default/lxc-net</code> that enables NAT networking for the container:</p>
<pre><code>USE_LXC_BRIDGE=&quot;true&quot;
LXC_BRIDGE=&quot;lxcbr0&quot;
LXC_ADDR=&quot;10.0.3.1&quot;
LXC_NETMASK=&quot;255.255.255.0&quot;
LXC_NETWORK=&quot;10.0.3.0/24&quot;
LXC_DHCP_RANGE=&quot;10.0.3.2,10.0.3.254&quot;
LXC_DHCP_MAX=&quot;253&quot;
LXC_DHCP_CONFILE=&quot;&quot;
LXC_DOMAIN=&quot;&quot;
</code></pre>
<p>In addition, you'll need to set the container's configuration to use this. Add the following lines to <code>/cratesfyi-prefix/cratesfyi-container/config</code>:</p>
<pre><code>lxc.net.0.type = veth
lxc.net.0.link = lxcbr0
</code></pre>
<p>Now you can reload the LXC network configuration, start up the container, and set it up to auto-start when the host boots:</p>
<pre><code class="language-console"># systemctl restart lxc-net
# systemctl enable lxc@cratesfyi-container.service
# systemctl start lxc@cratesfyi-container.service
</code></pre>
<p>Now we need to do some setup <em>inside</em> this container. You can either copy all these commands so that each one attaches on its own, or you can run <code>lxc-console -n cratesfyi-container</code> to open a root shell inside the container and skip the <code>lxc-attach</code> prefix.</p>
<pre><code class="language-console"># lxc-attach -n cratesfyi-container -- apt update
# lxc-attach -n cratesfyi-container -- apt upgrade
# lxc-attach -n cratesfyi-container -- apt install curl ca-certificates binutils gcc libc6-dev libmagic1 pkg-config build-essential
</code></pre>
<p>Inside the container, we also need to set up a <code>cratesfyi</code> user, and install Rust for it. In addition to the base Rust installation, we also need to install all the default targets so that we can build docs for all the Tier 1 platforms. The Rust compiler installed inside the container is the one that builds all the docs, so if you want to use a new Rustdoc feature, this is the compiler to update.</p>
<pre><code class="language-console">lxc-attach -n cratesfyi-container -- adduser --disabled-login --disabled-password --gecos &quot;&quot; cratesfyi
lxc-attach -n cratesfyi-container -- su - cratesfyi -c 'curl https://sh.rustup.rs -sSf | sh -s -- -y --default-toolchain nightly'
lxc-attach -n cratesfyi-container -- su - cratesfyi -c 'rustup target add i686-apple-darwin'
lxc-attach -n cratesfyi-container -- su - cratesfyi -c 'rustup target add i686-pc-windows-msvc'
lxc-attach -n cratesfyi-container -- su - cratesfyi -c 'rustup target add i686-unknown-linux-gnu'
lxc-attach -n cratesfyi-container -- su - cratesfyi -c 'rustup target add x86_64-apple-darwin'
lxc-attach -n cratesfyi-container -- su - cratesfyi -c 'rustup target add x86_64-pc-windows-msvc'
</code></pre>
<p>Now that we have Rust installed inside the container, we can use a trick to give the <code>cratesfyi</code> user on the <em>host</em> the same Rust compiler as the <em>container</em>. By symlinking the following directories into its user directory, we don't need to track a <em>third</em> toolchain.</p>
<pre><code class="language-console">for directory in .cargo .rustup .multirust; do  [[ -h /home/cratesfyi/$directory ]] || sudo -u cratesfyi ln -vs /var/lib/lxc/cratesfyi-container/rootfs/home/cratesfyi/$directory /home/cratesfyi/; done
</code></pre>
<h2><a class="header" href="#environment-for-the-cratesfyi-user" id="environment-for-the-cratesfyi-user">Environment for the <code>cratesfyi</code> user</a></h2>
<p>To ensure that the docs.rs server is configured properly, we need to set a few environment variables. The primary ones are going into a separate environment file, so we can load them into the systemd service that will manage the server.</p>
<p>Write the following into <code>/home/cratesfyi/.cratesfyi.env</code>. If you have a GitHub access token that the site can use to collect repository information, add it here, but otherwise leave it blank. The variables need to exist, but they can be blank to skip that collection.</p>
<pre><code>CRATESFYI_PREFIX=/cratesfyi-prefix
CRATESFYI_DATABASE_URL=postgresql://cratesfyi:password@localhost
CRATESFYI_CONTAINER_NAME=cratesfyi-container
CRATESFYI_GITHUB_USERNAME=
CRATESFYI_GITHUB_ACCESSTOKEN=
RUST_LOG=cratesfyi
</code></pre>
<p>Now add the following to <code>/home/cratesfyi/.profile</code>:</p>
<pre><code class="language-sh">export $(cat $HOME/.cratesfyi.env | xargs -d '\n')
export PATH=&quot;$HOME/.cargo/bin:$PATH&quot;
export PATH=&quot;$PATH:$HOME/docs.rs/target/release&quot;
</code></pre>
<h2><a class="header" href="#docsrs-build" id="docsrs-build">Docs.rs build</a></h2>
<p>Now we can actually clone and build the docs.rs source! The location of it doesn't matter much, but again, we want it to be owned by <code>cratesfyi</code> so it can build and run the final executable. In addition, we copy the built <code>cratesfyi</code> binary into the container so that it can be used to arrange builds on the inside.</p>
<pre><code class="language-console">sudo -u cratesfyi git clone https://github.com/rust-lang-nursery/docs.rs.git ~cratesfyi/docs.rs
sudo su - cratesfyi -c 'cd ~/docs.rs &amp;&amp; cargo build --release'
cp -v /home/cratesfyi/docs.rs/target/release/cratesfyi /var/lib/lxc/cratesfyi-container/rootfs/usr/local/bin
</code></pre>
<h2><a class="header" href="#postgresql" id="postgresql">PostgreSQL</a></h2>
<p>Now that we have the repository built, we can use it to set up the database. Docs.rs uses a Postgres database to store information about crates and their documentation. To set one up, we first need to ask Postgres to create the database, and then run the docs.rs command to create the initial tables and content:</p>
<pre><code class="language-console">sudo -u postgres sh -c &quot;psql -c \&quot;CREATE USER cratesfyi WITH PASSWORD 'password';\&quot;&quot;
sudo -u postgres sh -c &quot;psql -c \&quot;CREATE DATABASE cratesfyi OWNER cratesfyi;\&quot;&quot;
sudo su - cratesfyi -c &quot;cd ~/docs.rs &amp;&amp; cargo run --release -- database init&quot;
sudo su - cratesfyi -c &quot;cd ~/docs.rs &amp;&amp; cargo run --release -- build add-essential-files&quot;
sudo su - cratesfyi -c &quot;cd ~/docs.rs &amp;&amp; cargo run --release -- build crate rand 0.5.5&quot;
sudo su - cratesfyi -c &quot;cd ~/docs.rs &amp;&amp; cargo run --release -- database update-search-index&quot;
sudo su - cratesfyi -c &quot;cd ~/docs.rs &amp;&amp; cargo run --release -- database update-release-activity&quot;
</code></pre>
<h2><a class="header" href="#server-configuration" id="server-configuration">Server configuration</a></h2>
<p>We're almost there! At this point, we've got all the pieces in place to run the site. Now we can set up a systemd service that will run the daemon that will collect crate information, orchestrate builds, and serve the website. The following systemd service file can be placed in <code>/etc/systemd/system/cratesfyi.service</code>:</p>
<pre><code class="language-systemd">[Unit]
Description=Cratesfyi daemon
After=network.target postgresql.service

[Service]
User=cratesfyi
Group=cratesfyi
Type=forking
PIDFile=/cratesfyi-prefix/cratesfyi.pid
EnvironmentFile=/home/cratesfyi/.cratesfyi.env
ExecStart=/home/cratesfyi/docs.rs/target/release/cratesfyi daemon
WorkingDirectory=/home/cratesfyi/docs.rs

[Install]
WantedBy=multi-user.target
</code></pre>
<p>Enabling and running that will serve the website on <code>http://localhost:3000</code>, so if you want to route public traffic to it, you'll need to set up something like nginx to proxy the connections to it.</p>
<h2><a class="header" href="#updating-rust" id="updating-rust">Updating Rust</a></h2>
<p>If you want to update the Rust compiler used to build crates (and the Rustdoc that comes with it), you need to make sure you don't interrupt any existing crate builds. The daemon waits for 60 seconds between checking for new crates, so you need to make sure you catch it during that window. Since we hooked the daemon into systemd, the logs will be available in its journal. Running <code>journalctl -efu cratesfyi</code> (it may need to be run as root if nothing appears) will show the latest log output and show new entries as they appear. You're looking for a message like &quot;Finished building new crates, going back to sleep&quot; or &quot;Queue is empty, going back to sleep&quot;, which indicates that the crate-building thread is waiting.</p>
<p>To prevent the queue from building more crates, run the following:</p>
<pre><code class="language-console">sudo su - cratesfyi -c &quot;cd ~/docs.rs &amp;&amp; cargo run --release -- build lock&quot;
</code></pre>
<p>This will create a lock file in the prefix directory that will prevent more crates from being built. At this point, you can update the rustc inside the container and add the rustdoc static files to the database:</p>
<pre><code class="language-console">lxc-attach -n cratesfyi-container -- su - cratesfyi -c 'rustup update'
sudo su - cratesfyi -c &quot;cd ~/docs.rs &amp;&amp; cargo run --release -- build add-essential-files&quot;
</code></pre>
<p>Once this is done, you can unlock the queue to allow crates to build again:</p>
<pre><code class="language-console">sudo su - cratesfyi -c &quot;cd ~/docs.rs &amp;&amp; cargo run --release -- build unlock&quot;
</code></pre>
<p>And we're done! New crates will start being built with the new rustc. If you want to rebuild any existing docs with the new rustdoc, you need to manually build them - there's no automated way to rebuild failed docs or docs from a certain rust version yet.</p>
<h2><a class="header" href="#updating-docsrs" id="updating-docsrs">Updating docs.rs</a></h2>
<p>To update the code for docs.rs itself, you can follow a similar approach. First, watch the logs so you can stop the daemon from building more crates. (You can replace the lock command with a <code>systemctl stop cratesfyi</code> if you don't mind the web server being down while you build.)</p>
<pre><code class="language-console"># journalctl -efu cratesfyi
(wait for build daemon to sleep)
$ sudo su - cratesfyi -c &quot;cd ~/docs.rs &amp;&amp; cargo run --release -- build lock&quot;
</code></pre>
<p>Once the daemon has stopped, you can start updating the code and rebuilding:</p>
<pre><code class="language-console">$ sudo su - cratesfyi -c &quot;cd ~/docs.rs &amp;&amp; git pull&quot;
$ sudo su - cratesfyi -c &quot;cd ~/docs.rs &amp;&amp; cargo build --release&quot;
</code></pre>
<p>Now that we have a shiny new build, we need to make sure the service is using it:</p>
<pre><code class="language-console"># cp -v /home/cratesfyi/docs.rs/target/release/cratesfyi /var/lib/lxc/cratesfyi-container/rootfs/usr/local/bin
# systemctl restart cratesfyi
</code></pre>
<p>Next, we can unlock the builder so it can start checking new crates:</p>
<pre><code class="language-console">$ sudo su - cratesfyi -c &quot;cd ~/docs.rs &amp;&amp; cargo run --release -- build unlock&quot;
</code></pre>
<p>And we're done! Changes to the site or the build behavior should be visible now.</p>
<h1><a class="header" href="#common-maintenance-procedures" id="common-maintenance-procedures">Common maintenance procedures</a></h1>
<h2><a class="header" href="#temporarily-remove-a-crate-from-the-queue" id="temporarily-remove-a-crate-from-the-queue">Temporarily remove a crate from the queue</a></h2>
<p>It might happen that a crate fails to build repeatedly due to a docs.rs bug,
clogging up the queue and preventing other crates to build. In this case it's
possible to temporarily remove the crate from the queue until the docs.rs's bug
is fixed. To do that, log into the machine and open a PostgreSQL shell with:</p>
<pre><code>$ psql
</code></pre>
<p>Then you can run this SQL query to remove the crate:</p>
<pre><code>UPDATE queue SET attempt = 100 WHERE name = '&lt;CRATE_NAME&gt;';
</code></pre>
<p>To add the crate back in the queue you can run in the PostgreSQL shell this
query:</p>
<pre><code>UPDATE queue SET attempt = 0 WHERE name = '&lt;CRATE_NAME&gt;';
</code></pre>
<h2><a class="header" href="#pinning-a-version-of-nightly" id="pinning-a-version-of-nightly">Pinning a version of nightly</a></h2>
<p>Sometimes the latest nightly might be broken, causing doc builds to fail. In
those cases it's possible to tell docs.rs to stop updating to the latest
nightly and instead pin a specific release. To do that you need to edit the
<code>/home/cratesfyi/.docs-rs-env</code> file, adding or changing this environment
variable:</p>
<pre><code>CRATESFYI_TOOLCHAIN=nightly-YYYY-MM-DD
</code></pre>
<p>Once the file changed docs.rs needs to be restarted:</p>
<pre><code>systemctl restart docs.rs
</code></pre>
<p>To return to the latest nightly simply remove the environment variable and
restart docs.rs again.</p>
<h2><a class="header" href="#rebuild-a-specific-crate" id="rebuild-a-specific-crate">Rebuild a specific crate</a></h2>
<p>If a bug was recently fixed, you may want to rebuild a crate so that it builds with the latest version.
From the docs.rs machine:</p>
<pre><code>cratesfyi queue add &lt;crate&gt; &lt;version&gt;
</code></pre>
<p>This will add the crate with a lower priority than new crates by default, you can change the priority with the <code>-p</code> option.</p>
<h2><a class="header" href="#raise-the-limits-for-a-specific-crate" id="raise-the-limits-for-a-specific-crate">Raise the limits for a specific crate</a></h2>
<p>Occasionally crates will ask for their build limits to be raised.
You can raise them from the docs.rs machine with <code>psql</code>.</p>
<p>Raising a memory limit to 8 GB:</p>
<pre><code class="language-psql"># memory is measured in bytes
cratesfyi=&gt; INSERT INTO sandbox_overrides (crate_name, max_memory_bytes)
  VALUES ('crate name', 8589934592);
</code></pre>
<p>Raising a timeout to 15 minutes:</p>
<pre><code class="language-psql">cratesfyi=&gt; INSERT INTO sandbox_overrides (crate_name, timeout_seconds)
  VALUES ('crate name', 900);
</code></pre>
<p>Raising limits for multiple crates at once:</p>
<pre><code class="language-psql">cratesfyi=&gt; INSERT INTO sandbox_overrides (crate_name, max_memory_bytes)
  VALUES ('stm32f4', 8589934592), ('stm32h7', 8589934592), ('stm32g4', 8589934592);
</code></pre>
<h2><a class="header" href="#adding-all-the-crates-failed-after-a-date-back-in-the-queue" id="adding-all-the-crates-failed-after-a-date-back-in-the-queue">Adding all the crates failed after a date back in the queue</a></h2>
<p>After an outage you might want to add all the failed builds back to the queue.
To do that, log into the machine and open a PostgreSQL shell with:</p>
<pre><code>psql
</code></pre>
<p>Then you can run this SQL query to add all the crates failed after <code>YYYY-MM-DD HH:MM:SS</code> back in the queue:</p>
<pre><code>UPDATE queue SET attempt = 0 WHERE attempt &gt;= 5 AND build_time &gt; 'YYYY-MM-DD HH:MM:SS';
</code></pre>
<h2><a class="header" href="#removing-a-crate-from-the-website" id="removing-a-crate-from-the-website">Removing a crate from the website</a></h2>
<p>Sometimes it might be needed to remove all the content related to a crate from
docs.rs (for example after receiving a DMCA). To do that, log into the server
and run:</p>
<pre><code>cratesfyi database delete-crate CRATE_NAME
</code></pre>
<p>The command will remove all the data from the database, and then remove the
files from S3.</p>
<h2><a class="header" href="#blacklisting-crates" id="blacklisting-crates">Blacklisting crates</a></h2>
<p>Occasionally it might be needed to prevent a crate from being built on docs.rs,
for example if we can't legally host the content of those crates. To add a
crate to the blacklist, preventing new builds for it, you can run:</p>
<pre><code>cratesfyi database blacklist add &lt;CRATE_NAME&gt;
</code></pre>
<p>Other operations (such as <code>list</code> and <code>remove</code>) are also supported.</p>
<blockquote>
<p><strong>Warning:</strong> blacklisting a crate doesn't remove existing content from the
website, it just prevents new versions from being built!</p>
</blockquote>
<h1><a class="header" href="#migrating-from-a-local-database-to-s3" id="migrating-from-a-local-database-to-s3">Migrating from a local database to S3</a></h1>
<p>If you're running your own instance of docs.rs for personal development, and you'd like to test out the S3 integration, there are a couple steps involved. It's mostly straightforward, but there's at least one major caveat that should be taken into account.</p>
<h2><a class="header" href="#requirements-2" id="requirements-2">Requirements</a></h2>
<p>Since docs.rs uses a fixed bucket name to upload files, you'll need to set up an independent server that implements the Amazon S3 API. <a href="https://min.io/">Minio</a> is an example of a server you can set up. Instructions for installing and configuring Minio (or any S3-compliant provider) are beyond the scope of this article.</p>
<h2><a class="header" href="#configuring-your-docsrs-instance" id="configuring-your-docsrs-instance">Configuring your docs.rs instance</a></h2>
<p>Once you have your server and credentials set up, you need to tell the docs.rs server to use it. You'll need to add some extra environment variables to the environment file you use to configure docs.rs. It uses the <code>S3_ENDPOINT</code> variable to determine where to call, and the other variables to configure its access privileges. The available environment variables are documented in <code>rusoto</code>'s <a href="https://docs.rs/rusoto_credential/0.40.0/rusoto_credential/struct.EnvironmentProvider.html"><code>EnvironmentProvider</code></a>.</p>
<pre><code class="language-text">AWS_ACCESS_KEY_ID=&lt;access key&gt;
AWS_SECRET_ACCESS_KEY=&lt;access secret&gt;
S3_ENDPOINT=&lt;endpoint url&gt;
</code></pre>
<h2><a class="header" href="#migrating-files-out-of-the-database" id="migrating-files-out-of-the-database">Migrating files out of the database</a></h2>
<p>Before you restart the process to load the new credentials, the files that are currently in the local database need to be migrated out to S3. Once docs.rs sees that it has AWS credentials in its environment, it will stop reading from the <code>files</code> table entirely. Therefore, to properly transition to using the new file storage, you need to run an extra command to upload them. It's helpful to lock the build queue while this is happening, so that no new files will sneak in while the migration happens.</p>
<pre><code class="language-sh">cratesfyi build lock
# edit the environment file with the above variables if you haven't already
cratesfyi database move-to-s3 # this will take a while, depending on the size of your database
sudo systemctl restart cratesfyi # or however you manage your docs.rs service
# verify that files are loading from S3/Minio/etc
cratesfyi build unlock
</code></pre>
<p>Once this is done, new crate builds will upload files directly to your file storage service rather than into the database. The <code>move-to-s3</code> command will remove rows from the <code>files</code> table in the database as it uploads them, so once you're done, you can compact the database to shrink its on-disk size.</p>
<h1><a class="header" href="#github" id="github">GitHub</a></h1>
<p>Github is where the Rust project hosts all of its code, as well as a large parts
of its discussions.</p>
<h2><a class="header" href="#organisations" id="organisations">Organisations</a></h2>
<ul>
<li><a href="https://github.com/rust-lang"><code>rust-lang</code></a> — The Rust project organisation.</li>
<li><a href="https://github.com/rust-embedded"><code>rust-embedded</code></a> — The Embedded Working Group organisation.</li>
<li><a href="https://github.com/rustwasm"><code>rustwasm</code></a> — The WebAssembly Working Group organisation.</li>
<li><a href="https://github.com/rust-cli"><code>rust-cli</code></a> — The Command Line Application Working Group organisation.</li>
<li><a href="https://github.com/rust-secure-code"><code>rust-secure-code</code></a> — The Secure Code Working Group organisation.</li>
<li><a href="https://github.com/rust-gamedev"><code>rust-gamedev</code></a> — The Game Development Working Group organisation.</li>
</ul>
<h2><a class="header" href="#team-repositories" id="team-repositories">Team Repositories</a></h2>
<ul>
<li><a href="https://github.com/rust-lang/compiler-team">Compiler Team</a></li>
<li><a href="https://github.com/rust-lang/core-team">Core Team</a></li>
<li><a href="https://github.com/rust-lang/crates-io-cargo-teams">Crates.io Team</a></li>
<li><a href="https://github.com/rust-lang/infra-team">Infrastructure Team</a></li>
<li><a href="https://github.com/rust-lang/lang-team">Language Team</a></li>
<li><a href="https://github.com/rust-lang/moderation-team">Moderation Team</a></li>
<li><a href="https://github.com/rust-lang/release-team">Release Team</a></li>
</ul>
<h2><a class="header" href="#administration-faq" id="administration-faq">Administration FAQ</a></h2>
<blockquote>
<p>Who administrates the <code>rust-lang</code> organisation?</p>
</blockquote>
<p>All core team members have the <code>admin</code> role.</p>
<blockquote>
<p>How do I create a new repository under the <code>rust-lang</code> organisation, or make
changes that require <code>admin</code> level permissions?</p>
</blockquote>
<p>You can contact a GitHub admin directly, or post the request in <a href="https://rust-lang.zulipchat.com/#narrow/stream/217588-project-leads.20(public)"><code>project leads (public)</code></a> stream on Zulip and an admin will be able to respond to your request
there.</p>
<h1><a class="header" href="#governance" id="governance">Governance</a></h1>
<p style="background: #f8d7da; color: #721c24; padding: 5px">
<strong>IMPORTANT</strong> This document is adapted from
<a href="https://rust-lang.github.io/rfcs/1068-rust-governance.html">RFC 1068</a>
and is currently being actively worked on, however there may be large parts of
Rust's governance that are missing, incomplete, or out of date.
</p>
<h2><a class="header" href="#core-team" id="core-team">Core team</a></h2>
<p><strong>The core team serves as leadership for the Rust project as a whole</strong>. In
particular, it:</p>
<ul>
<li>
<p><strong>Sets the overall direction and vision for the project.</strong> That means setting
the core values that are used when making decisions about technical
tradeoffs. It means steering the project toward specific use cases where Rust
can have a major impact. It means leading the discussion, and writing RFCs
for, <em>major</em> initiatives in the project.</p>
</li>
<li>
<p><strong>Sets the priorities and release schedule.</strong> Design bandwidth is limited, and
it's dangerous to try to grow the language too quickly; the core team makes
some difficult decisions about which areas to prioritize for new design, based
on the core values and target use cases.</p>
</li>
<li>
<p><strong>Focuses on broad, cross-cutting concerns.</strong> The core team is specifically
designed to take a <em>global</em> view of the project, to make sure the pieces are
fitting together in a coherent way.</p>
</li>
<li>
<p><strong>Spins up or shuts down subteams.</strong> Over time, we may want to expand the set
of subteams, and it may make sense to have temporary &quot;strike teams&quot; that focus
on a particular, limited task.</p>
</li>
<li>
<p><strong>Decides whether/when to ungate a feature.</strong> While the subteams make
decisions on RFCs, the core team is responsible for pulling the trigger that
moves a feature from nightly to stable. This provides an extra check that
features have adequately addressed cross-cutting concerns, that the
implementation quality is high enough, and that language/library commitments
are reasonable.</p>
</li>
</ul>
<p>The core team should include both the subteam leaders, and, over time, a diverse
set of other stakeholders that are both actively involved in the Rust community,
and can speak to the needs of major Rust constituencies, to ensure that the
project is addressing real-world needs.</p>
<h2><a class="header" href="#subteams" id="subteams">Subteams</a></h2>
<p><strong>The primary roles of each subteam are</strong>:</p>
<ul>
<li>
<p>Shepherding RFCs for the subteam area. As always, that means (1) ensuring that
stakeholders are aware of the RFC, (2) working to tease out various design
tradeoffs and alternatives, and (3) helping build consensus.</p>
</li>
<li>
<p>Accepting or rejecting RFCs in the subteam area.</p>
</li>
<li>
<p>Setting policy on what changes in the subteam area require RFCs, and reviewing
direct PRs for changes that do not require an RFC.</p>
</li>
<li>
<p>Delegating <em>reviewer rights</em> for the subteam area. The ability to <code>r+</code> is not
limited to team members, and in fact earning <code>r+</code> rights is a good stepping
stone toward team membership. Each team should set reviewing policy, manage
reviewing rights, and ensure that reviews take place in a timely manner.
(Thanks to Nick Cameron for this suggestion.)</p>
</li>
</ul>
<p>Subteams make it possible to involve a larger, more diverse group in the
decision-making process. In particular, <strong>they should involve a mix of</strong>:</p>
<ul>
<li>
<p>Rust project leadership, in the form of at least one core team member (the
leader of the subteam).</p>
</li>
<li>
<p>Area experts: people who have a lot of interest and expertise in the subteam
area, but who may be far less engaged with other areas of the project.</p>
</li>
<li>
<p>Stakeholders: people who are strongly affected by decisions in the
subteam area, but who may not be experts in the design or
implementation of that area. <em>It is crucial that some people heavily
using Rust for applications/libraries have a seat at the table, to
make sure we are actually addressing real-world needs.</em></p>
</li>
</ul>
<p>Members should have demonstrated a good sense for design and dealing with
tradeoffs, an ability to work within a framework of consensus, and of course
sufficient knowledge about or experience with the subteam area. Leaders should
in addition have demonstrated exceptional communication, design, and people
skills. They must be able to work with a diverse group of people and help lead
it toward consensus and execution.</p>
<p>Each subteam is led by a member of the core team. <strong>The leader is responsible for</strong>:</p>
<ul>
<li>
<p>Setting up the subteam:</p>
<ul>
<li>
<p>Deciding on the initial membership of the subteam (in consultation with
the core team). Once the subteam is up and running.</p>
</li>
<li>
<p>Working with subteam members to determine and publish subteam policies and
mechanics, including the way that subteam members join or leave the team
(which should be based on subteam consensus).</p>
</li>
</ul>
</li>
<li>
<p>Communicating core team vision downward to the subteam.</p>
</li>
<li>
<p>Alerting the core team to subteam RFCs that need global, cross-cutting
attention, and to RFCs that have entered the &quot;final comment period&quot; (see below).</p>
</li>
<li>
<p>Ensuring that RFCs and PRs are progressing at a reasonable rate, re-assigning
shepherds/reviewers as needed.</p>
</li>
<li>
<p>Making final decisions in cases of contentious RFCs that are unable to reach
consensus otherwise (should be rare).</p>
</li>
</ul>
<p>The way that subteams communicate internally and externally is left to each
subteam to decide, but:</p>
<ul>
<li>
<p>Technical discussion should take place as much as possible on public forums,
ideally on RFC/PR threads and tagged discuss posts.</p>
</li>
<li>
<p>Each subteam will have a dedicated
<a href="https://internals.rust-lang.org/">internals forum</a> tag.</p>
</li>
<li>
<p>Subteams should actively seek out discussion and input from stakeholders who
are not members of the team.</p>
</li>
<li>
<p>Subteams should have some kind of regular meeting or other way of making
decisions. The content of this meeting should be summarized with the rationale
for each decision -- and, as explained below, decisions should generally be
about weighting a set of already-known tradeoffs, not discussing or
discovering new rationale.</p>
</li>
<li>
<p>Subteams should regularly publish the status of RFCs, PRs, and other news
related to their area. Ideally, this would be done in part via a dashboard
like <a href="http://buildbot.rust-lang.org/homu/queue/rust">the Homu queue</a>.</p>
</li>
</ul>
<h2><a class="header" href="#decision-making" id="decision-making">Decision-making</a></h2>
<h3><a class="header" href="#consensus" id="consensus">Consensus</a></h3>
<p>Rust has long used a form of <a href="https://en.wikipedia.org/wiki/Consensus_decision-making">consensus decision-making</a>. In a
nutshell the premise is that a successful outcome is not where one side of a
debate has &quot;won&quot;, but rather where concerns from <em>all</em> sides have been addressed
in some way. <strong>This emphatically does not entail design by committee, nor
compromised design</strong>. Rather, it's a recognition that</p>
<blockquote>
<p>... every design or implementation choice carries a trade-off and numerous
costs. There is seldom a right answer.</p>
</blockquote>
<p>Breakthrough designs sometimes end up changing the playing field by eliminating
tradeoffs altogether, but more often difficult decisions have to be made. <strong>The
key is to have a clear vision and set of values and priorities</strong>, which is the
core team's responsibility to set and communicate, and the subteam's
responsibility to act upon.</p>
<p>Whenever possible, we seek to reach consensus through discussion and design
revision. Concretely, the steps are:</p>
<ul>
<li>Initial RFC proposed, with initial analysis of tradeoffs.</li>
<li>Comments reveal additional drawbacks, problems, or tradeoffs.</li>
<li>RFC revised to address comments, often by improving the design.</li>
<li>Repeat above until &quot;major objections&quot; are fully addressed, or it's clear that
there is a fundamental choice to be made.</li>
</ul>
<p>Consensus is reached when most people are left with only &quot;minor&quot; objections,
i.e., while they might choose the tradeoffs slightly differently they do not
feel a strong need to <em>actively block</em> the RFC from progressing.</p>
<p>One important question is: consensus among which people, exactly? Of course, the
broader the consensus, the better. But at the very least, <strong>consensus within the
members of the subteam should be the norm for most decisions.</strong> If the core team
has done its job of communicating the values and priorities, it should be
possible to fit the debate about the RFC into that framework and reach a fairly
clear outcome.</p>
<h3><a class="header" href="#lack-of-consensus" id="lack-of-consensus">Lack of consensus</a></h3>
<p>In some cases, though, consensus cannot be reached. These cases tend to split
into two very different camps:</p>
<ul>
<li>
<p>&quot;Trivial&quot; reasons, e.g., there is not widespread agreement about naming, but
there is consensus about the substance.</p>
</li>
<li>
<p>&quot;Deep&quot; reasons, e.g., the design fundamentally improves one set of concerns at
the expense of another, and people on both sides feel strongly about it.</p>
</li>
</ul>
<p>In either case, an alternative form of decision-making is needed.</p>
<ul>
<li>
<p>For the &quot;trivial&quot; case, usually either the RFC shepherd or subteam leader will
make an executive decision.</p>
</li>
<li>
<p>For the &quot;deep&quot; case, the subteam leader is empowered to make a final decision,
but should consult with the rest of the core team before doing so.</p>
</li>
</ul>
<h3><a class="header" href="#how-and-when-rfc-decisions-are-made-and-the-final-comment-period" id="how-and-when-rfc-decisions-are-made-and-the-final-comment-period">How and when RFC decisions are made, and the &quot;final comment period&quot;</a></h3>
<p>Each RFC has a shepherd drawn from the relevant subteam. The shepherd is
responsible for driving the consensus process -- working with both the RFC
author and the broader community to dig out problems, alternatives, and improved
design, always working to reach broader consensus.</p>
<p>At some point, the RFC comments will reach a kind of &quot;steady state&quot;, where no
new tradeoffs are being discovered, and either objections have been addressed,
or it's clear that the design has fundamental downsides that need to be weighed.</p>
<p>At that point, the shepherd will announce that the RFC is in a &quot;final comment
period&quot; (which lasts for one week). This is a kind of &quot;last call&quot; for strong
objections to the RFC. <strong>The announcement of the final comment period for an RFC
should be very visible</strong>; it should be included in the subteam's periodic
communications.</p>
<blockquote>
<p>Note that the final comment period is in part intended to help keep RFCs
moving. Historically, RFCs sometimes stall out at a point where discussion has
died down but a decision isn't needed urgently. In this proposed model, the
RFC author could ask the shepherd to move to the final comment period (and
hence toward a decision).</p>
</blockquote>
<p>After the final comment period, the subteam can make a decision on the RFC. The
role of the subteam at that point is <em>not</em> to reveal any new technical issues or
arguments; if these come up during discussion, they should be added as comments
to the RFC, and it should undergo another final comment period.</p>
<p>Instead, the subteam decision is based on <strong>weighing the already-revealed
tradeoffs against the project's priorities and values</strong> (which the core team is
responsible for setting, globally). In the end, these decisions are about how to
weight tradeoffs. The decision should be communicated in these terms, pointing
out the tradeoffs that were raised and explaining how they were weighted, and
<strong>never introducing new arguments</strong>.</p>
<h2><a class="header" href="#keeping-things-lightweight" id="keeping-things-lightweight">Keeping things lightweight</a></h2>
<p>In addition to the &quot;final comment period&quot; proposed above, this RFC proposes some
further adjustments to the RFC process to keep it lightweight.</p>
<p>A key observation is that, thanks to the stability system and nightly/stable
distinction, <strong>it's easy to experiment with features without commitment</strong>.</p>
<h3><a class="header" href="#clarifying-what-needs-an-rfc" id="clarifying-what-needs-an-rfc">Clarifying what needs an RFC</a></h3>
<p>Over time, we've been drifting toward requiring an RFC for essentially any
user-facing change, which sometimes means that very minor changes get stuck
awaiting an RFC decision. While subteams + final comment period should help keep
the pipeline flowing a bit better, it would also be good to allow &quot;minor&quot;
changes to go through without an RFC, provided there is sufficient review in
some other way. (And in the end, the core team ungates features, which ensures
at least a final review.)</p>
<p>This RFC does not attempt to answer the question &quot;What needs an RFC&quot;, because
that question will vary for each subteam. However, this RFC stipulates that each
subteam should set an explicit policy about:</p>
<ol>
<li>What requires an RFC for the subteam's area, and</li>
<li>What the non-RFC review process is.</li>
</ol>
<p>These guidelines should try to keep the process lightweight for minor changes.</p>
<h3><a class="header" href="#clarifying-the-finality-of-rfcs" id="clarifying-the-finality-of-rfcs">Clarifying the &quot;finality&quot; of RFCs</a></h3>
<p>While RFCs are very important, they do not represent the final state of a
design. Often new issues or improvements arise during implementation, or after
gaining some experience with a feature. <strong>The nightly/stable distinction exists
in part to allow for such design iteration.</strong></p>
<p>Thus RFCs do not need to be &quot;perfect&quot; before acceptance. If consensus is reached
on major points, the minor details can be left to implementation and revision.</p>
<p>Later, if an implementation differs from the RFC in <em>substantial</em> ways, the
subteam should be alerted, and may ask for an explicit amendment RFC. Otherwise,
the changes should just be explained in the commit/PR.</p>
<h2><a class="header" href="#the-teams" id="the-teams">The teams</a></h2>
<p>With all of that out of the way, what subteams should we start with? This RFC
proposes the following initial set:</p>
<ul>
<li>Language design</li>
<li>Libraries</li>
<li>Compiler</li>
<li>Tooling and infrastructure</li>
<li>Moderation</li>
</ul>
<p>In the long run, we will likely also want teams for documentation and for
community events, but these can be spun up once there is a more clear need (and
available resources).</p>
<h3><a class="header" href="#language-design-team" id="language-design-team">Language design team</a></h3>
<p>Focuses on the <em>design</em> of language-level features; not all team members need to
have extensive implementation experience.</p>
<p>Some example RFCs that fall into this area:</p>
<ul>
<li><a href="https://github.com/rust-lang/rfcs/pull/195">Associated types and multidispatch</a></li>
<li><a href="https://github.com/rust-lang/rfcs/pull/982">DST coercions</a></li>
<li><a href="https://github.com/rust-lang/rfcs/pull/243">Trait-based exception handling</a></li>
<li><a href="https://github.com/rust-lang/rfcs/pull/1023">Rebalancing coherence</a></li>
<li><a href="https://github.com/rust-lang/rfcs/pull/560">Integer overflow</a> (this has high
overlap with the library subteam)</li>
<li><a href="https://github.com/rust-lang/rfcs/pull/769">Sound generic drop</a></li>
</ul>
<h3><a class="header" href="#library-team" id="library-team">Library team</a></h3>
<p>Oversees both <code>std</code> and, ultimately, other crates in the <code>rust-lang</code> github
organization. The focus up to this point has been the standard library, but we
will want &quot;official&quot; libraries that aren't quite <code>std</code> territory but are still
vital for Rust. (The precise plan here, as well as the long-term plan for <code>std</code>,
is one of the first important areas of debate for the subteam.) Also includes
API conventions.</p>
<p>Some example RFCs that fall into this area:</p>
<ul>
<li><a href="https://github.com/rust-lang/rfcs/pull/235">Collections reform</a></li>
<li><a href="https://github.com/rust-lang/rfcs/pull/517/">IO reform</a></li>
<li><a href="https://github.com/rust-lang/rfcs/pull/640">Debug improvements</a></li>
<li><a href="https://github.com/rust-lang/rfcs/pull/823">Simplifying std::hash</a></li>
<li><a href="https://github.com/rust-lang/rfcs/pull/199">Conventions for ownership variants</a></li>
</ul>
<h3><a class="header" href="#compiler-team" id="compiler-team">Compiler team</a></h3>
<p>Focuses on compiler internals, including implementation of language
features. This broad category includes work in codegen, factoring of compiler
data structures, type inference, borrowck, and so on.</p>
<p>There is a more limited set of example RFCs for this subteam, in part because we
haven't generally required RFCs for this kind of internals work, but here are two:</p>
<ul>
<li><a href="https://github.com/rust-lang/rfcs/pull/320">Non-zeroing dynamic drops</a> (this
has high overlap with language design)</li>
<li><a href="https://github.com/rust-lang/rfcs/pull/594">Incremental compilation</a></li>
</ul>
<h3><a class="header" href="#tooling-and-infrastructure-team" id="tooling-and-infrastructure-team">Tooling and infrastructure team</a></h3>
<p>Even more broad is the &quot;tooling&quot; subteam, which at inception is planned to
encompass every &quot;official&quot; (rust-lang managed) non-<code>rustc</code> tool:</p>
<ul>
<li>rustdoc</li>
<li>rustfmt</li>
<li>Cargo</li>
<li>crates.io</li>
<li>CI infrastructure</li>
<li>Debugging tools</li>
<li>Profiling tools</li>
<li>Editor/IDE integration</li>
<li>Refactoring tools</li>
</ul>
<p>It's not presently clear exactly what tools will end up under this umbrella, nor
which should be prioritized.</p>
<h3><a class="header" href="#moderation-team" id="moderation-team">Moderation team</a></h3>
<p>Finally, the moderation team is responsible for dealing with CoC violations.</p>
<p>One key difference from the other subteams is that the moderation team does not
have a leader. Its members are chosen directly by the core team, and should be
community members who have demonstrated the highest standard of discourse and
maturity. To limit conflicts of interest, <strong>the moderation subteam should not
include any core team members</strong>. However, the subteam is free to consult with
the core team as it deems appropriate.</p>
<p>The moderation team will have a public email address that can be used to raise
complaints about CoC violations (forwards to all active moderators).</p>
<h4><a class="header" href="#initial-plan-for-moderation" id="initial-plan-for-moderation">Initial plan for moderation</a></h4>
<p>What follows is an initial proposal for the mechanics of moderation. The
moderation subteam may choose to revise this proposal by drafting an RFC, which
will be approved by the core team.</p>
<p>Moderation begins whenever a moderator becomes aware of a CoC problem, either
through a complaint or by observing it directly. In general, the enforcement
steps are as follows:</p>
<blockquote>
<p><strong>These steps are adapted from text written by Manish Goregaokar, who helped
articulate them from experience as a Stack Exchange moderator.</strong></p>
</blockquote>
<ul>
<li>
<p>Except for extreme cases (see below), try first to address the problem with a
light public comment on thread, aimed to de-escalate the situation. These
comments should strive for as much empathy as possible. Moderators should
emphasize that dissenting opinions are valued, and strive to ensure that the
technical points are heard even as they work to cool things down.</p>
<p>When a discussion has just gotten a bit heated, the comment can just be a
reminder to be respectful and that there is rarely a clear &quot;right&quot; answer. In
cases that are more clearly over the line into personal attacks, it can
directly call out a problematic comment.</p>
</li>
<li>
<p>If the problem persists on thread, or if a particular person repeatedly comes
close to or steps over the line of a CoC violation, moderators then email the
offender privately. The message should include relevant portions of the CoC
together with the offending comments. Again, the goal is to de-escalate, and
the email should be written in a dispassionate and empathetic way. However,
the message should also make clear that continued violations may result in a
ban.</p>
</li>
<li>
<p>If problems still persist, the moderators can ban the offender. Banning should
occur for progressively longer periods, for example starting at 1 day, then 1
week, then permanent. The moderation subteam will determine the precise
guidelines here.</p>
</li>
</ul>
<p>In general, moderators can and should unilaterally take the first step, but
steps beyond that (particularly banning) should be done via consensus with the
other moderators. Permanent bans require core team approval.</p>
<p>Some situations call for more immediate, drastic measures: deeply inappropriate
comments, harassment, or comments that make people feel unsafe. (See the
<a href="http://www.rust-lang.org/conduct.html">code of conduct</a> for some more details
about this kind of comment). In these cases, an individual moderator is free to
take immediate, unilateral steps including redacting or removing comments, or
instituting a short-term ban until the subteam can convene to deal with the
situation.</p>
<p>The moderation team is responsible for interpreting the CoC. Drastic measures
like bans should only be used in cases of clear, repeated violations.</p>
<p>Moderators themselves are held to a very high standard of behavior, and should
strive for professional and impersonal interactions when dealing with a CoC
violation. They should always push to <em>de-escalate</em>. And they should recuse
themselves from moderation in threads where they are actively participating in
the technical debate or otherwise have a conflict of interest. Moderators who
fail to keep up this standard, or who abuse the moderation process, may be
removed by the core team.</p>
<p>Subteam, and especially core team members are <em>also</em> held to a high standard of
behavior. Part of the reason to separate the moderation subteam is to ensure
that CoC violations by Rust's leadership be addressed through the same
independent body of moderators.</p>
<p>Moderation covers all rust-lang venues, which currently include github
repos, IRC channels (#rust, #rust-internals, #rustc, #rust-libs), and
the two discourse forums. (The subreddit already has its own
moderation structure, and isn't directly associated with the rust-lang
organization.)</p>
<h1><a class="header" href="#infrastructure" id="infrastructure">Infrastructure</a></h1>
<p>This section documents Rust's infrastructure, and how it is maintained.</p>
<h3><a class="header" href="#external-links-4" id="external-links-4">External Links</a></h3>
<ul>
<li><a href="https://rust-lang-nursery.github.io/rust-toolstate/">rust-toolstate</a> records build and test status of external tools bundled
with the Rust repository.</li>
</ul>
<h1><a class="header" href="#other-rust-installation-methods" id="other-rust-installation-methods">Other Rust Installation Methods</a></h1>
<ul>
<li><a href="infra/other-installation-methods.html#which">Which installer should you use?</a></li>
<li><a href="infra/other-installation-methods.html#more-rustup">Other ways to install <code>rustup</code></a></li>
<li><a href="infra/other-installation-methods.html#standalone">Standalone installers</a></li>
<li><a href="infra/other-installation-methods.html#source">Source code</a></li>
</ul>
<h2><a class="header" href="#which-installer-should-you-use" id="which-installer-should-you-use">Which installer should you use?</a></h2>
<p><span id="which"></span></p>
<p>Rust runs on many platforms, and there are many ways to install Rust. If you
want to install Rust in the most straightforward, recommended way, then follow
the instructions on the main <a href="https://www.rust-lang.org/tools/install">installation page</a>.</p>
<p>That page describes installation via <a href="https://github.com/rust-lang/rustup.rs"><code>rustup</code></a>, a tool that manages multiple
Rust toolchains in a consistent way across all platforms Rust supports. Why
might one <em>not</em> want to install using those instructions?</p>
<ul>
<li>Offline installation. <code>rustup</code> downloads components from the internet on
demand. If you need to install Rust without access to the internet, <code>rustup</code>
is not suitable.</li>
<li>Preference for the system package manager. On Linux in particular, but also on
macOS with <a href="http://brew.sh/">Homebrew</a>, and Windows with <a href="http://chocolatey.org/">Chocolatey</a> or <a href="https://scoop.sh/">Scoop</a>, developers sometimes
prefer to install Rust with their platform's package manager.</li>
<li>Preference against <code>curl | sh</code>. On Unix, we usually install <code>rustup</code> by
running a shell script via <code>curl</code>. Some have concerns about the security of
this arrangement and would prefer to download and run the installer
themselves.</li>
<li>Validating signatures. Although <code>rustup</code> performs its downloads over HTTPS,
the only way to verify the signatures of Rust installers today is to do so
manually with the standalone installers.</li>
<li>GUI installation and integration with &quot;Add/Remove Programs&quot; on Windows.
<code>rustup</code> runs in the console and does not register its installation like
typical Windows programs. If you prefer a more typical GUI installation on
Windows there are standalone <code>.msi</code> installers. In the future <code>rustup</code> will
also have a GUI installer on Windows.</li>
</ul>
<p>Rust's platform support is defined in <a href="https://forge.rust-lang.org/release/platform-support.html">three tiers</a>, which correspond closely
with the installation methods available: in general, the Rust project provides
binary builds for all tier 1 and tier 2 platforms, and they are all installable
via <code>rustup</code>. Some tier 2 platforms though have only the standard library
available, not the compiler itself; that is, they are cross-compilation targets
only; Rust code can run on those platforms, but they do not run the compiler
itself. Such targets can be installed with the <code>rustup target add</code> command.</p>
<h2><a class="header" href="#other-ways-to-install-rustup" id="other-ways-to-install-rustup">Other ways to install <code>rustup</code></a></h2>
<p><span id="rustup"></span></p>
<p>The way to install <code>rustup</code> differs by platform:</p>
<ul>
<li>On Unix, run <code>curl https://sh.rustup.rs -sSf | sh</code> in your shell. This
downloads and runs <a href="https://static.rust-lang.org/rustup/rustup-init.sh"><code>rustup-init.sh</code></a>, which in turn downloads and runs the
correct version of the <code>rustup-init</code> executable for your platform.</li>
<li>On Windows, download and run <a href="https://static.rust-lang.org/rustup/dist/i686-pc-windows-gnu/rustup-init.exe"><code>rustup-init.exe</code></a>.</li>
</ul>
<p><code>rustup-init</code> can be configured interactively, and all options can additionally
be controlled by command-line arguments, which can be passed through the shell
script. Pass <code>--help</code> to <code>rustup-init</code> as follows to display the arguments
<code>rustup-init</code> accepts:</p>
<pre><code>curl https://sh.rustup.rs -sSf | sh -s -- --help
</code></pre>
<p>If you prefer not to use the shell script, you may directly download
<code>rustup-init</code> for the platform of your choice:</p>
<!-- `- [aarch64-linux-android](https://static.rust-lang.org/rustup/dist/aarch64-linux-android/rustup-init)
- [aarch64-unknown-linux-gnu](https://static.rust-lang.org/rustup/dist/aarch64-unknown-linux-gnu/rustup-init)
- [arm-linux-androideabi](https://static.rust-lang.org/rustup/dist/arm-linux-androideabi/rustup-init)
- [arm-unknown-linux-gnueabi](https://static.rust-lang.org/rustup/dist/arm-unknown-linux-gnueabi/rustup-init)
- [arm-unknown-linux-gnueabihf](https://static.rust-lang.org/rustup/dist/arm-unknown-linux-gnueabihf/rustup-init)
- [armv7-linux-androideabi](https://static.rust-lang.org/rustup/dist/armv7-linux-androideabi/rustup-init)
- [armv7-unknown-linux-gnueabihf](https://static.rust-lang.org/rustup/dist/armv7-unknown-linux-gnueabihf/rustup-init)
- [i686-apple-darwin](https://static.rust-lang.org/rustup/dist/i686-apple-darwin/rustup-init)
- [i686-linux-android](https://static.rust-lang.org/rustup/dist/i686-linux-android/rustup-init)
- [i686-pc-windows-gnu](https://static.rust-lang.org/rustup/dist/i686-pc-windows-gnu/rustup-init.exe)
- [i686-pc-windows-msvc](https://static.rust-lang.org/rustup/dist/i686-pc-windows-msvc/rustup-init.exe)
- [i686-unknown-linux-gnu](https://static.rust-lang.org/rustup/dist/i686-unknown-linux-gnu/rustup-init)
- [mips-unknown-linux-gnu](https://static.rust-lang.org/rustup/dist/mips-unknown-linux-gnu/rustup-init)
- [mips64-unknown-linux-gnuabi64](https://static.rust-lang.org/rustup/dist/mips64-unknown-linux-gnuabi64/rustup-init)
- [mips64el-unknown-linux-gnuabi64](https://static.rust-lang.org/rustup/dist/mips64el-unknown-linux-gnuabi64/rustup-init)
- [mipsel-unknown-linux-gnu](https://static.rust-lang.org/rustup/dist/mipsel-unknown-linux-gnu/rustup-init)
- [powerpc-unknown-linux-gnu](https://static.rust-lang.org/rustup/dist/powerpc-unknown-linux-gnu/rustup-init)
- [powerpc64-unknown-linux-gnu](https://static.rust-lang.org/rustup/dist/powerpc64-unknown-linux-gnu/rustup-init)
- [powerpc64le-unknown-linux-gnu](https://static.rust-lang.org/rustup/dist/powerpc64le-unknown-linux-gnu/rustup-init)
- [s390x-unknown-linux-gnu](https://static.rust-lang.org/rustup/dist/s390x-unknown-linux-gnu/rustup-init)
- [x86_64-apple-darwin](https://static.rust-lang.org/rustup/dist/x86_64-apple-darwin/rustup-init)
- [x86_64-linux-android](https://static.rust-lang.org/rustup/dist/x86_64-linux-android/rustup-init)
- [x86_64-pc-windows-gnu](https://static.rust-lang.org/rustup/dist/x86_64-pc-windows-gnu/rustup-init.exe)
- [x86_64-pc-windows-msvc](https://static.rust-lang.org/rustup/dist/x86_64-pc-windows-msvc/rustup-init.exe)
- [x86_64-unknown-freebsd](https://static.rust-lang.org/rustup/dist/x86_64-unknown-freebsd/rustup-init)
- [x86_64-unknown-linux-gnu](https://static.rust-lang.org/rustup/dist/x86_64-unknown-linux-gnu/rustup-init)
- [x86_64-unknown-linux-musl](https://static.rust-lang.org/rustup/dist/x86_64-unknown-linux-musl/rustup-init)
- [x86_64-unknown-netbsd](https://static.rust-lang.org/rustup/dist/x86_64-unknown-netbsd/rustup-init)
`, `platform | stable (1.43.0) | beta | nightly
---------|--------|------|--------
`aarch64-unknown-linux-gnu` | [tar.gz](https://static.rust-lang.org/dist/rust-1.43.0-aarch64-unknown-linux-gnu.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rust-1.43.0-aarch64-unknown-linux-gnu.tar.gz.asc) | [tar.gz](https://static.rust-lang.org/dist/rust-beta-aarch64-unknown-linux-gnu.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rust-beta-aarch64-unknown-linux-gnu.tar.gz.asc) | [tar.gz](https://static.rust-lang.org/dist/rust-nightly-aarch64-unknown-linux-gnu.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rust-nightly-aarch64-unknown-linux-gnu.tar.gz.asc)
`arm-unknown-linux-gnueabi` | [tar.gz](https://static.rust-lang.org/dist/rust-1.43.0-arm-unknown-linux-gnueabi.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rust-1.43.0-arm-unknown-linux-gnueabi.tar.gz.asc) | [tar.gz](https://static.rust-lang.org/dist/rust-beta-arm-unknown-linux-gnueabi.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rust-beta-arm-unknown-linux-gnueabi.tar.gz.asc) | [tar.gz](https://static.rust-lang.org/dist/rust-nightly-arm-unknown-linux-gnueabi.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rust-nightly-arm-unknown-linux-gnueabi.tar.gz.asc)
`arm-unknown-linux-gnueabihf` | [tar.gz](https://static.rust-lang.org/dist/rust-1.43.0-arm-unknown-linux-gnueabihf.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rust-1.43.0-arm-unknown-linux-gnueabihf.tar.gz.asc) | [tar.gz](https://static.rust-lang.org/dist/rust-beta-arm-unknown-linux-gnueabihf.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rust-beta-arm-unknown-linux-gnueabihf.tar.gz.asc) | [tar.gz](https://static.rust-lang.org/dist/rust-nightly-arm-unknown-linux-gnueabihf.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rust-nightly-arm-unknown-linux-gnueabihf.tar.gz.asc)
`armv7-unknown-linux-gnueabihf` | [tar.gz](https://static.rust-lang.org/dist/rust-1.43.0-armv7-unknown-linux-gnueabihf.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rust-1.43.0-armv7-unknown-linux-gnueabihf.tar.gz.asc) | [tar.gz](https://static.rust-lang.org/dist/rust-beta-armv7-unknown-linux-gnueabihf.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rust-beta-armv7-unknown-linux-gnueabihf.tar.gz.asc) | [tar.gz](https://static.rust-lang.org/dist/rust-nightly-armv7-unknown-linux-gnueabihf.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rust-nightly-armv7-unknown-linux-gnueabihf.tar.gz.asc)
`i686-pc-windows-gnu` | [msi](https://static.rust-lang.org/dist/rust-1.43.0-i686-pc-windows-gnu.msi) <br> [msi.asc](https://static.rust-lang.org/dist/rust-1.43.0-i686-pc-windows-gnu.msi.asc) | [msi](https://static.rust-lang.org/dist/rust-beta-i686-pc-windows-gnu.msi) <br> [msi.asc](https://static.rust-lang.org/dist/rust-beta-i686-pc-windows-gnu.msi.asc) | [msi](https://static.rust-lang.org/dist/rust-nightly-i686-pc-windows-gnu.msi) <br> [msi.asc](https://static.rust-lang.org/dist/rust-nightly-i686-pc-windows-gnu.msi.asc)
`i686-pc-windows-msvc` | [msi](https://static.rust-lang.org/dist/rust-1.43.0-i686-pc-windows-msvc.msi) <br> [msi.asc](https://static.rust-lang.org/dist/rust-1.43.0-i686-pc-windows-msvc.msi.asc) | [msi](https://static.rust-lang.org/dist/rust-beta-i686-pc-windows-msvc.msi) <br> [msi.asc](https://static.rust-lang.org/dist/rust-beta-i686-pc-windows-msvc.msi.asc) | [msi](https://static.rust-lang.org/dist/rust-nightly-i686-pc-windows-msvc.msi) <br> [msi.asc](https://static.rust-lang.org/dist/rust-nightly-i686-pc-windows-msvc.msi.asc)
`i686-unknown-linux-gnu` | [tar.gz](https://static.rust-lang.org/dist/rust-1.43.0-i686-unknown-linux-gnu.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rust-1.43.0-i686-unknown-linux-gnu.tar.gz.asc) | [tar.gz](https://static.rust-lang.org/dist/rust-beta-i686-unknown-linux-gnu.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rust-beta-i686-unknown-linux-gnu.tar.gz.asc) | [tar.gz](https://static.rust-lang.org/dist/rust-nightly-i686-unknown-linux-gnu.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rust-nightly-i686-unknown-linux-gnu.tar.gz.asc)
`mips-unknown-linux-gnu` | [tar.gz](https://static.rust-lang.org/dist/rust-1.43.0-mips-unknown-linux-gnu.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rust-1.43.0-mips-unknown-linux-gnu.tar.gz.asc) | [tar.gz](https://static.rust-lang.org/dist/rust-beta-mips-unknown-linux-gnu.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rust-beta-mips-unknown-linux-gnu.tar.gz.asc) | [tar.gz](https://static.rust-lang.org/dist/rust-nightly-mips-unknown-linux-gnu.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rust-nightly-mips-unknown-linux-gnu.tar.gz.asc)
`mips64-unknown-linux-gnuabi64` | [tar.gz](https://static.rust-lang.org/dist/rust-1.43.0-mips64-unknown-linux-gnuabi64.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rust-1.43.0-mips64-unknown-linux-gnuabi64.tar.gz.asc) | [tar.gz](https://static.rust-lang.org/dist/rust-beta-mips64-unknown-linux-gnuabi64.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rust-beta-mips64-unknown-linux-gnuabi64.tar.gz.asc) | [tar.gz](https://static.rust-lang.org/dist/rust-nightly-mips64-unknown-linux-gnuabi64.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rust-nightly-mips64-unknown-linux-gnuabi64.tar.gz.asc)
`mips64el-unknown-linux-gnuabi64` | [tar.gz](https://static.rust-lang.org/dist/rust-1.43.0-mips64el-unknown-linux-gnuabi64.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rust-1.43.0-mips64el-unknown-linux-gnuabi64.tar.gz.asc) | [tar.gz](https://static.rust-lang.org/dist/rust-beta-mips64el-unknown-linux-gnuabi64.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rust-beta-mips64el-unknown-linux-gnuabi64.tar.gz.asc) | [tar.gz](https://static.rust-lang.org/dist/rust-nightly-mips64el-unknown-linux-gnuabi64.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rust-nightly-mips64el-unknown-linux-gnuabi64.tar.gz.asc)
`mipsel-unknown-linux-gnu` | [tar.gz](https://static.rust-lang.org/dist/rust-1.43.0-mipsel-unknown-linux-gnu.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rust-1.43.0-mipsel-unknown-linux-gnu.tar.gz.asc) | [tar.gz](https://static.rust-lang.org/dist/rust-beta-mipsel-unknown-linux-gnu.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rust-beta-mipsel-unknown-linux-gnu.tar.gz.asc) | [tar.gz](https://static.rust-lang.org/dist/rust-nightly-mipsel-unknown-linux-gnu.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rust-nightly-mipsel-unknown-linux-gnu.tar.gz.asc)
`powerpc-unknown-linux-gnu` | [tar.gz](https://static.rust-lang.org/dist/rust-1.43.0-powerpc-unknown-linux-gnu.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rust-1.43.0-powerpc-unknown-linux-gnu.tar.gz.asc) | [tar.gz](https://static.rust-lang.org/dist/rust-beta-powerpc-unknown-linux-gnu.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rust-beta-powerpc-unknown-linux-gnu.tar.gz.asc) | [tar.gz](https://static.rust-lang.org/dist/rust-nightly-powerpc-unknown-linux-gnu.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rust-nightly-powerpc-unknown-linux-gnu.tar.gz.asc)
`powerpc64-unknown-linux-gnu` | [tar.gz](https://static.rust-lang.org/dist/rust-1.43.0-powerpc64-unknown-linux-gnu.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rust-1.43.0-powerpc64-unknown-linux-gnu.tar.gz.asc) | [tar.gz](https://static.rust-lang.org/dist/rust-beta-powerpc64-unknown-linux-gnu.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rust-beta-powerpc64-unknown-linux-gnu.tar.gz.asc) | [tar.gz](https://static.rust-lang.org/dist/rust-nightly-powerpc64-unknown-linux-gnu.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rust-nightly-powerpc64-unknown-linux-gnu.tar.gz.asc)
`powerpc64le-unknown-linux-gnu` | [tar.gz](https://static.rust-lang.org/dist/rust-1.43.0-powerpc64le-unknown-linux-gnu.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rust-1.43.0-powerpc64le-unknown-linux-gnu.tar.gz.asc) | [tar.gz](https://static.rust-lang.org/dist/rust-beta-powerpc64le-unknown-linux-gnu.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rust-beta-powerpc64le-unknown-linux-gnu.tar.gz.asc) | [tar.gz](https://static.rust-lang.org/dist/rust-nightly-powerpc64le-unknown-linux-gnu.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rust-nightly-powerpc64le-unknown-linux-gnu.tar.gz.asc)
`s390x-unknown-linux-gnu` | [tar.gz](https://static.rust-lang.org/dist/rust-1.43.0-s390x-unknown-linux-gnu.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rust-1.43.0-s390x-unknown-linux-gnu.tar.gz.asc) | [tar.gz](https://static.rust-lang.org/dist/rust-beta-s390x-unknown-linux-gnu.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rust-beta-s390x-unknown-linux-gnu.tar.gz.asc) | [tar.gz](https://static.rust-lang.org/dist/rust-nightly-s390x-unknown-linux-gnu.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rust-nightly-s390x-unknown-linux-gnu.tar.gz.asc)
`x86_64-apple-darwin` | [pkg](https://static.rust-lang.org/dist/rust-1.43.0-x86_64-apple-darwin.pkg) <br> [pkg.asc](https://static.rust-lang.org/dist/rust-1.43.0-x86_64-apple-darwin.pkg.asc) | [pkg](https://static.rust-lang.org/dist/rust-beta-x86_64-apple-darwin.pkg) <br> [pkg.asc](https://static.rust-lang.org/dist/rust-beta-x86_64-apple-darwin.pkg.asc) | [pkg](https://static.rust-lang.org/dist/rust-nightly-x86_64-apple-darwin.pkg) <br> [pkg.asc](https://static.rust-lang.org/dist/rust-nightly-x86_64-apple-darwin.pkg.asc)
`x86_64-pc-windows-gnu` | [msi](https://static.rust-lang.org/dist/rust-1.43.0-x86_64-pc-windows-gnu.msi) <br> [msi.asc](https://static.rust-lang.org/dist/rust-1.43.0-x86_64-pc-windows-gnu.msi.asc) | [msi](https://static.rust-lang.org/dist/rust-beta-x86_64-pc-windows-gnu.msi) <br> [msi.asc](https://static.rust-lang.org/dist/rust-beta-x86_64-pc-windows-gnu.msi.asc) | [msi](https://static.rust-lang.org/dist/rust-nightly-x86_64-pc-windows-gnu.msi) <br> [msi.asc](https://static.rust-lang.org/dist/rust-nightly-x86_64-pc-windows-gnu.msi.asc)
`x86_64-pc-windows-msvc` | [msi](https://static.rust-lang.org/dist/rust-1.43.0-x86_64-pc-windows-msvc.msi) <br> [msi.asc](https://static.rust-lang.org/dist/rust-1.43.0-x86_64-pc-windows-msvc.msi.asc) | [msi](https://static.rust-lang.org/dist/rust-beta-x86_64-pc-windows-msvc.msi) <br> [msi.asc](https://static.rust-lang.org/dist/rust-beta-x86_64-pc-windows-msvc.msi.asc) | [msi](https://static.rust-lang.org/dist/rust-nightly-x86_64-pc-windows-msvc.msi) <br> [msi.asc](https://static.rust-lang.org/dist/rust-nightly-x86_64-pc-windows-msvc.msi.asc)
`x86_64-unknown-freebsd` | [tar.gz](https://static.rust-lang.org/dist/rust-1.43.0-x86_64-unknown-freebsd.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rust-1.43.0-x86_64-unknown-freebsd.tar.gz.asc) | [tar.gz](https://static.rust-lang.org/dist/rust-beta-x86_64-unknown-freebsd.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rust-beta-x86_64-unknown-freebsd.tar.gz.asc) | [tar.gz](https://static.rust-lang.org/dist/rust-nightly-x86_64-unknown-freebsd.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rust-nightly-x86_64-unknown-freebsd.tar.gz.asc)
`x86_64-unknown-linux-gnu` | [tar.gz](https://static.rust-lang.org/dist/rust-1.43.0-x86_64-unknown-linux-gnu.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rust-1.43.0-x86_64-unknown-linux-gnu.tar.gz.asc) | [tar.gz](https://static.rust-lang.org/dist/rust-beta-x86_64-unknown-linux-gnu.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rust-beta-x86_64-unknown-linux-gnu.tar.gz.asc) | [tar.gz](https://static.rust-lang.org/dist/rust-nightly-x86_64-unknown-linux-gnu.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rust-nightly-x86_64-unknown-linux-gnu.tar.gz.asc)
`x86_64-unknown-linux-musl` | [tar.gz](https://static.rust-lang.org/dist/rust-1.43.0-x86_64-unknown-linux-musl.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rust-1.43.0-x86_64-unknown-linux-musl.tar.gz.asc) | [tar.gz](https://static.rust-lang.org/dist/rust-beta-x86_64-unknown-linux-musl.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rust-beta-x86_64-unknown-linux-musl.tar.gz.asc) | [tar.gz](https://static.rust-lang.org/dist/rust-nightly-x86_64-unknown-linux-musl.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rust-nightly-x86_64-unknown-linux-musl.tar.gz.asc)
`x86_64-unknown-netbsd` | [tar.gz](https://static.rust-lang.org/dist/rust-1.43.0-x86_64-unknown-netbsd.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rust-1.43.0-x86_64-unknown-netbsd.tar.gz.asc) | [tar.gz](https://static.rust-lang.org/dist/rust-beta-x86_64-unknown-netbsd.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rust-beta-x86_64-unknown-netbsd.tar.gz.asc) | [tar.gz](https://static.rust-lang.org/dist/rust-nightly-x86_64-unknown-netbsd.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rust-nightly-x86_64-unknown-netbsd.tar.gz.asc)
`, and `Channel | Archives + Signatures
--------|----------------------
stable (1.43.0) | [tar.gz](https://static.rust-lang.org/dist/rustc-1.43.0-src.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rustc-1.43.0-src.tar.gz.asc)
beta | [tar.gz](https://static.rust-lang.org/dist/rustc-beta-src.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rustc-beta-src.tar.gz.asc)
nightly | [tar.gz](https://static.rust-lang.org/dist/rustc-nightly-src.tar.gz) <br> [tar.gz.asc](https://static.rust-lang.org/dist/rustc-nightly-src.tar.gz.asc)
`
are generated at build time. Please refer to the `blacksmith` preprocessor for
what they each specifically generate.
-->
<ul>
<li><a href="https://static.rust-lang.org/rustup/dist/aarch64-linux-android/rustup-init">aarch64-linux-android</a></li>
<li><a href="https://static.rust-lang.org/rustup/dist/aarch64-unknown-linux-gnu/rustup-init">aarch64-unknown-linux-gnu</a></li>
<li><a href="https://static.rust-lang.org/rustup/dist/arm-linux-androideabi/rustup-init">arm-linux-androideabi</a></li>
<li><a href="https://static.rust-lang.org/rustup/dist/arm-unknown-linux-gnueabi/rustup-init">arm-unknown-linux-gnueabi</a></li>
<li><a href="https://static.rust-lang.org/rustup/dist/arm-unknown-linux-gnueabihf/rustup-init">arm-unknown-linux-gnueabihf</a></li>
<li><a href="https://static.rust-lang.org/rustup/dist/armv7-linux-androideabi/rustup-init">armv7-linux-androideabi</a></li>
<li><a href="https://static.rust-lang.org/rustup/dist/armv7-unknown-linux-gnueabihf/rustup-init">armv7-unknown-linux-gnueabihf</a></li>
<li><a href="https://static.rust-lang.org/rustup/dist/i686-apple-darwin/rustup-init">i686-apple-darwin</a></li>
<li><a href="https://static.rust-lang.org/rustup/dist/i686-linux-android/rustup-init">i686-linux-android</a></li>
<li><a href="https://static.rust-lang.org/rustup/dist/i686-pc-windows-gnu/rustup-init.exe">i686-pc-windows-gnu</a></li>
<li><a href="https://static.rust-lang.org/rustup/dist/i686-pc-windows-msvc/rustup-init.exe">i686-pc-windows-msvc</a></li>
<li><a href="https://static.rust-lang.org/rustup/dist/i686-unknown-linux-gnu/rustup-init">i686-unknown-linux-gnu</a></li>
<li><a href="https://static.rust-lang.org/rustup/dist/mips-unknown-linux-gnu/rustup-init">mips-unknown-linux-gnu</a></li>
<li><a href="https://static.rust-lang.org/rustup/dist/mips64-unknown-linux-gnuabi64/rustup-init">mips64-unknown-linux-gnuabi64</a></li>
<li><a href="https://static.rust-lang.org/rustup/dist/mips64el-unknown-linux-gnuabi64/rustup-init">mips64el-unknown-linux-gnuabi64</a></li>
<li><a href="https://static.rust-lang.org/rustup/dist/mipsel-unknown-linux-gnu/rustup-init">mipsel-unknown-linux-gnu</a></li>
<li><a href="https://static.rust-lang.org/rustup/dist/powerpc-unknown-linux-gnu/rustup-init">powerpc-unknown-linux-gnu</a></li>
<li><a href="https://static.rust-lang.org/rustup/dist/powerpc64-unknown-linux-gnu/rustup-init">powerpc64-unknown-linux-gnu</a></li>
<li><a href="https://static.rust-lang.org/rustup/dist/powerpc64le-unknown-linux-gnu/rustup-init">powerpc64le-unknown-linux-gnu</a></li>
<li><a href="https://static.rust-lang.org/rustup/dist/s390x-unknown-linux-gnu/rustup-init">s390x-unknown-linux-gnu</a></li>
<li><a href="https://static.rust-lang.org/rustup/dist/x86_64-apple-darwin/rustup-init">x86_64-apple-darwin</a></li>
<li><a href="https://static.rust-lang.org/rustup/dist/x86_64-linux-android/rustup-init">x86_64-linux-android</a></li>
<li><a href="https://static.rust-lang.org/rustup/dist/x86_64-pc-windows-gnu/rustup-init.exe">x86_64-pc-windows-gnu</a></li>
<li><a href="https://static.rust-lang.org/rustup/dist/x86_64-pc-windows-msvc/rustup-init.exe">x86_64-pc-windows-msvc</a></li>
<li><a href="https://static.rust-lang.org/rustup/dist/x86_64-unknown-freebsd/rustup-init">x86_64-unknown-freebsd</a></li>
<li><a href="https://static.rust-lang.org/rustup/dist/x86_64-unknown-linux-gnu/rustup-init">x86_64-unknown-linux-gnu</a></li>
<li><a href="https://static.rust-lang.org/rustup/dist/x86_64-unknown-linux-musl/rustup-init">x86_64-unknown-linux-musl</a></li>
<li><a href="https://static.rust-lang.org/rustup/dist/x86_64-unknown-netbsd/rustup-init">x86_64-unknown-netbsd</a></li>
</ul>
<h2><a class="header" href="#standalone-installers" id="standalone-installers">Standalone installers</a></h2>
<p><span id="standalone"></span></p>
<p>The official Rust standalone installers contain a single release of Rust, and
are suitable for offline installation. They come in three forms: tarballs
(extension <code>.tar.gz</code>), that work in any Unix-like environment, Windows
installers (<code>.msi</code>), and Mac installers (<code>.pkg</code>). These installers come with
<code>rustc</code>, <code>cargo</code>, <code>rustdoc</code>, the standard library, and the standard
documentation, but do not provide access to additional cross-targets like
<code>rustup</code> does.</p>
<p>The most common reasons to use these are:</p>
<ul>
<li>Offline installation</li>
<li>Preferring a more platform-integrated, graphical installer on Windows</li>
</ul>
<p>Each of these binaries is signed with the <a href="https://static.rust-lang.org/rust-key.gpg.ascii">Rust signing key</a>, which is
<a href="https://keybase.io/rust">available on keybase.io</a>, by the Rust build infrastructure, with <a href="https://gnupg.org/">GPG</a>. In the
tables below, the <code>.asc</code> files are the signatures.</p>
<!-- FIXME: Show this sentence again once we've found a quick way to display the archives.
Past releases can be found in [the archives].
-->
<table><thead><tr><th>platform</th><th>stable (1.43.0)</th><th>beta</th><th>nightly</th></tr></thead><tbody>
<tr><td><code>aarch64-unknown-linux-gnu</code></td><td><a href="https://static.rust-lang.org/dist/rust-1.43.0-aarch64-unknown-linux-gnu.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rust-1.43.0-aarch64-unknown-linux-gnu.tar.gz.asc">tar.gz.asc</a></td><td><a href="https://static.rust-lang.org/dist/rust-beta-aarch64-unknown-linux-gnu.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rust-beta-aarch64-unknown-linux-gnu.tar.gz.asc">tar.gz.asc</a></td><td><a href="https://static.rust-lang.org/dist/rust-nightly-aarch64-unknown-linux-gnu.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rust-nightly-aarch64-unknown-linux-gnu.tar.gz.asc">tar.gz.asc</a></td></tr>
<tr><td><code>arm-unknown-linux-gnueabi</code></td><td><a href="https://static.rust-lang.org/dist/rust-1.43.0-arm-unknown-linux-gnueabi.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rust-1.43.0-arm-unknown-linux-gnueabi.tar.gz.asc">tar.gz.asc</a></td><td><a href="https://static.rust-lang.org/dist/rust-beta-arm-unknown-linux-gnueabi.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rust-beta-arm-unknown-linux-gnueabi.tar.gz.asc">tar.gz.asc</a></td><td><a href="https://static.rust-lang.org/dist/rust-nightly-arm-unknown-linux-gnueabi.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rust-nightly-arm-unknown-linux-gnueabi.tar.gz.asc">tar.gz.asc</a></td></tr>
<tr><td><code>arm-unknown-linux-gnueabihf</code></td><td><a href="https://static.rust-lang.org/dist/rust-1.43.0-arm-unknown-linux-gnueabihf.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rust-1.43.0-arm-unknown-linux-gnueabihf.tar.gz.asc">tar.gz.asc</a></td><td><a href="https://static.rust-lang.org/dist/rust-beta-arm-unknown-linux-gnueabihf.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rust-beta-arm-unknown-linux-gnueabihf.tar.gz.asc">tar.gz.asc</a></td><td><a href="https://static.rust-lang.org/dist/rust-nightly-arm-unknown-linux-gnueabihf.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rust-nightly-arm-unknown-linux-gnueabihf.tar.gz.asc">tar.gz.asc</a></td></tr>
<tr><td><code>armv7-unknown-linux-gnueabihf</code></td><td><a href="https://static.rust-lang.org/dist/rust-1.43.0-armv7-unknown-linux-gnueabihf.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rust-1.43.0-armv7-unknown-linux-gnueabihf.tar.gz.asc">tar.gz.asc</a></td><td><a href="https://static.rust-lang.org/dist/rust-beta-armv7-unknown-linux-gnueabihf.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rust-beta-armv7-unknown-linux-gnueabihf.tar.gz.asc">tar.gz.asc</a></td><td><a href="https://static.rust-lang.org/dist/rust-nightly-armv7-unknown-linux-gnueabihf.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rust-nightly-armv7-unknown-linux-gnueabihf.tar.gz.asc">tar.gz.asc</a></td></tr>
<tr><td><code>i686-pc-windows-gnu</code></td><td><a href="https://static.rust-lang.org/dist/rust-1.43.0-i686-pc-windows-gnu.msi">msi</a> <br> <a href="https://static.rust-lang.org/dist/rust-1.43.0-i686-pc-windows-gnu.msi.asc">msi.asc</a></td><td><a href="https://static.rust-lang.org/dist/rust-beta-i686-pc-windows-gnu.msi">msi</a> <br> <a href="https://static.rust-lang.org/dist/rust-beta-i686-pc-windows-gnu.msi.asc">msi.asc</a></td><td><a href="https://static.rust-lang.org/dist/rust-nightly-i686-pc-windows-gnu.msi">msi</a> <br> <a href="https://static.rust-lang.org/dist/rust-nightly-i686-pc-windows-gnu.msi.asc">msi.asc</a></td></tr>
<tr><td><code>i686-pc-windows-msvc</code></td><td><a href="https://static.rust-lang.org/dist/rust-1.43.0-i686-pc-windows-msvc.msi">msi</a> <br> <a href="https://static.rust-lang.org/dist/rust-1.43.0-i686-pc-windows-msvc.msi.asc">msi.asc</a></td><td><a href="https://static.rust-lang.org/dist/rust-beta-i686-pc-windows-msvc.msi">msi</a> <br> <a href="https://static.rust-lang.org/dist/rust-beta-i686-pc-windows-msvc.msi.asc">msi.asc</a></td><td><a href="https://static.rust-lang.org/dist/rust-nightly-i686-pc-windows-msvc.msi">msi</a> <br> <a href="https://static.rust-lang.org/dist/rust-nightly-i686-pc-windows-msvc.msi.asc">msi.asc</a></td></tr>
<tr><td><code>i686-unknown-linux-gnu</code></td><td><a href="https://static.rust-lang.org/dist/rust-1.43.0-i686-unknown-linux-gnu.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rust-1.43.0-i686-unknown-linux-gnu.tar.gz.asc">tar.gz.asc</a></td><td><a href="https://static.rust-lang.org/dist/rust-beta-i686-unknown-linux-gnu.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rust-beta-i686-unknown-linux-gnu.tar.gz.asc">tar.gz.asc</a></td><td><a href="https://static.rust-lang.org/dist/rust-nightly-i686-unknown-linux-gnu.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rust-nightly-i686-unknown-linux-gnu.tar.gz.asc">tar.gz.asc</a></td></tr>
<tr><td><code>mips-unknown-linux-gnu</code></td><td><a href="https://static.rust-lang.org/dist/rust-1.43.0-mips-unknown-linux-gnu.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rust-1.43.0-mips-unknown-linux-gnu.tar.gz.asc">tar.gz.asc</a></td><td><a href="https://static.rust-lang.org/dist/rust-beta-mips-unknown-linux-gnu.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rust-beta-mips-unknown-linux-gnu.tar.gz.asc">tar.gz.asc</a></td><td><a href="https://static.rust-lang.org/dist/rust-nightly-mips-unknown-linux-gnu.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rust-nightly-mips-unknown-linux-gnu.tar.gz.asc">tar.gz.asc</a></td></tr>
<tr><td><code>mips64-unknown-linux-gnuabi64</code></td><td><a href="https://static.rust-lang.org/dist/rust-1.43.0-mips64-unknown-linux-gnuabi64.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rust-1.43.0-mips64-unknown-linux-gnuabi64.tar.gz.asc">tar.gz.asc</a></td><td><a href="https://static.rust-lang.org/dist/rust-beta-mips64-unknown-linux-gnuabi64.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rust-beta-mips64-unknown-linux-gnuabi64.tar.gz.asc">tar.gz.asc</a></td><td><a href="https://static.rust-lang.org/dist/rust-nightly-mips64-unknown-linux-gnuabi64.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rust-nightly-mips64-unknown-linux-gnuabi64.tar.gz.asc">tar.gz.asc</a></td></tr>
<tr><td><code>mips64el-unknown-linux-gnuabi64</code></td><td><a href="https://static.rust-lang.org/dist/rust-1.43.0-mips64el-unknown-linux-gnuabi64.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rust-1.43.0-mips64el-unknown-linux-gnuabi64.tar.gz.asc">tar.gz.asc</a></td><td><a href="https://static.rust-lang.org/dist/rust-beta-mips64el-unknown-linux-gnuabi64.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rust-beta-mips64el-unknown-linux-gnuabi64.tar.gz.asc">tar.gz.asc</a></td><td><a href="https://static.rust-lang.org/dist/rust-nightly-mips64el-unknown-linux-gnuabi64.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rust-nightly-mips64el-unknown-linux-gnuabi64.tar.gz.asc">tar.gz.asc</a></td></tr>
<tr><td><code>mipsel-unknown-linux-gnu</code></td><td><a href="https://static.rust-lang.org/dist/rust-1.43.0-mipsel-unknown-linux-gnu.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rust-1.43.0-mipsel-unknown-linux-gnu.tar.gz.asc">tar.gz.asc</a></td><td><a href="https://static.rust-lang.org/dist/rust-beta-mipsel-unknown-linux-gnu.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rust-beta-mipsel-unknown-linux-gnu.tar.gz.asc">tar.gz.asc</a></td><td><a href="https://static.rust-lang.org/dist/rust-nightly-mipsel-unknown-linux-gnu.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rust-nightly-mipsel-unknown-linux-gnu.tar.gz.asc">tar.gz.asc</a></td></tr>
<tr><td><code>powerpc-unknown-linux-gnu</code></td><td><a href="https://static.rust-lang.org/dist/rust-1.43.0-powerpc-unknown-linux-gnu.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rust-1.43.0-powerpc-unknown-linux-gnu.tar.gz.asc">tar.gz.asc</a></td><td><a href="https://static.rust-lang.org/dist/rust-beta-powerpc-unknown-linux-gnu.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rust-beta-powerpc-unknown-linux-gnu.tar.gz.asc">tar.gz.asc</a></td><td><a href="https://static.rust-lang.org/dist/rust-nightly-powerpc-unknown-linux-gnu.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rust-nightly-powerpc-unknown-linux-gnu.tar.gz.asc">tar.gz.asc</a></td></tr>
<tr><td><code>powerpc64-unknown-linux-gnu</code></td><td><a href="https://static.rust-lang.org/dist/rust-1.43.0-powerpc64-unknown-linux-gnu.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rust-1.43.0-powerpc64-unknown-linux-gnu.tar.gz.asc">tar.gz.asc</a></td><td><a href="https://static.rust-lang.org/dist/rust-beta-powerpc64-unknown-linux-gnu.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rust-beta-powerpc64-unknown-linux-gnu.tar.gz.asc">tar.gz.asc</a></td><td><a href="https://static.rust-lang.org/dist/rust-nightly-powerpc64-unknown-linux-gnu.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rust-nightly-powerpc64-unknown-linux-gnu.tar.gz.asc">tar.gz.asc</a></td></tr>
<tr><td><code>powerpc64le-unknown-linux-gnu</code></td><td><a href="https://static.rust-lang.org/dist/rust-1.43.0-powerpc64le-unknown-linux-gnu.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rust-1.43.0-powerpc64le-unknown-linux-gnu.tar.gz.asc">tar.gz.asc</a></td><td><a href="https://static.rust-lang.org/dist/rust-beta-powerpc64le-unknown-linux-gnu.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rust-beta-powerpc64le-unknown-linux-gnu.tar.gz.asc">tar.gz.asc</a></td><td><a href="https://static.rust-lang.org/dist/rust-nightly-powerpc64le-unknown-linux-gnu.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rust-nightly-powerpc64le-unknown-linux-gnu.tar.gz.asc">tar.gz.asc</a></td></tr>
<tr><td><code>s390x-unknown-linux-gnu</code></td><td><a href="https://static.rust-lang.org/dist/rust-1.43.0-s390x-unknown-linux-gnu.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rust-1.43.0-s390x-unknown-linux-gnu.tar.gz.asc">tar.gz.asc</a></td><td><a href="https://static.rust-lang.org/dist/rust-beta-s390x-unknown-linux-gnu.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rust-beta-s390x-unknown-linux-gnu.tar.gz.asc">tar.gz.asc</a></td><td><a href="https://static.rust-lang.org/dist/rust-nightly-s390x-unknown-linux-gnu.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rust-nightly-s390x-unknown-linux-gnu.tar.gz.asc">tar.gz.asc</a></td></tr>
<tr><td><code>x86_64-apple-darwin</code></td><td><a href="https://static.rust-lang.org/dist/rust-1.43.0-x86_64-apple-darwin.pkg">pkg</a> <br> <a href="https://static.rust-lang.org/dist/rust-1.43.0-x86_64-apple-darwin.pkg.asc">pkg.asc</a></td><td><a href="https://static.rust-lang.org/dist/rust-beta-x86_64-apple-darwin.pkg">pkg</a> <br> <a href="https://static.rust-lang.org/dist/rust-beta-x86_64-apple-darwin.pkg.asc">pkg.asc</a></td><td><a href="https://static.rust-lang.org/dist/rust-nightly-x86_64-apple-darwin.pkg">pkg</a> <br> <a href="https://static.rust-lang.org/dist/rust-nightly-x86_64-apple-darwin.pkg.asc">pkg.asc</a></td></tr>
<tr><td><code>x86_64-pc-windows-gnu</code></td><td><a href="https://static.rust-lang.org/dist/rust-1.43.0-x86_64-pc-windows-gnu.msi">msi</a> <br> <a href="https://static.rust-lang.org/dist/rust-1.43.0-x86_64-pc-windows-gnu.msi.asc">msi.asc</a></td><td><a href="https://static.rust-lang.org/dist/rust-beta-x86_64-pc-windows-gnu.msi">msi</a> <br> <a href="https://static.rust-lang.org/dist/rust-beta-x86_64-pc-windows-gnu.msi.asc">msi.asc</a></td><td><a href="https://static.rust-lang.org/dist/rust-nightly-x86_64-pc-windows-gnu.msi">msi</a> <br> <a href="https://static.rust-lang.org/dist/rust-nightly-x86_64-pc-windows-gnu.msi.asc">msi.asc</a></td></tr>
<tr><td><code>x86_64-pc-windows-msvc</code></td><td><a href="https://static.rust-lang.org/dist/rust-1.43.0-x86_64-pc-windows-msvc.msi">msi</a> <br> <a href="https://static.rust-lang.org/dist/rust-1.43.0-x86_64-pc-windows-msvc.msi.asc">msi.asc</a></td><td><a href="https://static.rust-lang.org/dist/rust-beta-x86_64-pc-windows-msvc.msi">msi</a> <br> <a href="https://static.rust-lang.org/dist/rust-beta-x86_64-pc-windows-msvc.msi.asc">msi.asc</a></td><td><a href="https://static.rust-lang.org/dist/rust-nightly-x86_64-pc-windows-msvc.msi">msi</a> <br> <a href="https://static.rust-lang.org/dist/rust-nightly-x86_64-pc-windows-msvc.msi.asc">msi.asc</a></td></tr>
<tr><td><code>x86_64-unknown-freebsd</code></td><td><a href="https://static.rust-lang.org/dist/rust-1.43.0-x86_64-unknown-freebsd.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rust-1.43.0-x86_64-unknown-freebsd.tar.gz.asc">tar.gz.asc</a></td><td><a href="https://static.rust-lang.org/dist/rust-beta-x86_64-unknown-freebsd.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rust-beta-x86_64-unknown-freebsd.tar.gz.asc">tar.gz.asc</a></td><td><a href="https://static.rust-lang.org/dist/rust-nightly-x86_64-unknown-freebsd.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rust-nightly-x86_64-unknown-freebsd.tar.gz.asc">tar.gz.asc</a></td></tr>
<tr><td><code>x86_64-unknown-linux-gnu</code></td><td><a href="https://static.rust-lang.org/dist/rust-1.43.0-x86_64-unknown-linux-gnu.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rust-1.43.0-x86_64-unknown-linux-gnu.tar.gz.asc">tar.gz.asc</a></td><td><a href="https://static.rust-lang.org/dist/rust-beta-x86_64-unknown-linux-gnu.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rust-beta-x86_64-unknown-linux-gnu.tar.gz.asc">tar.gz.asc</a></td><td><a href="https://static.rust-lang.org/dist/rust-nightly-x86_64-unknown-linux-gnu.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rust-nightly-x86_64-unknown-linux-gnu.tar.gz.asc">tar.gz.asc</a></td></tr>
<tr><td><code>x86_64-unknown-linux-musl</code></td><td><a href="https://static.rust-lang.org/dist/rust-1.43.0-x86_64-unknown-linux-musl.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rust-1.43.0-x86_64-unknown-linux-musl.tar.gz.asc">tar.gz.asc</a></td><td><a href="https://static.rust-lang.org/dist/rust-beta-x86_64-unknown-linux-musl.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rust-beta-x86_64-unknown-linux-musl.tar.gz.asc">tar.gz.asc</a></td><td><a href="https://static.rust-lang.org/dist/rust-nightly-x86_64-unknown-linux-musl.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rust-nightly-x86_64-unknown-linux-musl.tar.gz.asc">tar.gz.asc</a></td></tr>
<tr><td><code>x86_64-unknown-netbsd</code></td><td><a href="https://static.rust-lang.org/dist/rust-1.43.0-x86_64-unknown-netbsd.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rust-1.43.0-x86_64-unknown-netbsd.tar.gz.asc">tar.gz.asc</a></td><td><a href="https://static.rust-lang.org/dist/rust-beta-x86_64-unknown-netbsd.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rust-beta-x86_64-unknown-netbsd.tar.gz.asc">tar.gz.asc</a></td><td><a href="https://static.rust-lang.org/dist/rust-nightly-x86_64-unknown-netbsd.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rust-nightly-x86_64-unknown-netbsd.tar.gz.asc">tar.gz.asc</a></td></tr>
</tbody></table>
<h2><a class="header" href="#source-code" id="source-code">Source code</a></h2>
<table><thead><tr><th>Channel</th><th>Archives + Signatures</th></tr></thead><tbody>
<tr><td>stable (1.43.0)</td><td><a href="https://static.rust-lang.org/dist/rustc-1.43.0-src.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rustc-1.43.0-src.tar.gz.asc">tar.gz.asc</a></td></tr>
<tr><td>beta</td><td><a href="https://static.rust-lang.org/dist/rustc-beta-src.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rustc-beta-src.tar.gz.asc">tar.gz.asc</a></td></tr>
<tr><td>nightly</td><td><a href="https://static.rust-lang.org/dist/rustc-nightly-src.tar.gz">tar.gz</a> <br> <a href="https://static.rust-lang.org/dist/rustc-nightly-src.tar.gz.asc">tar.gz.asc</a></td></tr>
</tbody></table>
<h1><a class="header" href="#the-rust-release-channel-layout" id="the-rust-release-channel-layout">The Rust Release Channel Layout</a></h1>
<p><strong>NOTE</strong> This document should be considered incomplete and descriptive rather
than normative. Do not rely on anything described herein to be fully correct or
a definition of how things <em>should</em> be done.</p>
<p>A lot of the content herein is derived from
<a href="https://internals.rust-lang.org/t/future-updates-to-the-rustup-distribution-format/4196#the-static-rust-lang-org-layout">a posting made to the Rust internals forum by Brian Anderson back in 2016</a>.</p>
<p>Rust releases are deployed onto <code>static.rust-lang.org</code> where they are served via
<code>https</code>. There are several parts to a release channel (<code>stable</code>, <code>beta</code>,
<code>nightly</code>) but they all key off a manifest file and then go from there.</p>
<h2><a class="header" href="#channel-manifests" id="channel-manifests">Channel manifests</a></h2>
<p>There is a top level directory <code>/dist/</code> which contains the channel manifests.
The manifests are named <code>channel-rust-[channelname].toml</code>. Each channel manifest
is accompanied by a <code>.sha256</code> file which is a checksum of the manifest file and
can be used to check integrity of the downloaded data. In addition each
channel's manifest is also accompanied by a <code>.asc</code> file which is a detached GPG
signature which can be used to check not only the integrity but also the
authenticity of the channel manifest.</p>
<p>In addition to the <code>stable</code>, <code>beta</code>, and <code>nightly</code> channels, there is also a
manifest for each release which will be called <code>channel-rust-x.yy.z.toml</code> with
its associated <code>.sha256</code> and <code>.asc</code> files.</p>
<p>To support date-based channels, there is an archive folder for each day
(labelled <code>YYYY-MM-DD</code>) which contains copies of the requisite channel files on
that day. So, for example, if you installed <code>nightly-2019-02-16</code> then the
channel file would be
<a href="https://static.rust-lang.org/dist/2019-02-16/channel-rust-nightly.toml">https://static.rust-lang.org/dist/2019-02-16/channel-rust-nightly.toml</a>.</p>
<h3><a class="header" href="#content-of-channel-manifests" id="content-of-channel-manifests">Content of channel manifests</a></h3>
<p>Channel manifests are <code>toml</code> files. These are known as <em>v2</em> manifests. The <em>v1</em>
manifests are simply lists of the files associated with a release and are not
generated for every channel all of the time. Currently it is recommended to work
only with the <em>v2</em> manifests and these are the topic of this section.</p>
<p>The top level of the <code>.toml</code> file consists of two important key/value pairs.
Firstly the <code>manifest-version</code> which is, at this time, <code>&quot;2&quot;</code>, and secondly the
date of the manifest (<code>date</code>) whose value is of the form <code>&quot;YYYY-MM-DD&quot;</code>.</p>
<p>There are then a number of top level sections (tables) which are:</p>
<ul>
<li>
<p><code>pkg</code> - This contains the bulk of the manifest and lists the packages which
are part of the release. Typically this will be things like <code>rust</code>, <code>rustc</code>,
<code>cargo</code> etc. The <code>rust</code> package is semi-special and currently is used to
specify the subset of other packages which will be installed by default.</p>
<p>Within packages are <code>components</code> and <code>extensions</code>. Currently <code>components</code> are
installed by default by <code>rustup</code>, <code>extensions</code> are optional components and are
available via <code>rustup component add</code> and friends.</p>
</li>
<li>
<p><code>renames</code> - This contains a set of package renames which can be used to
determine the correct package to fetch when the user enters an alias for it.</p>
<p>Typically renames are used when a package leaves its preview state and is
considered to be release quality. For example, the actual package for
<code>rustfmt</code> is called <code>rustfmt-preview</code> but since its release there has been a
<code>renames.rustfmt</code> table whose <code>to</code> field is <code>rustfmt-preview</code>. When the user runs
<code>rustup component add rustfmt</code> the name is automatically translated to
<code>rustfmt-preview</code> and when the user runs <code>rustup component list</code> then
<code>rustfmt-preview</code> is automatically renamed back to <code>rustfmt</code> for display to
the user.</p>
</li>
<li>
<p><code>profiles</code> - This is part of the future setup for deciding the default
component set to install. Instead of choosing the <code>components</code> of <code>pkg.rust</code>
instead <code>rustup</code> will honor one of the entries in the <code>profiles</code> table.
Usually this will be the <code>default</code> entry which <em>essentially</em> (though not
exactly) boils down to
<code>[&quot;rustc&quot;, &quot;cargo&quot;, &quot;rust-std&quot;, &quot;rust-docs&quot;, &quot;rustfmt&quot;, &quot;clippy&quot;]</code>.</p>
<p>Other profiles include <code>minimal</code> (<code>[&quot;rustc&quot;, &quot;cargo&quot;, &quot;rust-std&quot;]</code>) and
<code>complete</code> which adds in additional tools such as the <code>rls</code>, a copy of the
standard library source (<code>rust-src</code>), <code>miri</code>, <code>lldb</code>, <code>llvm-tools</code>, and
<code>rust-analysis</code>.</p>
</li>
</ul>
<h3><a class="header" href="#package-entries-in-the-channel-manifest" id="package-entries-in-the-channel-manifest">Package entries in the channel manifest</a></h3>
<p>As stated above, packages list their components and extensions (mostly just the
<code>rust</code> package) and they can provide per-target tarball and sha256 data.</p>
<p>For example, a package might be:</p>
<pre><code class="language-toml">[pkg.cargo.target.powerpc64-unknown-linux-gnu]
available = true
url = &quot;https://static.rust-lang.org/dist/2019-05-23/cargo-0.36.0-powerpc64-unknown-linux-gnu.tar.gz&quot;
hash = &quot;279f3a84f40e3547a8532c64643f38068accb91c21f04cd16e46579c893f5a06&quot;
xz_url = &quot;https://static.rust-lang.org/dist/2019-05-23/cargo-0.36.0-powerpc64-unknown-linux-gnu.tar.xz&quot;
xz_hash = &quot;cf93b387508f4aea4e64f8b4887d70cc07a00906b981dc0c143e92e918682e4a&quot;
</code></pre>
<p>Here you can see that this is for the <code>cargo</code> package, and for the
<code>powerpc64-unknown-linux-gnu</code> target. The <code>url</code>/<code>hash</code> combo is for a <code>.tar.gz</code>
and the <code>xz_url</code>/<code>xz_hash</code> pair for the same tarball compressed with <code>xz</code>.
Either pair of url and hash could be present, both may be present, but it is not
useful for neither to be present unless <code>available</code> is set to <code>false</code> to
indicate that that particular combination of package and target is unavailable
in this channel at this time.</p>
<p>In addition, there will be a single entry providing the version for a package in
the form:</p>
<pre><code class="language-toml">[pkg.cargo]
version = &quot;0.36.0 (6f3e9c367 2019-04-04)&quot;
</code></pre>
<p>Here <code>version</code> will be effectively the <code>$tool --version</code> output, minus the
tool's name.</p>
<h2><a class="header" href="#targets" id="targets">Targets</a></h2>
<p>Targets are the same triples you might use when building something with
<code>cargo build --target=$target</code> and you can add them to your installation using
<code>rustup target add $target</code>. When you do that, what <code>rustup</code> actually does is to
find the <code>rust-std</code> package for the target in question and installs that.
Essentially like an imaginary <code>rustup component add rust-std.$target</code>.</p>
<p>If a <code>rust-std</code> package for a target is not <code>available = true</code> then that target
cannot be installed via <code>rustup</code>. This can happen for lower tier targets from
time to time.</p>
<p>Since components and extensions are target-specific in the <code>pkg</code> tables, you
will be able to see that <code>rust-std</code> for every target is specified in every
<code>rust</code> target's extensions. This allows for cross-compilation by installation of
any <code>rust-std</code> on any build system.</p>
<h1><a class="header" href="#service-infrastructure" id="service-infrastructure">Service Infrastructure</a></h1>
<p>Most services in the Rust Infrastructure are deployed via
<a href="https://github.com/rust-lang/rust-central-station">rust-central-station</a>. Questions about infrastructure, including current
status, should go to the <a href="https://discord.gg/rust-lang">#infra Discord channel</a>.</p>
<p><strong>Our stability guarantees</strong>: many of our services rely on publicly-accessible
storage and APIs, but not all of these are intended for public consumption. At
the moment, <strong>only the resources behind <code>static.rust-lang.org</code> are considered
stable</strong>, meaning that those resources will not change without (at least) prior
notice. If you are relying on other parts of the Rust project infrastructure for
your own work, please let the infrastructure team know.</p>
<h2><a class="header" href="#highfive" id="highfive">Highfive</a></h2>
<p><a href="https://github.com/rust-lang/highfive">Highfive</a> is a bot
(<a href="https://github.com/rust-highfive">bot user account</a>) which welcomes newcomers
and assigns reviewers.</p>
<h2><a class="header" href="#rust-log-analyzer" id="rust-log-analyzer">Rust Log Analyzer</a></h2>
<p>The <a href="https://github.com/rust-lang/rust-log-analyzer">Rust Log Analyzer</a>
analyzes CI build logs to extract error messages and posts them to the pull
request. It is run by <a href="https://github.com/TimNN">TimNN</a>.</p>
<h2><a class="header" href="#homu--bors" id="homu--bors">Homu / bors</a></h2>
<p><a href="https://github.com/rust-lang/homu/">Homu</a> is a bot which manages pull
requests. It is often referred to as &quot;bors&quot; due to the name of its
<a href="https://github.com/bors">bot user account</a>.
Approved pull requests are placed in
<a href="http://buildbot2.rust-lang.org/homu/queue/rust">a queue</a> from which tests are
run.</p>
<p>Documentation on homu commands can be found
<a href="http://buildbot2.rust-lang.org/homu/">here</a>.</p>
<p>Please contact <a href="https://github.com/alexcrichton">Alex Crichton</a> if something
goes wrong with the bot.</p>
<h2><a class="header" href="#rfcbot" id="rfcbot">rfcbot</a></h2>
<p><a href="https://github.com/rust-lang/rfcbot-rs">rfcbot</a> is a bot
(<a href="https://github.com/rfcbot">bot user account</a>) which helps manage async
decision making on issues and PRs (typically RFCs). Team members can view any
pending requests for review on <a href="https://rfcbot.rs/">the FCP dashboard</a>.</p>
<p>Documentation on rfcbot commands can be found
<a href="https://github.com/rust-lang/rfcbot-rs">in the rfcbot repository</a>.</p>
<h2><a class="header" href="#rustbot" id="rustbot">rustbot</a></h2>
<p><a href="https://github.com/rust-lang/triagebot">rustbot</a> is a bot (<a href="https://github.com/rustbot">bot user
account</a>) to assist with managing issues and PRs
to allow users to label and assign without GitHub permissions. See <a href="https://github.com/rust-lang/triagebot/wiki">the
wiki</a> for more information.</p>
<h2><a class="header" href="#dxr" id="dxr">DXR</a></h2>
<p><a href="https://dxr.mozilla.org/rust/source/">DXR</a> is a cross-referenced source index
for Rust, allowing the Rust source tree to be navigated and searched with ease.
It is generated by <a href="https://github.com/nrc/rust-dxr">rust-dxr</a></p>
<h2><a class="header" href="#perf--rust-timer" id="perf--rust-timer">perf / rust-timer</a></h2>
<p><a href="https://github.com/rust-lang-nursery/rustc-perf">perf</a> offers information
about the performance of <code>rustc</code> over time, and a bot for on-demand benchmarking.</p>
<p>It is split into a data <a href="https://github.com/rust-lang-nursery/rustc-perf/tree/master/collector">collector</a> and a <a href="https://github.com/rust-lang-nursery/rustc-perf/tree/master/site">web frontend + bot</a>. The raw performance
data is available <a href="https://github.com/rust-lang-nursery/rustc-timing">here</a>
and can be browsed on the <a href="https://perf.rust-lang.org">perf website</a>.</p>
<p>One-off performance runs can done by addressing the
<a href="https://github.com/rust-lang-nursery/rustc-perf/blob/master/site/src/github.rs">rust-timer bot</a>
(<a href="https://github.com/rust-timer">bot user account</a>). You can trigger the
necessary try-build and queue a perf run by saying</p>
<pre><code>@bors try @rust-timer queue
</code></pre>
<p>(Technically, the requirement is that the <code>queue</code> command finishes executing prior
to the try build completing successfully.)</p>
<h2><a class="header" href="#rust-playground" id="rust-playground">Rust Playground</a></h2>
<p><a href="https://github.com/integer32llc/rust-playground">Rust Playground</a> allows you
to experiment with Rust before you install it locally, or in any other case
where you might not have the compiler available. The Rust playground can be
accessed <a href="https://play.rust-lang.org">here</a>.</p>
<h2><a class="header" href="#crater" id="crater">Crater</a></h2>
<p><a href="https://github.com/rust-lang/crater">Crater</a> is a tool to run
experiments across the whole Rust ecosystem. Its primary purpose is to detect
regressions in the Rust compiler, and it does this by building large number of
crates, running their test suites and comparing the results between two
versions of the Rust compiler.</p>
<h2><a class="header" href="#docsrs-1" id="docsrs-1">docs.rs</a></h2>
<p><a href="https://docs.rs/">docs.rs</a> builds and serves the rustdoc documentation for
all crates on <a href="https://crates.io/">crates.io</a>. Issues may be filed on the <a href="https://github.com/rust-lang/docs.rs">docs.rs
repository</a>. See the #docs-rs channel on
Discord for discussion or urgent issues.</p>
<h2><a class="header" href="#toolstate" id="toolstate">Toolstate</a></h2>
<p>The state of tools included with Rust are tracked on the <a href="https://rust-lang-nursery.github.io/rust-toolstate/">toolstate
page</a>. When each PR is
merged via CI, the status of each tool is recorded in a JSON file and stored
in the <a href="https://github.com/rust-lang-nursery/rust-toolstate">toolstate repo</a>.
For further information, see the <a href="infra/toolstate.html">toolstate system documentation</a>.</p>
<h2><a class="header" href="#rustup-components-history" id="rustup-components-history">Rustup components history</a></h2>
<p>The <a href="https://rust-lang.github.io/rustup-components-history/">rustup components
history</a> tracks the
status of every rustup component for every platform over time. See <a href="https://github.com/rust-lang/rustup-components-history">the
repository</a> for more
information.</p>
<h2><a class="header" href="#ci-timing-tracker" id="ci-timing-tracker">CI Timing Tracker</a></h2>
<p>The <a href="https://alexcrichton.github.io/rust-ci-timing-tracker/">CI Timing
Tracker</a> tracks and
compares how long CI jobs take over time. It is run by <a href="https://github.com/alexcrichton/rust-ci-timing-tracker">Alex
Crichton</a>.</p>
<h1><a class="header" href="#team-maintenance" id="team-maintenance">Team Maintenance</a></h1>
<p>The roster of the Rust teams is always in flux. From time to time, new people
are added, but also people sometimes opt to into &quot;alumni status&quot;, meaning that
they are not currently an active part of the decision-making process.
Unfortunately, whenever a new person is added or someone goes into alumni
status, there are a number of disparate places that need to be updated. This
page aims to document that list. If you have any questions, or need someone with
more privileges to make a change for you, a good place to ask is #rust-infra (or
possibly #rust-internals).</p>
<h3><a class="header" href="#r-rights" id="r-rights">R+ rights</a></h3>
<p>If just giving r+ rights, the following places need to be modified:</p>
<ul>
<li>the <a href="https://github.com/alexcrichton/rust-central-station/blob/master/homu.toml.template">homu template on rust-central-station</a></li>
</ul>
<h3><a class="header" href="#full-team-membership" id="full-team-membership">Full team membership</a></h3>
<p>To make a full team member, the following places need to be modified:</p>
<ul>
<li>the <a href="https://github.com/rust-lang/rust-www/blob/master/_data/team.yml">team roster page</a></li>
<li>the <a href="https://github.com/orgs/rust-lang/teams">rust-lang/TEAM</a> and (in some cases)
<a href="https://github.com/orgs/rust-lang-nursery/teams">rust-lang-nursery/TEAM</a> teams on github must be updated</li>
<li>rfcbot has a separate list of people on a team that is maintained in a
configuration file
<ul>
<li><a href="https://github.com/anp/rfcbot-rs/commit/cd54241359cf65742ed5a0fba58ea5114de06f2b#diff-100115fcbdda685c37ba8f73727b0987">here is an example commit that was adding Centril to the lang
team</a></li>
</ul>
</li>
<li>the easydns service has an e-mail alias (<code>compiler-team@rust-lang.org</code>) that
needs to be updated
<ul>
<li>best here is to ask around in #rust-infra</li>
</ul>
</li>
<li>the
<a href="https://internals.rust-lang.org/admin/groups/custom">internals discussion board has per-team groups</a></li>
<li>the list of reviewers highfive uses is set in <a href="https://github.com/nrc/highfive/tree/master/highfive/configs">nrc/highfive</a>
<ul>
<li>the configs are set per-repo; some teams are listed in <code>rust.json</code>, whereas
those that span multiple repos are set in <code>_global.json</code></li>
</ul>
</li>
</ul>
<h3><a class="header" href="#team-member-departure" id="team-member-departure">Team member departure</a></h3>
<p>Remove the team member from any and all places:</p>
<ul>
<li><a href="https://github.com/nrc/highfive/tree/master/highfive/configs">highfive</a></li>
<li><a href="https://github.com/alexcrichton/rust-central-station/blob/master/homu.toml.template">reviewers list</a></li>
<li>rfcbot (<a href="https://github.com/anp/rfcbot-rs/commit/cd54241359cf65742ed5a0fba58ea5114de06f2b#diff-100115fcbdda685c37ba8f73727b0987">example</a>)</li>
<li>1password</li>
<li>The <a href="https://github.com/orgs/rust-lang/teams">GitHub team</a>, <a href="https://github.com/orgs/rust-lang-nursery/teams">GitHub nursery team</a></li>
<li>email aliases (as above)</li>
<li><a href="https://github.com/rust-lang/rust-www/blob/master/_data/team.yml">team roster page</a></li>
</ul>
<h1><a class="header" href="#handling-of-tools-embedded-in-the-rustc-repo-toolstate" id="handling-of-tools-embedded-in-the-rustc-repo-toolstate">Handling of tools embedded in the rustc repo (&quot;toolstate&quot;)</a></h1>
<p>The Rust repository contains several external tools and documents as git
submodules (e.g. clippy, rls, the <a href="https://doc.rust-lang.org/book/">Book</a>, the <a href="https://doc.rust-lang.org/reference/">Reference</a>). Many of those are
very tightly coupled to the compiler and depend on internal APIs that change all
the time, but they are not actually essential to get the compiler itself to
work. To make API changes less painful, these tools are allowed to &quot;break&quot;
temporarily. PRs can still land and nightlies still get released even when some
tools are broken. Their current status is managed by the
<a href="https://rust-lang-nursery.github.io/rust-toolstate/">toolstate system</a>. (Cargo is not subject to the toolstate system and
instead just has to always work.)</p>
<p>The three possible states of a &quot;tool&quot; (this includes the documentation managed
by the toolstate system, where we run doctests) are: <code>test-pass</code>, <code>test-fail</code>,
<code>build-fail</code>.</p>
<p>This page gives a rough overview how the toolstate system works, and what the
rules are for when which tools are (not) allowed to break.</p>
<h2><a class="header" href="#toolstate-rules" id="toolstate-rules">Toolstate Rules</a></h2>
<ul>
<li>
<p>For all tools, if a PR changes that tool (if it changes the commit used by the
submodule), the tool has to be in <code>test-pass</code> after this PR or else CI will
fail.</p>
</li>
<li>
<p>For all tools except for &quot;nightly only&quot; tools, the following extra rules are applied:</p>
<ul>
<li>If a PR lands on the <code>beta</code> or <code>stable</code> branch, the tool has to be <code>test-pass</code>.</li>
<li>If a PR lands on <code>master</code> in the week before the beta is cut, and that PR
regresses the tool (if it makes the state &quot;worse&quot;), CI fails. This is to
help make sure all these tools become <code>test-pass</code> so that a beta can be
cut. (See the <a href="infra/../index.html">Forge index</a> for when the next beta cutoff is
happening.)</li>
</ul>
<p>At the time of writing, the following tools are &quot;nightly only&quot;: rustc-dev-guide,
miri, embedded-book.</p>
</li>
</ul>
<h2><a class="header" href="#updating-the-toolstate-repository" id="updating-the-toolstate-repository">Updating the toolstate repository</a></h2>
<p>Updating the <a href="https://github.com/rust-lang-nursery/rust-toolstate/">toolstate repository</a> happens in two steps: when CI
runs on the <code>auto</code> branch (where bors moves a PR to test if it is good for
integration), the &quot;tool&quot; runners for the individual platforms (at the time of
writing, Linux and Windows) each submit a JSON file to the repository recording
the state of each tool for the commit they are testing. Later, if that commit
actually entirely passed CI and bors moves it to the <code>master</code> branch, the
&quot;current tool status&quot; in the toolstate repository is updated appropriately.</p>
<p>These scripts also automatically ping some people and create issues when tools
break.</p>
<p>For further details, see the comments in the involved files: <a href="https://github.com/rust-lang/rust/blob/master/src/ci/docker/x86_64-gnu-tools/checktools.sh"><code>checktools.sh</code></a>,
<a href="https://github.com/rust-lang/rust/blob/master/src/tools/publish_toolstate.py"><code>publish_toolstate.py</code></a> as well as the other files mentioned there.</p>
<h2><a class="header" href="#adding-a-tool" id="adding-a-tool">Adding a tool</a></h2>
<p>To add a new tool to be tracked, the following steps must be taken:</p>
<ol>
<li>Create a PR to rust-lang/rust that adds the submodule along with any
necessary build system / bootstrap updates. Be careful that the tests
properly support <code>./x.py --no-fail-fast</code> to avoid
<a href="https://github.com/rust-lang/rust/pull/63089">issues like this</a>.</li>
<li>Include changes to <a href="https://github.com/rust-lang/rust/blob/master/src/ci/docker/x86_64-gnu-tools/checktools.sh"><code>checktools.sh</code></a>:
<ul>
<li>Build the tool at the top. This is the step that actually generates the
JSON status for the tool. When <code>save-toolstates</code> is set in
<code>config.toml</code>, the rust build system will write a JSON file with the
status of each test.</li>
<li>Add the tool to <code>status_check</code> with whether it should be a beta blocker
or not.</li>
</ul>
</li>
<li>Update <a href="https://github.com/rust-lang/rust/blob/master/src/tools/publish_toolstate.py"><code>publish_toolstate.py</code></a> to add the tool. This includes a list of
people to ping if the tool is broken, and its source repo. (Note: At the
time of this writing, these users must have permissions to be assignable on
rust-lang/rust GitHub.)</li>
<li>Submit a PR to the <a href="https://github.com/rust-lang-nursery/rust-toolstate/">toolstate repository</a> to manually add the tool to the
<a href="https://github.com/rust-lang-nursery/rust-toolstate/blob/master/_data/latest.json"><code>latest.json</code></a> file.</li>
</ol>
<h1><a class="header" href="#policies-of-the-infrastructure-team" id="policies-of-the-infrastructure-team">Policies of the infrastructure team</a></h1>
<p>This section documents the policies created by the infrastructure team.</p>
<h1><a class="header" href="#policy-on-broken-nightlies" id="policy-on-broken-nightlies">Policy on broken nightlies</a></h1>
<p>Sometimes the nightlies released automatically by our CI ends up being broken
for some people or even everyone. This policy defines what the infra team
response will be in those cases.</p>
<h2><a class="header" href="#which-nightly-will-be-rolled-back" id="which-nightly-will-be-rolled-back">Which nightly will be rolled back</a></h2>
<p>A nightly can only be rolled back in the following cases:</p>
<ul>
<li>If it contains destructive code, for example if the included compiler deletes
all the users files.</li>
<li>If an infra problem caused it to be broken for a big percentage of users on
any Tier 1 platform. Issues affecting only lower tier platforms are not
worthy of a roll back, since we don't guarantee working builds for those
platforms anyway.</li>
</ul>
<p>A nightly will <strong>not</strong> be rolled back if it's broken by a critical compiler
bug: those bugs are supposed to be caught by CI, and nightly can have compiler
regressions anyway. There are no exceptions, even if big projects are broken
because of this.</p>
<h2><a class="header" href="#what-are-we-going-to-fix" id="what-are-we-going-to-fix">What are we going to fix</a></h2>
<p>Once any member of the infra team decides to roll back a nightly under this
policy we will roll back to the most recent working nightly. The roll back has
to fix installing the nightly with rustup:</p>
<pre><code>$ rustup toolchain install nightly
</code></pre>
<p>It's not required to roll back other things like the documentation or the
manually downloadable artifacts. After the nightly is rolled back we have to
announce the roll back on the <code>@rustlang</code> twitter account and on the status
page.</p>
<h1><a class="header" href="#infrastructure-guidelines" id="infrastructure-guidelines">Infrastructure guidelines</a></h1>
<p>This section contains the guidelines written by the infrastructure team for
other teams who want to use the project's infrastructure.</p>
<h1><a class="header" href="#rust-infrastructure-hosting-for-static-websites" id="rust-infrastructure-hosting-for-static-websites">Rust Infrastructure hosting for static websites</a></h1>
<p>The Rust Infrastructure team provides hosting for static websites available for
all Rust teams. This document explains the requirements a website needs to meet
and how to setup one.</p>
<h2><a class="header" href="#requirements-for-hosting-websites" id="requirements-for-hosting-websites">Requirements for hosting websites</a></h2>
<ul>
<li><strong>The website must be managed by a Rust team, or be officially affiliated with
the project.</strong><br />
The infrastructure team has finite resources and we can't offer hosting for
community projects.</li>
<li><strong>The website’s content and build tooling must be hosted on a GitHub
repository in either the <a href="https://github.com/rust-lang">rust-lang</a> or
<a href="https://github.com/rust-lang-nursery">rust-lang-nursery</a> organizations.</strong><br />
The infrastructure team must be able to rebuild the website content at any
time (for example if we need to switch hosting), and having it hosted on a
GitHub repository inside infra-managed organizations is the best way for us
to ensure that. Even though we'd prefer for all the repositories to be public
it's not a requirement.</li>
<li><strong>The website must be built and deployed with a CI service.</strong><br />
We have custom tooling built around hosting static websites on our infra, and
at the moment they work with Travis CI and Azure Pipelines. If you need
different CI services ask us in advance and we'll adapt the tooling to your
provider of choice.</li>
<li><strong>The website must reach an A+ grade on the
<a href="https://observatory.mozilla.org/">Mozilla Observatory</a>.</strong><br />
Browsers have multiple security features toggleable only through HTTP
response headers, and those features enhance users' privacy and prevent
exploits from working. An A+ grade on the Observatory indicates all the
important headers are correctly set.</li>
<li><strong>The website must be hosted on platforms vetted by the infra team.</strong><br />
We recommend either GitHub Pages or Amazon S3 (in the rust-lang AWS account)
as the hosting and CloudFront as the CDN, but if you need other platforms
that's good as long as we consider them secure and reliable.</li>
</ul>
<h2><a class="header" href="#static-websites-configuration" id="static-websites-configuration">Static websites configuration</a></h2>
<p>To avoid limitations of some hosting providers we have setup CloudFront to
enable additional, custom behaviors. These behaviors are configured through a
file named <code>website_config.json</code> at the root of the generated website content.</p>
<h3><a class="header" href="#adding-custom-headers" id="adding-custom-headers">Adding custom headers</a></h3>
<p>One of the requirements for having a static website hosted by the
infrastructure team is to reach an A+ grade on the <a href="https://observatory.mozilla.org/">Mozilla
Observatory</a>, and that requires custom
headers to be set. To setup custom headers you need to add an <code>headers</code> section
to <code>website_config.json</code>. This example content includes all the headers
needed to reach grade B on the Observatory (to reach grade A+ a Content
Security Policy is required):</p>
<pre><code class="language-json">{
    &quot;headers&quot;: {
        &quot;Strict-Transport-Security&quot;: &quot;max-age=63072000&quot;,
        &quot;X-Content-Type-Options&quot;: &quot;nosniff&quot;,
        &quot;X-Frame-Options&quot;: &quot;DENY&quot;,
        &quot;X-XSS-Protection&quot;: &quot;1; mode=block&quot;,
        &quot;Referrer-Policy&quot;: &quot;no-referrer, strict-origin-when-cross-origin&quot;
    }
}
</code></pre>
<h3><a class="header" href="#fixing-github-pages-redirects" id="fixing-github-pages-redirects">Fixing GitHub Pages redirects</a></h3>
<p>GitHub Pages behaves weirdly when it sits behind CloudFront and it needs to
issue redirects: since it doesn't know the real domain name it will use
<code>http://org-name.github.io/repo-name</code> as the base of the redirect instead of
the correct protocol and domain. To prevent this behavior the
<code>github_pages_origin</code> key needs to be added to <code>website_config.json</code>
with the origin base url as the value (excluding the protocol):</p>
<pre><code class="language-json">{
    &quot;github_pages_origin&quot;: &quot;org-name.github.io/repo-name&quot;
}
</code></pre>
<h2><a class="header" href="#deployment-guide" id="deployment-guide">Deployment guide</a></h2>
<p>These deployments steps are meant to be executed by a member of the
infrastructure team since they require access to our AWS account.</p>
<h3><a class="header" href="#configuring-aws" id="configuring-aws">Configuring AWS</a></h3>
<p>Create a CloudFront web distribution and set the following properties:</p>
<ul>
<li><strong>Origin Domain Name:</strong> rust-lang.github.io/repo-name</li>
<li><strong>Origin Protocol Policy:</strong> HTTPS Only</li>
<li><strong>Viewer Protocol Policy:</strong> Redirect HTTP to HTTPS</li>
<li><strong>Lambda Function Association:</strong>
<ul>
<li><strong>Viewer Response:</strong> arn:aws:lambda:us-east-1:890664054962:function:static-websites:4</li>
</ul>
</li>
<li><strong>Alternate Domain Names:</strong> your-subdomain-name.rust-lang.org</li>
<li><strong>SSL Certificate:</strong> Custom SSL Certificate
<ul>
<li>You will need to request the certificate for that subdomain name through
ACM (please use the DNS challenge to validate the certificate)</li>
</ul>
</li>
<li><strong>Comment:</strong> your-subdomain-name.rust-lang.org</li>
</ul>
<p>Wait until the distribution is propagated and take note of its
<code>.cloudfront.net</code> domain name.</p>
<p>Head over to the domain’s Route 53 hosted zone and create a new record set:</p>
<ul>
<li><strong>Name:</strong> your-subdomain-name</li>
<li><strong>Type:</strong> CNAME</li>
<li><strong>Value:</strong> the <code>.cloudfront.net</code> domain name you saw earlier</li>
</ul>
<p>Create an AWS IAM user to allow the CI provider used to deploy website changes
to perform whitelisted automatic actions. Use <code>ci--ORG-NAME--REPO-NAME</code> (for
example <code>ci--rust-lang--rust</code>) as the user name, allow programmatic access to
it and add it to the <code>ci-static-websites</code> IAM group. Then take note of the
access key id and the secret access key since you’ll need those later.</p>
<h3><a class="header" href="#adding-deploy-keys" id="adding-deploy-keys">Adding deploy keys</a></h3>
<p>To deploy websites we don’t use GitHub tokens (since they don’t have granular
access scoping) but a deploy key with write access unique for each repository.
To setup the deploy key you need to be an administrator on the repository,
clone the <a href="https://github.com/rust-lang/simpleinfra">simpleinfra</a> repository
and run this command:</p>
<pre><code>$ cargo run --bin setup-deploy-keys rust-lang/repo-name
</code></pre>
<p>The command requires the <code>GITHUB_TOKEN</code> (<a href="https://github.com/settings/tokens">you can generate one
here</a>) and the <code>TRAVIS_TOKEN</code> (<a href="https://travis-ci.com/account/preferences">you can see
yours here</a>) to be present. It will
generate a brand new key, upload it to GitHub and configure Travis CI to use
it if the repo is active there.</p>
<h3><a class="header" href="#configuring-travis-ci" id="configuring-travis-ci">Configuring Travis CI</a></h3>
<p>To actually deploy the website, this snippet needs to be added to your
<code>.travis.yml</code> (please replace the contents of <code>RUSTINFRA_DEPLOY_DIR</code> and
<code>RUSTINFRA_CLOUDFRONT_DISTRIBUTION</code>):</p>
<pre><code class="language-yaml">env:
  RUSTINFRA_DEPLOY_DIR: path/to/be/deployed
  RUSTINFRA_CLOUDFRONT_DISTRIBUTION: ABCDEFGHIJKLMN
import:
  - rust-lang/simpleinfra:travis-configs/static-websites.yml
</code></pre>
<p>You will also need to set the contents of the <code>AWS_ACCESS_KEY_ID</code> and
<code>AWS_SECRET_ACCESS_KEY</code> environment variables on the Travis CI web UI with the
credentials of the IAM user you created earlier. The secret access key <strong>must</strong>
be hidden from the build log, while the access key id should be publicly
visible.</p>
<h3><a class="header" href="#configuring-azure-pipelines" id="configuring-azure-pipelines">Configuring Azure Pipelines</a></h3>
<p>To actually deploy the website, this snippet needs to be added at the top of
your pipeline's YAML file:</p>
<pre><code class="language-yaml">resources:
  repositories:
    - repository: rustinfra
      type: github
      name: rust-lang/simpleinfra
      endpoint: rust-lang
</code></pre>
<p>Then you can add this steps when you want to execute the deploy (please replace
the contents of <code>deploy_dir</code> and <code>cloudfront_distribution</code>):</p>
<pre><code class="language-yaml">- template: azure-configs/static-websites.yml@rustinfra
  parameters:
    deploy_dir: path/to/output
    # Optional, only needed if GitHub pages is behind CloudFront
    cloudfront_distribution: AAAAAAAAAAAAAA
</code></pre>
<p>You will also need to set the following environment variables in the pipeline:</p>
<ul>
<li><code>GITHUB_DEPLOY_KEY</code>: value outputted when adding the deploy key earlier
(<strong>secret</strong>)</li>
<li><code>AWS_ACCESS_KEY_ID</code>: access key ID of the IAM user allowed to invalidate
CloudFront (public)</li>
<li><code>AWS_SECRET_ACCESS_KEY</code>: access key of the IAM user allowed to invalidate
CloudFront (<strong>secret</strong>)</li>
</ul>
<h1><a class="header" href="#infrastructure-team-documentation" id="infrastructure-team-documentation">Infrastructure team documentation</a></h1>
<p>This section contains the documentation about the services hosted and managed
by the Rust Infrastructure Team. Most of the linked resources and instructions
are only available to infra team members though.</p>
<h1><a class="header" href="#aws-access-for-team-members" id="aws-access-for-team-members">AWS access for team members</a></h1>
<p>Selected members of the Rust Team have access to the AWS account of the
project. This includes both members of the Infrastructure Team and members of
teams with services hosted on AWS.</p>
<p>This document explains how to access our AWS account, and how to interact with
it. If you're a infrastructure team member and you need to setup or revoke
access for another person, read the <a href="infra/docs/./aws-access-management.html">&quot;AWS access
management&quot;</a> page.</p>
<h2><a class="header" href="#setting-up-your-user-after-receiving-the-credentials" id="setting-up-your-user-after-receiving-the-credentials">Setting up your user after receiving the credentials</a></h2>
<p>The first thing you need to do after receiving your credentials is changing the
password and enabling 2-factor authentication: until you do these things,
access will be restricted automatically to just the permissions needed to
configure 2FA.</p>
<p><a href="https://rust-lang.signin.aws.amazon.com/console">Sign into the console</a> with the temporary credentials given to
you by the infrastructure team member who created the user. You'll be prompted
to change the temporary password: change it and log in again. Then, go to the
&quot;My Security Credentials&quot; page, located in the dropdown at the top:</p>
<p><img src="infra/docs/aws-security-credentials.png" alt="Location of the &quot;My Security Credentials&quot; page" /></p>
<p>Scroll down and click the &quot;Assign MFA device&quot; button. Choose &quot;Virtual MFA
device&quot; (which is classic TOTP) and configure it with your authenticator app.
Once you're done, log out of the console and log in again to gain access to the
resources you're authorized to use.</p>
<p>Do not choose &quot;U2F security key&quot;, even if you own one: due to limitations of
the AWS API, that would prevent you from using the CLI, restricting your access
to the console alone.</p>
<h2><a class="header" href="#using-the-aws-console" id="using-the-aws-console">Using the AWS console</a></h2>
<p>The AWS console provides a visual interface to most of the resources in our AWS
account.</p>
<center>
<p><a href="https://rust-lang.signin.aws.amazon.com/console">Sign into the console.</a></p>
</center>
<h2><a class="header" href="#using-the-aws-cli" id="using-the-aws-cli">Using the AWS CLI</a></h2>
<p>The <a href="https://aws.amazon.com/cli/">AWS CLI</a> allows you to interact with our AWS
account from a terminal or a script. To set it up the first time, follow
Amazon's documentation to <a href="https://docs.aws.amazon.com/cli/latest/userguide/install-cliv1.html">install it</a> and <a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-chap-configure.html">configure your
credentials</a>. The CLI doesn't use your console password to
authenticate: you'll need to create an access key from the &quot;My Security
Credentials&quot; page on the console.</p>
<h3><a class="header" href="#2-factor-authentication" id="2-factor-authentication">2-factor authentication</a></h3>
<p>To ensure the security of our AWS account, 2-factor authentication is required
to interact with the CLI. The Infrastructure Team developed <a href="https://github.com/rust-lang/simpleinfra/blob/master/aws-creds.py">a
script</a> that eases the authentication process by creating a
temporary session validated with 2FA for the current shell. The session expires
in 12 hours, and it's valid for an unlimited number of invocations.</p>
<p>To use the script, clone the <a href="https://github.com/rust-lang/simpleinfra">rust-lang/simpleinfra</a> repository in
a directory. Then, every time you need to use the AWS CLI run this command in
your shell:</p>
<pre><code>eval $(~/PATH/TO/SIMPLEINFRA/aws-creds.py)
</code></pre>
<p>That command will prompt you for your 2FA code, and it will set a few
environment variables in the current shell with the temporary credentials.
You'll need to run the command again after 12 hours, or if you want the
credentials on another shell.</p>
<h3><a class="header" href="#plaintext-credentials" id="plaintext-credentials">Plaintext credentials</a></h3>
<p>By default, AWS CLI stores your credentials (including the secret key) in the
<code>~/.aws/credentials</code> file, without any kind of encryption. While the danger of
having plaintext credentials stored in your home directory is partially
mitigated by the 2FA requirement, it'd be best not to store them anyway.</p>
<p>If you use a password manager with a CLI interface, an approach you can take to
avoid the problem is to store your credentials in the password manager, and
configure the CLI to <a href="https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sourcing-external.html">call your password manager</a> to fetch
the credentials when needed.</p>
<h1><a class="header" href="#aws-access-management" id="aws-access-management">AWS access management</a></h1>
<p>This document explains how to setup and manage AWS access for Rust team
members. If you're a team member and you need to access AWS with your existing
credentials, or you have received your credentials for the first time, check
out the <a href="infra/docs/./aws-access.html">&quot;AWS access for team members&quot;</a> page.</p>
<h2><a class="header" href="#granting-access" id="granting-access">Granting access</a></h2>
<p>To grant access to a person, go to <a href="https://github.com/rust-lang/simpleinfra/blob/master/terraform/team-members-access/_users.tf"><code>team-members-access/_users.tf</code></a> in the
Terraform configuration and add the new user to it, specifying which teams they
should be a member of. The user will be created as soon as you apply the
configuration.</p>
<p>By default, there will be no credentials attached to the user. To allow the
user to log in, go to the <a href="https://console.aws.amazon.com/iam/home#/users">IAM console</a>, open the security
credentials page of the user you just created, and enable a console password.
Let AWS generate a random one, and require the password to be changed on first
login.</p>
<p>Finally communicate to the user that they can join with the generated password,
and to follow the <a href="infra/docs/./aws-access.html">&quot;AWS access for team members&quot;</a> page to
learn how to enable 2FA and gain access to their account.</p>
<h2><a class="header" href="#revoking-access" id="revoking-access">Revoking access</a></h2>
<p>To revoke access from a person, log into the <a href="https://console.aws.amazon.com/iam/home#/users">IAM console</a>,
open the security credentials page of the user you want to delete, and:</p>
<ul>
<li>Disable console access by clicking &quot;Manage&quot; on the console password</li>
<li>Disable 2-factor authentication by clicking &quot;Manage&quot; on the assigned MFA
device</li>
<li>Remove all the access keys, including inactive ones, by clicking the &quot;x&quot;.</li>
</ul>
<p>Once all the access was removed from the console, go to
<a href="https://github.com/rust-lang/simpleinfra/blob/master/terraform/team-members-access/_users.tf"><code>team-members-access/_users.tf</code></a> in the Terraform configuration, remove
the user and apply the configuration.</p>
<h1><a class="header" href="#bastion-server" id="bastion-server">Bastion server</a></h1>
<ul>
<li>FQDN: <code>bastion.infra.rust-lang.org</code></li>
<li><a href="https://github.com/rust-lang/simpleinfra/blob/master/ansible/playbooks/bastion.yml">Ansible playbook</a> to deploy this server.</li>
<li><a href="https://github.com/rust-lang/simpleinfra/tree/master/terraform/services/bastion">Terraform configuration</a> to create AWS resources.</li>
<li><a href="https://grafana.rust-lang.org/d/rpXrFfKWz/instance-metrics?orgId=1&amp;var-instance=bastion.infra.rust-lang.org:9100">Instance metrics</a> (only available to infra team members).</li>
</ul>
<h2><a class="header" href="#logging-into-servers-through-the-bastion" id="logging-into-servers-through-the-bastion">Logging into servers through the bastion</a></h2>
<p>To improve the security of our infrastructure it's not possible to connect
directly to a production server with SSH. Instead, all connections must come
from a small server called the &quot;bastion&quot;, which only allows connections from a
few whitelisted networks and logs any connection attempt.</p>
<p>To log into a server through the bastion you can use SSH's <code>-J</code> flag:</p>
<pre><code>ssh -J bastion.infra.rust-lang.org servername.infra.rust-lang.org
</code></pre>
<p>It's also possible to configure SSH to always jump through the bastion when
connecting to a host. Add this snippet to your SSH configuration file (usually
located in <code>~/.ssh/config</code>):</p>
<pre><code>Host servername.infra.rust-lang.org
    ProxyJump bastion.infra.rust-lang.org
</code></pre>
<p>Please remember the bastion server only allows connections from a small list of
IP addresses. Infra team members with AWS access can change the whitelist, but
it's good practice to either have your own bastion server or a static IP
address.</p>
<p>The SSH keys authorized to log into each account are stored in the <a href="https://github.com/rust-lang/simpleinfra/tree/master/ansible/roles/common/files/ssh-keys">simpleinfra
repository</a>. Additionally, people with sensitive 1password access can use
the master key stored in the vault to log into every account, provided their
connection comes from any whitelisted IP.</p>
<h2><a class="header" href="#common-maintenance-procedures-1" id="common-maintenance-procedures-1">Common maintenance procedures</a></h2>
<h3><a class="header" href="#adding-a-new-user-to-the-bastion-server" id="adding-a-new-user-to-the-bastion-server">Adding a new user to the bastion server</a></h3>
<p>To add a new user to the bastion you need to add its key to a file named
<code>&lt;username&gt;.pub</code> in <a href="https://github.com/rust-lang/simpleinfra/tree/master/ansible/roles/common/files/ssh-keys"><code>ansible/roles/common/files/ssh-keys</code></a>, and change
the <a href="https://github.com/rust-lang/simpleinfra/blob/master/ansible/playbooks/bastion.yml">Ansible playbook</a> adding the user to the list of unprivileged
users. Please leave a comment clarifying which servers the user will have
access to.</p>
<p>Once that's done <a href="https://github.com/rust-lang/simpleinfra/blob/master/ansible/README.md#executing-a-playbook">apply the playbook</a> and <a href="infra/docs/bastion.html#adding-a-whitelisted-ip">add a new whitelisted
IP address</a>.</p>
<h3><a class="header" href="#adding-a-whitelisted-ip" id="adding-a-whitelisted-ip">Adding a whitelisted IP</a></h3>
<p>Due to privacy reasons, all the static IP addresses of team members with access
to the bastion are stored on <a href="https://docs.aws.amazon.com/systems-manager/latest/userguide/systems-manager-parameter-store.html">AWS SSM Parameter Store</a> instead of public
git repositories. To add an IP address you can run this command (taking care of
replacing <code>USERNAME</code> and <code>IP_ADDRESS</code> with the proper values):</p>
<pre><code>aws ssm put-parameter --type String --name &quot;/prod/bastion/allowed-ips/USERNAME&quot; --value &quot;IP_ADDRESS/32&quot;
</code></pre>
<p>You'll also need to add the username to the list in
<a href="https://github.com/rust-lang/simpleinfra/blob/master/terraform/services.tf"><code>terraform/services.tf</code></a> (key <code>allowed_users</code> in the
<code>service_bastion</code> module). Once you made all the needed changes you wanted you
need to <a href="https://github.com/rust-lang/simpleinfra/tree/master/terraform#applying-the-configuration">apply the Terraform configuration</a>.</p>
<h3><a class="header" href="#updating-a-whitelisted-ip" id="updating-a-whitelisted-ip">Updating a whitelisted IP</a></h3>
<p>Due to privacy reasons, all the static IP addresses of team members with access
to the bastion are stored on <a href="https://docs.aws.amazon.com/systems-manager/latest/userguide/systems-manager-parameter-store.html">AWS SSM Parameter Store</a> instead of public
git repositories. To update an IP address you can run this command (taking care
of replacing <code>USERNAME</code> and <code>IP_ADDRESS</code> with the proper values):</p>
<pre><code>aws ssm put-parameter --overwrite --type String --name &quot;/prod/bastion/allowed-ips/USERNAME&quot; --value &quot;IP_ADDRESS/32&quot;
</code></pre>
<p>Once you made all the needed changes you wanted you need to <a href="https://github.com/rust-lang/simpleinfra/tree/master/terraform#applying-the-configuration">apply the
Terraform configuration</a>.</p>
<h3><a class="header" href="#removing-a-whitelisted-ip" id="removing-a-whitelisted-ip">Removing a whitelisted IP</a></h3>
<p>Due to privacy reasons, all the static IP addresses of team members with access
to the bastion are stored on <a href="https://docs.aws.amazon.com/systems-manager/latest/userguide/systems-manager-parameter-store.html">AWS SSM Parameter Store</a> instead of public
git repositories. To remove an IP address you can run this command (taking care
of replacing <code>USERNAME</code> with the proper value):</p>
<pre><code>aws ssm delete-parameter --name &quot;/prod/bastion/allowed-ips/USERNAME&quot;
</code></pre>
<p>You'll also need to remove the username from the list in
<a href="https://github.com/rust-lang/simpleinfra/blob/master/terraform/services.tf"><code>terraform/services.tf</code></a> (key <code>allowed_users</code> in the
<code>service_bastion</code> module). Once you made all the needed changes you wanted you
need to <a href="https://github.com/rust-lang/simpleinfra/tree/master/terraform#applying-the-configuration">apply the Terraform configuration</a>.</p>
<h1><a class="header" href="#crater-agents" id="crater-agents">Crater agents</a></h1>
<ul>
<li>Source code: <a href="https://github.com/rust-lang/docs.rs">rust-lang/crater</a></li>
<li>Hosted on:
<ul>
<li><code>crater-aws-1.infra.rust-lang.org</code> (behind the bastion -- <a href="https://github.com/rust-lang/infra-team/blob/master/docs/hosts/bastion.md#logging-into-servers-through-the-bastion">how to connect</a>)</li>
<li><code>crater-azure-1.infra.rust-lang.org</code> (behind the bastion -- <a href="https://github.com/rust-lang/infra-team/blob/master/docs/hosts/bastion.md#logging-into-servers-through-the-bastion">how to connect</a>)</li>
</ul>
</li>
<li>Maintainers: <a href="https://github.com/pietroalbini">pietroalbini</a></li>
<li><a href="https://grafana.rust-lang.org/d/WLeJySTZz/crater?orgId=1">Application metrics</a> (only available to infra team members).</li>
<li>Instance metrics (only available to infra team members):
<ul>
<li><a href="https://grafana.rust-lang.org/d/rpXrFfKWz/instance-metrics?orgId=1&amp;var-instance=crater-aws-1.infra.rust-lang.org:9100"><code>crater-aws-1.infra.rust-lang.org</code></a></li>
<li><a href="https://grafana.rust-lang.org/d/rpXrFfKWz/instance-metrics?orgId=1&amp;var-instance=crater-azure-1.infra.rust-lang.org:9100"><code>crater-azure-1.infra.rust-lang.org</code></a></li>
</ul>
</li>
</ul>
<h2><a class="header" href="#service-configuration" id="service-configuration">Service configuration</a></h2>
<p>Crater agents are servers with our standard configuration running a Docker
container hosting the agent. A timer checks for updates every 5 minutes, and if
a newer Docker image is present the container will automatically be updated and
restarted. This service is <a href="https://github.com/rust-lang/simpleinfra/blob/master/ansible/playbooks/crater.yml">managed with Ansible</a>.</p>
<h2><a class="header" href="#common-maintenance-procedures-2" id="common-maintenance-procedures-2">Common maintenance procedures</a></h2>
<h3><a class="header" href="#starting-and-stopping-the-agent" id="starting-and-stopping-the-agent">Starting and stopping the agent</a></h3>
<p>The agent is managed by the <code>container-crater-agent.service</code> systemd unit. That
means it's possible to start, stop and restart it with the usual systemctl
commands:</p>
<pre><code>systemctl stop container-crater-agent.service
systemctl start container-crater-agent.service
systemctl restart container-crater-agent.service
</code></pre>
<h3><a class="header" href="#inspecting-the-logs-of-the-agent" id="inspecting-the-logs-of-the-agent">Inspecting the logs of the agent</a></h3>
<p>Logs of the agents are forwarded and collected by journald. To see them you can
use journalctl:</p>
<pre><code>journalctl -u container-crater-agent.service
</code></pre>
<h3><a class="header" href="#manually-updating-the-container-image" id="manually-updating-the-container-image">Manually updating the container image</a></h3>
<p>The container is updated automatically every 5 minutes (provided a newer image
is present). If you need to update them sooner you can manually start the
updater service by running this command:</p>
<pre><code>systemctl start docker-images-update.service
</code></pre>
<h1><a class="header" href="#discord-moderation-bot" id="discord-moderation-bot">Discord moderation bot</a></h1>
<ul>
<li>Source code: <a href="https://github.com/rust-lang/discord-mods-bot">rust-lang/discord-mods-bot</a></li>
<li>Hosted on: <a href="infra/docs/ecs-services.html"><code>rust-ecs-prod</code> ECS cluster</a></li>
<li>Maintainers: <a href="https://github.com/technetos">technetos</a></li>
</ul>
<p>The bot is hosted on the <code>rust-ecs-prod</code> ECS cluster, on the project's AWS
account, with the <code>discord-mods-bot</code> service name. Its container image is
stored in a ECR repository with the same name, and its data is stored in the
<code>shared</code> RDS PostgreSQL instance.</p>
<p>Automatic deploys are setup from the <a href="https://github.com/rust-lang/discord-mods-bot">rust-lang/discord-mods-bot</a> GitHub
repository.</p>
<p>The Discord bot account is <a href="https://discordapp.com/developers/applications/615806512790503424"><code>rustbot#4299</code></a>. <a href="https://github.com/pietroalbini">pietroalbini</a>,
<a href="https://github.com/Mark-Simulacrum">Mark-Simulacrum</a>, <a href="https://github.com/alexcrichton">alexcrichton</a> and <a href="https://github.com/aidanhs">aidanhs</a> have access to the developer
portal.</p>
<h2><a class="header" href="#common-maintenance-procedures-3" id="common-maintenance-procedures-3">Common maintenance procedures</a></h2>
<p><a href="infra/docs/ecs-services.html">Instructions on how to manage ECS services are available here.</a></p>
<h1><a class="header" href="#domain-names-and-dns" id="domain-names-and-dns">Domain names and DNS</a></h1>
<p>All the DNS records of the domains owned by the Rust Infrastructure team are
hosted on <a href="https://aws.amazon.com/route53/">AWS Route 53</a>, and can be tweaked by members of the team. This
document contains instructions for them on how to make changes.</p>
<ul>
<li><a href="infra/docs/dns.html#changing-dns-records-of-a-domain-managed-with-terraform">Changing DNS records of a domain managed with Terraform</a></li>
<li><a href="infra/docs/dns.html#managing-dns-for-a-new-domain-with-terraform">Managing DNS for a new domain with Terraform</a></li>
<li><a href="infra/docs/dns.html#adding-subdomain-redirects">Adding subdomain redirects</a></li>
</ul>
<h2><a class="header" href="#changing-dns-records-of-a-domain-managed-with-terraform" id="changing-dns-records-of-a-domain-managed-with-terraform">Changing DNS records of a domain managed with Terraform</a></h2>
<blockquote>
<p><strong>Warning:</strong> not all domain names are yet managed with Terraform. In the
<a href="https://console.aws.amazon.com/route53/home#hosted-zones:">console</a>, if a zone's comment doesn't start with <code>[terraform]</code>
you'll need to make changes manually from the UI. Work is underway to migrate
every domain to Terraform though.</p>
</blockquote>
<blockquote>
<p><strong>Warning:</strong> <a href="https://github.com/rust-lang/simpleinfra/tree/master/terraform/services/dns/"><code>terraform/services/dns</code></a> only contains the definition
of DNS records pointing to resources managed outside of Terraform. When
Terraform manages a resource it will automatically add the required records
on its own. See the service's documentation to learn where its Terraform
configuration lives.</p>
</blockquote>
<p>DNS records are managed in the <a href="https://github.com/rust-lang/simpleinfra/tree/master/terraform/services/dns/"><code>terraform/services/dns</code></a> directory of
our Terraform configuration. A file named after the domain name, ending in
<code>.tf</code>, exists for each managed domain, and it contains some basic information
plus its records.</p>
<p>The configuration supports adding A, CNAME, MX and TXT records. Inside the
module definition contained in the domain's file, each record type has its own
map: the map keys are the names of the records, while the values are a list of
record values.</p>
<p>For example, to add a <code>pages.rust-lang.org</code> CNAME pointing to
<code>rust-lang.github.io</code> you'll need to add this to
<code>terraform/services/dns/rust-lang.org</code>:</p>
<pre><code class="language-terraform">module &quot;rust_lang_org&quot; {
  # ...

  CNAME = {
    &quot;pages.rust-lang.org.&quot; = [&quot;rust-lang.github.io&quot;],
    # ...
  }
}
</code></pre>
<p>Once you made all the changes you can apply them with:</p>
<pre><code>terraform apply
</code></pre>
<h2><a class="header" href="#managing-dns-for-a-new-domain-with-terraform" id="managing-dns-for-a-new-domain-with-terraform">Managing DNS for a new domain with Terraform</a></h2>
<p>Setting up Terraform to manage the DNS records of a new domain name involves a
few steps. First of all you need to decide the identifier used inside
Terraform for that domain. By convention, the identifier is the domain name
itself with <code>.</code> and <code>-</code> replaced with <code>_</code>. For example <code>rust-lang.org</code> becomes
<code>rust_lang_org</code>.</p>
<p>Then you can create a file in <a href="https://github.com/rust-lang/simpleinfra/tree/master/terraform/services/dns/"><code>terraform/services/dns</code></a> named after
the domain name, ending in <code>.tf</code>, with this content (take care of replacing the
placeholders):</p>
<pre><code class="language-terraform">module &quot;&lt;IDENTIFIER&gt;&quot; {
  source = &quot;./domain&quot;

  domain = &quot;&lt;DOMAIN-NAME&gt;&quot;
  comment = &quot;&lt;COMMENT-FOR-THE-DOMAIN&gt;&quot;
  ttl = 300
}
</code></pre>
<p>Finally you need to output the ID of the Route53 zone, allowing other parts of
our Terraform configuration to add records. Add this snippet to
<a href="https://github.com/rust-lang/simpleinfra/blob/master/terraform/services/dns/outputs.tf"><code>terraform/services/dns/outputs.tf</code></a>:</p>
<pre><code class="language-terraform"># ...

output &quot;zone_&lt;IDENTIFIER&gt;&quot; {
  value = module.&lt;IDENTIFIER&gt;.zone_id
}
</code></pre>
<p>Once you're done you can apply the changes with:</p>
<pre><code>terraform init
terraform apply
</code></pre>
<h2><a class="header" href="#adding-subdomain-redirects" id="adding-subdomain-redirects">Adding subdomain redirects</a></h2>
<p>Our Terraform configuration supports creating redirects from an arbitrary
number of subdomains we control to an URL. Redirects are created with these
pieces of infrastructure:</p>
<ul>
<li>
<p>A S3 bucket for each set of redirects, named <code>rust-http-redirect-&lt;HASH&gt;</code>. The
bucket has website hosting enabled, configured to redirect all the incoming
requests to the chosen URL. This allows implementing redirects without an
underlying server.</p>
</li>
<li>
<p>An ACM certificate (plus the DNS records to validate it) for each set of
redirects, with all the sources as alternate names. This is used to enable
HTTPS redirects.</p>
</li>
<li>
<p>A CloudFront distribution for each set of redirects to support HTTPS
requests, using the previously generated ACM certificate and forwarding
requests to the S3 bucket.</p>
</li>
<li>
<p>Route53 records for each redirect in the related zones: CNAMEs
for subdomains, and ALIASes for apex domains.</p>
</li>
</ul>
<p>All the redirects are defined in <a href="https://github.com/rust-lang/simpleinfra/blob/master/terraform/redirects.tf"><code>terraform/redirects.tf</code></a>,
with a module for each destination URL. Either create a new module if you need
to redirect to a new URL, or add a new subdomain to an existing module. See an
example module here (take care of replacing the placeholders):</p>
<pre><code class="language-terraform">module &quot;redirect_&lt;IDENTIFIER&gt;&quot; {
  source = &quot;./modules/subdomain-redirect&quot;
  providers = {
    aws       = &quot;aws&quot;
    aws.east1 = &quot;aws.east1&quot;
  }

  to = &quot;&lt;DESTINATION-URL&gt;&quot;
  from = {
    &quot;&lt;SUBDOMAIN-1&gt;&quot; = module.dns.zone_&lt;DOMAIN-1-IDENTIFIER&gt;,
    &quot;&lt;SUBDOMAIN-2&gt;&quot; = module.dns.zone_&lt;DOMAIN-2-IDENTIFIER&gt;,
  }
}
</code></pre>
<p>Once you made all the changes you can apply the configuration with:</p>
<pre><code>terraform init
terraform apply
</code></pre>
<p>Note that each change is going to take around 15 minutes to deploy, as
CloudFront distribution changes are really slow to propagate. Also, it's normal
to see a bunch of resources being recreated when a domain is added or removed
from an existing redirect, as the ACM certificate will need to be regenerated.</p>
<h1><a class="header" href="#docsrs-2" id="docsrs-2">docs.rs</a></h1>
<ul>
<li>Source code: <a href="https://github.com/rust-lang/docs.rs">rust-lang/docs.rs</a></li>
<li>Hosted on: <code>docsrs.infra.rust-lang.org</code> (behind the bastion -- <a href="https://github.com/rust-lang/infra-team/blob/master/docs/hosts/bastion.md#logging-into-servers-through-the-bastion">how to connect</a>)</li>
<li>Maintainers: <a href="https://github.com/jyn514">Joshua Nelson</a>, <a href="https://github.com/pietroalbini">Pietro Albini</a></li>
<li><a href="https://grafana.rust-lang.org/d/rpXrFfKWz/instance-metrics?orgId=1&amp;var-instance=docsrs.infra.rust-lang.org:9100">Instance metrics</a> (only available to infra team members).</li>
<li><a href="https://grafana.rust-lang.org/d/-wWFg2cZz/docs-rs?orgId=1">Application metrics</a> (only available to infra team members).</li>
<li><a href="infra/docs/../../docs-rs/maintenance.html">Common maintenance procedures</a></li>
</ul>
<h1><a class="header" href="#ecs-services-management" id="ecs-services-management">ECS services management</a></h1>
<p>Some applications running on the project's infrastructure are hosted in ECS
clusters on our AWS account. This document explains the common maintenance
procedures one should follow when operating them. Most of the actions explained
here <a href="infra/docs/aws-access.html">require AWS access</a>.</p>
<blockquote>
<p><strong>Note:</strong> our ECS cluster is located in the Northern California
(<code>us-west-1</code>) AWS region. Make sure it's the selected region when interacting
with the AWS console.</p>
</blockquote>
<h2><a class="header" href="#inspecting-the-logs" id="inspecting-the-logs">Inspecting the logs</a></h2>
<p>Logs for applications hosted on ECS are stored in CloudWatch Logs, and can
be inspected in the AWS Console. <a href="infra/docs/aws-access.html#using-the-aws-console">Open the console</a>, go to
CloudWatch Logs and select the log group called <code>/ecs/&lt;service-name&gt;</code>. There
are two ways to inspect the logs:</p>
<ul>
<li>
<p>If you need to look at the application as a whole, you can get an aggregated
view by clicking the &quot;View all log events&quot; button (or, on the classic
interface, &quot;Search Log Group&quot;).</p>
</li>
<li>
<p>If you need to debug a specific instance of a container, separate log streams
for each running task are available. The streams are named after the
container name and the task ID.</p>
</li>
</ul>
<p>Logs are periodically purged (retention varies based on the specific
application).</p>
<h2><a class="header" href="#restarting-an-application" id="restarting-an-application">Restarting an application</a></h2>
<p>To restart an application, you can force a new deployment without actually
pushing any new code beforehand. To do so, run this command:</p>
<pre><code>aws ecs update-service --cluster rust-ecs-prod --service &lt;service-name&gt; --force-new-deployment
</code></pre>
<h2><a class="header" href="#deploying-application-changes" id="deploying-application-changes">Deploying application changes</a></h2>
<p>Each application stores its own Docker container in a <a href="https://aws.amazon.com/ecr/">ECR repository</a> in
our AWS account. You can deploy changes both manually and automatically (with
GitHub Actions).</p>
<p>For production applications it's recommended to setup automatic deployment.</p>
<h3><a class="header" href="#manual-deployments" id="manual-deployments">Manual deployments</a></h3>
<p>To manually deploy a local build you first need it to tag your built image
with its ECR name:</p>
<pre><code>docker tag &lt;image-tag&gt; 890664054962.dkr.ecr.us-west-1.amazonaws.com/&lt;repository-name&gt;:latest
</code></pre>
<p>Then you can authenticate with ECR and push it:</p>
<pre><code>$(aws ecr get-login --no-include-email --region us-west-1)
docker push 890664054962.dkr.ecr.us-west-1.amazonaws.com/&lt;repository-name&gt;:latest
</code></pre>
<p>Finally, you need to force a new deployment of the ECS service with:</p>
<pre><code>aws ecs update-service --cluster rust-ecs-prod --service &lt;service-name&gt; --force-new-deployment
</code></pre>
<h3><a class="header" href="#automatic-deployments-with-github-actions" id="automatic-deployments-with-github-actions">Automatic deployments with GitHub Actions</a></h3>
<p>The infrastructure team prepared an action for GitHub Actions that automates
deployments from CI. To use it, ask a team member to setup AWS credentials in
your repository, and then add this snippet to your workflow:</p>
<pre><code>- name: Build the Docker image
  run: docker build -t deploy-image .

- name: Deploy to production
  uses: rust-lang/simpleinfra/github-actions/upload-docker-image@master
  with:
    image: deploy-image
    repository: &lt;ecr-repository-name&gt;
    region: us-west-1
    redeploy_ecs_cluster: rust-ecs-prod
    redeploy_ecs_service: &lt;service-name&gt;
    aws_access_key_id: &quot;${{ secrets.AWS_ACCESS_KEY_ID }}&quot;
    aws_secret_access_key: &quot;${{ secrets.AWS_SECRET_ACCESS_KEY }}&quot;
  if: github.ref == 'refs/heads/&lt;deploy-branch&gt;'
</code></pre>
<p>Be sure to replace <code>&lt;ecr-repository-name&gt;</code>, <code>&lt;service-name&gt;</code> and
<code>&lt;deploy-branch&gt;</code> with the correct values for your workflow. Once the workflow
changes are merged in the branch you chose for deploys, any future commits
pushed there will be deployed to the ECS cluster.</p>
<h1><a class="header" href="#monitoring" id="monitoring">Monitoring</a></h1>
<ul>
<li>Hosted on: <code>monitoring.infra.rust-lang.org</code> (behind the bastion -- <a href="https://github.com/rust-lang/infra-team/blob/master/docs/hosts/bastion.md#logging-into-servers-through-the-bastion">how to connect</a>)</li>
<li>Maintainers: <a href="https://github.com/pietroalbini">pietroalbini</a>, infra team</li>
<li>Public URL: <a href="https://grafana.rust-lang.org">grafana.rust-lang.org</a></li>
<li><a href="https://github.com/rust-lang/simpleinfra/blob/master/ansible/playbooks/monitoring.yml">Ansible playbook</a> to deploy this server.</li>
<li><a href="https://grafana.rust-lang.org/d/rpXrFfKWz/instance-metrics?orgId=1&amp;var-instance=monitoring.infra.rust-lang.org:9100">Instance metrics</a> (only available to infra team members).</li>
</ul>
<h2><a class="header" href="#service-configuration-1" id="service-configuration-1">Service configuration</a></h2>
<p>Our monitoring service is composed of three parts: <a href="https://prometheus.io">Prometheus</a> to scrape,
collect and monitor metrics, <a href="https://prometheus.io/docs/alerting/alertmanager/">Alertmanager</a> to dispatch the alerts generated by
Prometheus, and <a href="https://grafana.com">Grafana</a> to display the metrics. All the parts are configured
through <a href="https://github.com/rust-lang/simpleinfra/tree/master/ansible">Ansible</a>.</p>
<p>The metrics are not backed up, as Prometheus purges them after 7 days anyway,
but the Grafana dashboards are stored in a PostgreSQL database, which is backed
up with <a href="https://restic.net">restic</a> in the <code>rust-backups</code> bucket (<code>monitoring</code> subdirectory). The
password to decrypt the backups is in 1password.</p>
<h2><a class="header" href="#common-maintenance-procedures-4" id="common-maintenance-procedures-4">Common maintenance procedures</a></h2>
<h3><a class="header" href="#scrape-a-new-metrics-source" id="scrape-a-new-metrics-source">Scrape a new metrics source</a></h3>
<p>Prometheus works by periodically scraping a list of HTTP endpoints for metrics,
written <a href="https://prometheus.io/docs/instrumenting/exposition_formats/">in its custom format</a>. In our configuration the list
is located in the <code>prometheus_scrape</code> section of the
<code>ansible/playbooks/monitoring.yml</code> file in the <a href="https://github.com/rust-lang/simpleinfra">simpleinfra</a> repository.</p>
<p>To add a new metrics source, add your endpoint to an existing job or, if the
metrics you're scraping are not related to any other job, a new one. The
endpoint must be reachable from the monitoring instance. You can read the
<a href="https://prometheus.io/docs/prometheus/latest/configuration/configuration/#scrape_config">Prometheus documentation</a> to find all the available
options.</p>
<h3><a class="header" href="#create-a-new-alert" id="create-a-new-alert">Create a new alert</a></h3>
<p>Alerts are generated by Prometheus every time a custom rule defined in its
configuration evaluates to true. In our configuration the list of rules is
located in the <code>prometheus_rule_groups</code> section of the
<code>ansible/playbooks/monitoring.yml</code> file in the <a href="https://github.com/rust-lang/simpleinfra">simpleinfra</a> repository.</p>
<p>To add a new alert you need to create an alerting rule either in an existing
group or a new one. The full list of options is available in the <a href="https://prometheus.io/docs/prometheus/latest/configuration/alerting_rules/">Prometheus
documentation</a>.</p>
<h3><a class="header" href="#add-permissions-to-a-user" id="add-permissions-to-a-user">Add permissions to a user</a></h3>
<p>There are two steps needed to grant access to <a href="https://grafana.rust-lang.org">our Grafana
instance</a> to an user.</p>
<p>First of all, to enable the user to log into the instance with their GitHub
account they need to be a member of a team authorized to log in. The list of
teams is defined in the <code>grafana_github_teams</code> section of the
<code>ansible/playbooks/monitoring.yml</code> file in the <a href="https://github.com/rust-lang/simpleinfra">simpleinfra</a> repository, and it
contains a list of GitHub team IDs. To fetch an ID you can run this command:</p>
<pre><code>curl -H &quot;Authorization: token $GITHUB_TOKEN&quot; https://api.github.com/orgs/&lt;ORG&gt;/teams/&lt;NAME&gt; | jq .id
</code></pre>
<p>Once the user is a member of a team authorized to log in they will
automatically be added to the main Grafana organization with &quot;viewer&quot;
permissions. For infrastructure team members that needs to be changed to
&quot;admin&quot; (in the &quot;Configuration&quot; -&gt; &quot;Users&quot;), otherwise leave it as viewer.</p>
<p>By default a viewer only has access to the unrestricted dashboards. To grant
access to other dashboards you'll need to add them to a team (in the
&quot;Configuration&quot; -&gt; &quot;Teams&quot; page). It's also possible to grant admin privileges
to the whole Grafana instance in the &quot;Server Admin&quot; -&gt; &quot;Users&quot; -&gt;
&quot;<code>&lt;username&gt;</code>&quot; page. Do not grant those permissions except to trusted infra
team members.</p>
<h2><a class="header" href="#additional-resources" id="additional-resources">Additional resources</a></h2>
<ul>
<li><a href="https://prometheus.io/docs/introduction/overview/">Prometheus documentation</a></li>
<li><a href="https://grafana.com/docs/">Grafana documentation</a></li>
</ul>
<h1><a class="header" href="#rust-bots" id="rust-bots">rust-bots</a></h1>
<ul>
<li>FQDN: <code>bots.infra.rust-lang.org</code> (behind the bastion -- <a href="https://github.com/rust-lang/infra-team/blob/master/docs/hosts/bastion.md#logging-into-servers-through-the-bastion">how to connect</a>)</li>
<li><a href="https://grafana.rust-lang.org/d/rpXrFfKWz/instance-metrics?orgId=1&amp;var-instance=bots.infra.rust-lang.org:9100">Instance metrics</a> (only available to infra team members).</li>
</ul>
<h2><a class="header" href="#common-maintenance-procedures-5" id="common-maintenance-procedures-5">Common maintenance procedures</a></h2>
<h3><a class="header" href="#adding-a-new-domain" id="adding-a-new-domain">Adding a new domain</a></h3>
<p>First, edit <code>sudo vim /etc/nginx/nginx.conf</code> to edit the nginx configuration to add the domain.</p>
<pre><code>server {
    listen 443 ssl;
    listen [::]:443 ssl;
    server_name &lt;domain&gt;.infra.rust-lang.org; # Edit &lt;domain&gt; to match here

    location /.well-known/acme-challenge {
        root /home/ssl-renew/challenges;
    }

    location / {
        # configure the domain here
    }
}
</code></pre>
<p>Then run <code>sudo -i -u ssl-renew vim renew.sh</code>. Add a <code>--domains</code> line to the script with the domain you're adding.</p>
<p>Then, run the script: <code>sudo -i -u ssl-renew ./renew.sh</code></p>
<h1><a class="header" href="#how-the-rust-ci-works" id="how-the-rust-ci-works">How the Rust CI works</a></h1>
<h2><a class="header" href="#which-jobs-we-run" id="which-jobs-we-run">Which jobs we run</a></h2>
<p>The <code>rust-lang/rust</code> repository uses Azure Pipelines to test <a href="https://forge.rust-lang.org/release/platform-support.html">all the other
platforms</a> we support. We currently have two kinds of jobs running
for each commit we want to merge to master:</p>
<ul>
<li>
<p>Dist jobs build a full release of the compiler for that platform, including
all the tools we ship through rustup; Those builds are then uploaded to the
<code>rust-lang-ci2</code> S3 bucket and are available to be locally installed with the
<a href="https://github.com/kennytm/rustup-toolchain-install-master">rustup-toolchain-install-master</a> tool; The same builds are also used for
actual releases: our release process basically consists of copying those
artifacts from <code>rust-lang-ci2</code> to the production endpoint and signing them.</p>
</li>
<li>
<p>Non-dist jobs run our full test suite on the platform, and the test suite of
all the tools we ship through rustup; The amount of stuff we test depends on
the platform (for example some tests are run only on Tier 1 platforms), and
some quicker platforms are grouped together on the same builder to avoid
wasting CI resources.</p>
</li>
</ul>
<p>All the builds except those on macOS and Windows are executed inside that
platform’s custom Docker container. This has a lot of advantages for us:</p>
<ul>
<li>The build environment is consistent regardless of the changes of the
underlying image (switching from the trusty image to xenial was painless for
us).</li>
<li>We can use ancient build environments to ensure maximum binary compatibility,
for example <a href="https://github.com/rust-lang/rust/blob/master/src/ci/docker/dist-x86_64-linux/Dockerfile">using CentOS 5</a> on our Linux builders.</li>
<li>We can avoid reinstalling tools (like QEMU or the Android emulator) every
time thanks to Docker image caching.</li>
<li>Users can run the same tests in the same environment locally by just running
<code>src/ci/docker/run.sh image-name</code>, which is awesome to debug failures.</li>
</ul>
<p>We also run tests for less common architectures (mainly Tier 2 and Tier 3
platforms) on Azure Pipelines. Since those platforms are not x86 we either run
everything inside QEMU or just cross-compile if we don’t want to run the tests
for that platform.</p>
<h2><a class="header" href="#merging-prs-serially-with-bors" id="merging-prs-serially-with-bors">Merging PRs serially with bors</a></h2>
<p>CI services usually test the last commit of a branch merged with the last
commit in master, and while that’s great to check if the feature works in
isolation it doesn’t provide any guarantee the code is going to work once it’s
merged. Breakages like these usually happen when another, incompatible PR is
merged after the build happened.</p>
<p>To ensure a master that works all the time we forbid manual merges: instead all
PRs have to be approved through our bot, <a href="https://github.com/bors">bors</a> (the software behind it is
called <a href="https://github.com/rust-lang/homu">homu</a>). All the approved PRs are put <a href="https://buildbot2.rust-lang.org/homu/queue/rust">in a queue</a> (sorted
by priority and creation date) and are automatically tested one at the time. If
all the builders are green the PR is merged, otherwise the failure is recorded
and the PR will have to be re-approved again.</p>
<p>Bors doesn’t interact with CI services directly, but it works by pushing the
merge commit it wants to test to a branch called <code>auto</code>, and detecting the
outcome of the build by listening for either Commit Statuses or Check Runs.
Since the merge commit is based on the latest master and only one can be tested
at the same time, when the results are green master is fast-forwarded to that
merge commit.</p>
<p>Unfortunately testing a single PR at the time, combined with our long CI (~3.5
hours for a full run), means we can’t merge too many PRs in a single day, and a
single failure greatly impacts our throughput for the day. The maximum number
of PRs we can merge in a day is 7.</p>
<h3><a class="header" href="#rollups" id="rollups">Rollups</a></h3>
<p>Some PRs don’t need the full test suite to be executed: trivial changes like
typo fixes or README improvements <em>shouldn’t</em> break the build, and testing
every single one of them for 2 to 3 hours is a big waste of time. To solve this
we do a &quot;rollup&quot;, a PR where we merge all the trivial PRs so they can be tested
together. Rollups are created manually by a team member who uses their
judgement to decide if a PR is risky or not, and are the best tool we have at
the moment to keep the queue in a manageable state.</p>
<h3><a class="header" href="#try-builds" id="try-builds">Try builds</a></h3>
<p>Sometimes we need a working compiler build before approving a PR, usually for
<a href="https://perf.rust-lang.org">benchmarking</a> or <a href="https://github.com/rust-lang/crater">checking the impact of the PR across the
ecosystem</a>. Bors supports creating them by pushing the merge commit on
a separate branch (<code>try</code>), and they basically work the same as normal builds,
without the actual merge at the end. Any number of try builds can happen at the
same time, even if there is a normal PR in progress.</p>
<h2><a class="header" href="#which-branches-we-test" id="which-branches-we-test">Which branches we test</a></h2>
<p>Our builders are defined in <code>src/ci/azure-pipelines/</code>, and they depend on the
branch used for the build. Each job is configured in one of the top <code>.yml</code>
files.</p>
<h3><a class="header" href="#pr-builds" id="pr-builds">PR builds</a></h3>
<p>All the commits pushed in a PR run a limited set of tests: a job containing a
bunch of lints plus a cross-compile check build to Windows mingw (without
producing any artifacts) and the <code>x86_64-gnu-llvm-6.0</code> non-dist builder. Those
two builders are enough to catch most of the common errors introduced in a PR,
but they don’t cover other platforms at all. Unfortunately it would take too
many resources to run the full test suite for each commit on every PR.</p>
<p>Additionally, if the PR changes submodules the <code>x86_64-gnu-tools</code> non-dist
builder is run.</p>
<h3><a class="header" href="#the-try-branch" id="the-try-branch">The <code>try</code> branch</a></h3>
<p>On the main rust repo try builds produce just a Linux toolchain. Builds on
those branches run a job containing the lint builder and both the dist and
non-dist builders for <code>linux-x86_64</code>. Usually we don’t need <code>try</code> builds for
other platforms, but on the rare cases when this is needed we just add a
temporary commit that changes the <code>src/ci/azure-pipelines/try.yml</code> file to
enable the builders we need on that platform (disabling Linux to avoid wasting
CI resources).</p>
<h3><a class="header" href="#the-auto-branch" id="the-auto-branch">The <code>auto</code> branch</a></h3>
<p>This branch is used by bors to run all the tests on a PR before merging it, so
all the builders are enabled for it. bors will repeatedly force-push on it
(every time a new commit is tested).</p>
<h3><a class="header" href="#the-master-branch" id="the-master-branch">The <code>master</code> branch</a></h3>
<p>Since all the commits to <code>master</code> are fast-forwarded from the <code>auto</code> branch (if
they pass all the tests there) we don’t need to build or test anything. A quick
job is executed on each push to update toolstate (see the toolstate description
below).</p>
<h3><a class="header" href="#other-branches" id="other-branches">Other branches</a></h3>
<p>Other branches are just disabled and don’t run any kind of builds, since all
the in-progress branches will eventually be tested in a PR. We try to encourage
contributors to create branches on their own fork, but there is no way for us
to disable that.</p>
<h2><a class="header" href="#caching" id="caching">Caching</a></h2>
<p>The main rust repository doesn’t use the native Azure Pipelines caching tools.
All our caching is uploaded to an S3 bucket we control
(<code>rust-lang-ci-sccache2</code>), and it’s used mainly for two things:</p>
<h3><a class="header" href="#docker-images-caching" id="docker-images-caching">Docker images caching</a></h3>
<p>The Docker images we use to run most of the Linux-based builders take a <em>long</em>
time to fully build: every time we need to build them (for example when the CI
scripts change) we consistently reach the build timeout, forcing us to retry
the merge. To avoid the timeouts we cache the exported images on the S3 bucket
(with <code>docker save</code>/<code>docker load</code>).</p>
<p>Since we test multiple, diverged branches (<code>master</code>, <code>beta</code> and <code>stable</code>) we
can’t rely on a single cache for the images, otherwise builds on a branch would
override the cache for the others. Instead we store the images identifying them
with a custom hash, made from the host’s Docker version and the contents of all
the Dockerfiles and related scripts.</p>
<h3><a class="header" href="#llvm-caching-with-sccache" id="llvm-caching-with-sccache">LLVM caching with sccache</a></h3>
<p>We build some C/C++ stuff during the build and we rely on <a href="https://github.com/mozilla/sccache">sccache</a> to cache
intermediate LLVM artifacts. Sccache is a distributed ccache developed by
Mozilla, and it can use an object storage bucket as the storage backend, like
we do with our S3 bucket.</p>
<h2><a class="header" href="#custom-tooling-around-ci" id="custom-tooling-around-ci">Custom tooling around CI</a></h2>
<p>During the years we developed some custom tooling to improve our CI experience.</p>
<h3><a class="header" href="#cancelbot-to-keep-the-queue-short" id="cancelbot-to-keep-the-queue-short">Cancelbot to keep the queue short</a></h3>
<p>We have limited CI capacity on Azure Pipelines, and while that’s enough for a
single build we can’t run more than one at the time. Unfortunately when a job
fails the other jobs on the same build will continue to run, limiting the
available capacity. To avoid the issue we have a tool called <a href="https://github.com/rust-lang/rust-central-station/tree/master/cancelbot">cancelbot</a> that
runs in cron every 2 minutes and kills all the jobs not related to a running
build through the API.</p>
<h3><a class="header" href="#rust-log-analyzer-to-show-the-error-message-in-prs" id="rust-log-analyzer-to-show-the-error-message-in-prs">Rust Log Analyzer to show the error message in PRs</a></h3>
<p>The build logs for <code>rust-lang/rust</code> are huge, and it’s not practical to find
what caused the build to fail by looking at the logs. To improve the
developers’ experience we developed a bot called <a href="https://github.com/rust-lang/rust-log-analyzer">Rust Log Analyzer</a> (RLA)
that receives the build logs on failure and extracts the error message
automatically, posting it on the PR.</p>
<p>The bot is not hardcoded to look for error strings, but was trained with a
bunch of build failures to recognize which lines are common between builds and
which are not. While the generated snippets can be weird sometimes, the bot is
pretty good at identifying the relevant lines even if it’s an error we never
saw before.</p>
<h3><a class="header" href="#toolstate-to-support-allowed-failures" id="toolstate-to-support-allowed-failures">Toolstate to support allowed failures</a></h3>
<p>The <code>rust-lang/rust</code> repo doesn’t only test the compiler on its CI, but also
all the tools distributed through rustup (like rls, rustfmt, clippy…). Since
those tools rely on the compiler internals (which don’t have any kind of
stability guarantee) they often break after the compiler code is changed.</p>
<p>If we blocked merging rustc PRs on the tools being fixed we would be stuck in a
chicken-and-egg problem, because the tools need the new rustc to be fixed but
we can’t merge the rustc change until the tools are fixed. To avoid the problem
most of the tools are allowed to fail, and their status is recorded in
<a href="https://rust-lang-nursery.github.io/rust-toolstate">rust-toolstate</a>. When a tool breaks a bot automatically pings the tool authors
so they know about the breakage, and it records the failure on the toolstate
repository. The release process will then ignore broken tools on nightly,
removing them from the shipped nightlies.</p>
<p>While tool failures are allowed most of the time, they’re automatically
forbidden a week before a release: we don’t care if tools are broken on nightly
but they must work on beta and stable, so they also need to work on nightly a
few days before we promote nightly to beta.</p>
<p>More information is available in the <a href="https://forge.rust-lang.org/infra/toolstate.html">toolstate documentation</a>.</p>
<h1><a class="header" href="#language" id="language">Language</a></h1>
<p>This section documents meta processes by the language team.</p>
<h3><a class="header" href="#external-links-5" id="external-links-5">External Links</a></h3>
<ul>
<li>The language team has communications channels on <a href="https://discord.gg/rust-lang">Discord</a> as well as <a href="https://rust-lang.zulipchat.com">Zulip</a>.</li>
</ul>
<h1><a class="header" href="#rfc-merge-procedure" id="rfc-merge-procedure">RFC Merge Procedure</a></h1>
<p>Once an RFC has been accepted (i.e., the final comment period is complete, and
no major issues were raised), it must be merged. Right now this is a manual
process, though just about anyone can do it (if you're not a subteam member,
though, you'll have to open a PR rather than merge the RFC manually). Here is
the complete set of steps to merge an RFC -- in some cases, not all the steps
will be applicable.</p>
<h3><a class="header" href="#step-1-open-tracking-issue" id="step-1-open-tracking-issue">Step 1: Open tracking issue</a></h3>
<p>Open a tracking issue over on rust-lang/rust. Here is a template for the issue
text. You'll have to adjust the various places labeled XXX with some suitable
content (e.g., the name of the RFC, or the most appropriate team).</p>
<pre><code class="language-markdown">This is a tracking issue for the RFC &quot;XXX&quot; (rust-lang/rfcs#NNN).

**Steps:**

- [ ] Implement the RFC (cc @rust-lang/XXX -- can anyone write up mentoring
      instructions?)
- [ ] Adjust documentation ([see instructions on rustc-dev-guide][doc-guide])
- [ ] Stabilization PR ([see instructions on rustc-dev-guide][stabilization-guide])

[stabilization-guide]: https://rustc-dev-guide.rust-lang.org/stabilization_guide.html#stabilization-pr
[doc-guide]: https://rustc-dev-guide.rust-lang.org/stabilization_guide.html#documentation-prs

**Unresolved questions:**

XXX --- list all the &quot;unresolved questions&quot; found in the RFC to ensure they are
not forgotten
</code></pre>
<p>Add the following labels to the issue:</p>
<ul>
<li><code>B-rfc-approved</code></li>
<li><code>C-tracking-issue</code></li>
<li>the approriate <code>T-XXX</code> label</li>
</ul>
<p>(If you don't have permissions to do so, leave a note cc'ing the appropriate
team and asking them to do so.)</p>
<h3><a class="header" href="#step-2-merge-the-rfc-pr-itself" id="step-2-merge-the-rfc-pr-itself">Step 2: Merge the RFC PR itself</a></h3>
<p>In your local git checkout:</p>
<ul>
<li>Merge the RFC PR into master in your fork</li>
<li>Add a commit that moves the file name from 0000- to its RFC number</li>
<li>Edit the new file to include links to the RFC PR and the tracking issue you
just created in the header</li>
<li>Open a PR or push directly to the master branch on rust-lang/rfcs, as
appropriate</li>
</ul>
<h3><a class="header" href="#step-3-leave-a-comment" id="step-3-leave-a-comment">Step 3: Leave a comment</a></h3>
<p>Leave a final comment on the PR directing everyone to the tracking issue.
Something like this, but feel free to add your own personal flavor (and change
the team):</p>
<pre><code class="language-markdown">**Huzzah!** The @rust-lang/lang team has decided **to accept** this RFC.

To track further discussion, subscribe to the tracking issue here:
rust-lang/rust#41517
</code></pre>
<h3><a class="header" href="#step-4-update-the-rendered-link" id="step-4-update-the-rendered-link">Step 4: Update the rendered link</a></h3>
<p>Update the rendered link in the first post of the PR to the permanent home under
<code>https://github.com/rust-lang/rfcs/blob/master/text/</code>.</p>
<p>(This way future visitors can open it easily after the PR branch is deleted.)</p>
<h3><a class="header" href="#thats-it-youre-done" id="thats-it-youre-done">That's it, you're done!</a></h3>
<h1><a class="header" href="#triage-meeting-procedure" id="triage-meeting-procedure">Triage meeting procedure</a></h1>
<p>This page documents how to run a lang team triage meeting,
should you have the misfortune of being forced to do so.</p>
<h2><a class="header" href="#attending-a-meeting" id="attending-a-meeting">Attending a meeting</a></h2>
<p>If you would just like to <strong>attend</strong> a lang-team triage meeting, all
you have to do is join the zoom call (the URL is attached to the
calendar invite below).</p>
<h2><a class="header" href="#scheduling" id="scheduling">Scheduling</a></h2>
<p>Note that the scheduling for all meetings is recorded in the <a href="https://github.com/rust-lang/lang-team/#meeting-calendar">team
calendar</a>, links to which can be found on the <a href="https://github.com/rust-lang/lang-team/">rust-lang/lang-team</a>
repository.</p>
<h2><a class="header" href="#pre-triage" id="pre-triage">Pre-triage</a></h2>
<p>To start, we have a pre-triage meeting which occurs before the main
meeting. This is not recorded. It is boring.</p>
<p>To execute this meeting you:</p>
<ul>
<li>Open the <a href="https://paper.dropbox.com/doc/T-Lang-Meeting-Current-meeting--AmyXFNnryXTNzBsSWjbdJcVSAg-nRfrSxCbfeo9q7fEYogZQ">Current Meeting</a> dropbox paper document</li>
<li>Skim down the action items and look to see if there are any you know have been handled
<ul>
<li>they can be checked off and removed</li>
</ul>
</li>
<li>Skip down to the Triage section</li>
<li>For each Triage section, click on the link and populate it with what you find
<ul>
<li>typically it is best to copy-and-paste the title of the issue, so that links remain intact</li>
</ul>
</li>
<li>For each item, click in and try to add a few notes as to the main topic
<ul>
<li>look for things where there isn't much discussion needed, or just reminders</li>
<li>these can be handled quickly in the meeting, or perhaps not at all</li>
<li>items that require more discussion will need time alotted for them</li>
</ul>
</li>
</ul>
<h2><a class="header" href="#main-meeting" id="main-meeting">Main meeting</a></h2>
<ul>
<li>Ping the team on discord <code>@lang-team</code></li>
<li>Begin the recording on Zoom, if you have acccess 
<ul>
<li>If nobody has access to the recording, oh well, we don't do it every week</li>
</ul>
</li>
<li>Discuss item by item and take some notes on what was said
<ul>
<li>Add specific actions to the action items section above</li>
<li>If a consensus arises, make sure to create an action item to document it!</li>
<li>The goal should be that we leave some comment on every issue</li>
</ul>
</li>
</ul>
<h2><a class="header" href="#after-meeting" id="after-meeting">After meeting</a></h2>
<ul>
<li>Export the meeting file to markdown
<ul>
<li>you will need to cleanup &quot;check boxes&quot; -- Niko usually searches and replaces 
<code>^(\s*)[ ]</code> with <code>\1* [ ]</code> or something like that to insert a
<code>*</code> before them, which makes them valid markdown</li>
</ul>
</li>
<li>Upload video to youtube if applicable and get the URL</li>
<li>Add the file to the <a href="https://github.com/rust-lang/lang-team/tree/master/minutes">minutes</a> directory of <a href="https://github.com/rust-lang/lang-team/">rust-lang/lang-team</a> repository
with a file name like <code>YYYY-MM-DD.md</code></li>
</ul>
<h1><a class="header" href="#libs" id="libs">Libs</a></h1>
<p>This section documents meta processes by the libs team.</p>
<h1><a class="header" href="#maintaining-the-standard-library" id="maintaining-the-standard-library">Maintaining the standard library</a></h1>
<blockquote>
<p>Everything I wish I knew before somebody gave me <code>r+</code></p>
</blockquote>
<p>This document is an effort to capture some of the context needed to develop and maintain the Rust standard library. It’s goal is to help members of the Libs team share the process and experience they bring to working on the standard library so other members can benefit. It’ll probably accumulate a lot of trivia that might also be interesting to members of the wider Rust community.</p>
<p>This document doesn't attempt to discuss best practices or good style. For that, see the <a href="https://rust-lang.github.io/api-guidelines">API Guidelines</a>.</p>
<h2><a class="header" href="#contributing" id="contributing">Contributing</a></h2>
<p>If you spot anything that is outdated, under specified, missing, or just plain incorrect then feel free to open up a PR on the <a href="https://github.com/rust-lang/rust-forge"><code>rust-lang/rust-forge</code></a> repository!</p>
<h2><a class="header" href="#terms" id="terms">Terms</a></h2>
<ul>
<li>Libs. That's us! The team responsible for development and maintenance of the standard library (among other things).</li>
<li>Pull request (PR). A regular GitHub pull request against <a href="https://github.com/rust-lang/rust"><code>rust-lang/rust</code></a>.</li>
<li>Request for Comment (RFC). A formal document created in <a href="https://github.com/rust-lang/rfcs"><code>rust-lang/rfcs</code></a> that introduces new features.</li>
<li>Tracking Issue. A regular issue on GitHub that’s tagged with <code>C-tracking-issue</code>.</li>
<li>Final Comment Period (FCP). Coordinated by <a href="https://github.com/rust-lang/rfcbot-rs"><code>rfcbot</code></a> that gives relevant teams a chance to review RFCs and PRs.</li>
</ul>
<h2><a class="header" href="#if-youre-ever-unsure" id="if-youre-ever-unsure">If you’re ever unsure…</a></h2>
<p>Maintaining the standard library can feel like a daunting responsibility! Through <a href="https://github.com/rust-lang/highfive"><code>highfive</code></a>, the automated reviewer assignment, you’ll find yourself dropped into a lot of new contexts.</p>
<p>Ping the <code>@rust-lang/libs</code> team on GitHub anytime. We’re all here to help!</p>
<p>If you don’t think you’re the best person to review a PR then use <a href="https://github.com/rust-lang/highfive"><code>highfive</code></a> to assign it to somebody else.</p>
<h2><a class="header" href="#finding-reviews-waiting-for-your-input" id="finding-reviews-waiting-for-your-input">Finding reviews waiting for your input</a></h2>
<p>Please remember to regularly check https://rfcbot.rs/. Click on any occurrence of your nickname to go to a page like https://rfcbot.rs/fcp/SimonSapin that only shows the reviews that are waiting for your input.</p>
<h2><a class="header" href="#reviewing-prs" id="reviewing-prs">Reviewing PRs</a></h2>
<p>As a member of the Libs team you’ll find yourself assigned to PRs that need reviewing, and your input requested on issues in the Rust project.</p>
<h3><a class="header" href="#when-is-an-rfc-needed" id="when-is-an-rfc-needed">When is an RFC needed?</a></h3>
<p>New unstable features don't need an RFC before they can be merged. If the feature is small, and the design space is straightforward, stabilizing it usually only requires the feature to go through FCP. Sometimes however, you may ask for an RFC before stabilizing.</p>
<h3><a class="header" href="#is-there-any-unsafe" id="is-there-any-unsafe">Is there any <code>unsafe</code>?</a></h3>
<p>Unsafe code blocks in the standard library need a comment explaining why they're <a href="https://doc.rust-lang.org/nomicon">ok</a>. There's a <code>tidy</code> lint that checks this. The unsafe code also needs to actually be ok.</p>
<p>The rules around what's sound and what's not can be subtle. See the <a href="https://github.com/rust-lang/unsafe-code-guidelines">Unsafe Code Guidelines WG</a> for current thinking, and consider pinging <code>@rust-lang/libs</code>, <code>@rust-lang/lang</code>, and/or somebody from the WG if you're in <em>any</em> doubt. We love debating the soundness of unsafe code, and the more eyes on it the better!</p>
<h3><a class="header" href="#is-that-inline-right" id="is-that-inline-right">Is that <code>#[inline]</code> right?</a></h3>
<p>Inlining is a trade-off between potential execution speed, compile time and code size.</p>
<p>You should add <code>#[inline]</code>:</p>
<ul>
<li>To public, small, non-generic functions.</li>
</ul>
<p>You shouldn’t need <code>#[inline]</code>:</p>
<ul>
<li>On methods that have any generics in scope.</li>
<li>On methods on traits that don’t have a default implementation.</li>
</ul>
<h4><a class="header" href="#what-about-inlinealways" id="what-about-inlinealways">What about <code>#[inline(always)]</code>?</a></h4>
<p>You should just about never need <code>#[inline(always)]</code>. It may be beneficial for private helper methods that are used in a limited number of places or for trivial operators. A micro benchmark should justify the attribute.</p>
<h3><a class="header" href="#is-there-any-potential-breakage" id="is-there-any-potential-breakage">Is there any potential breakage?</a></h3>
<p>Breaking changes should be avoided when possible. <a href="https://rust-lang.github.io/rfcs/1105-api-evolution.html">RFC 1105</a> lays the foundations for what constitutes a breaking change. Breakage may be deemed acceptable or not based on its actual impact, which can be approximated with a <a href="https://github.com/rust-lang/crater"><code>crater</code></a> run.</p>
<p>There are strategies for mitigating breakage depending on the impact.</p>
<p>For changes where the value is high and the impact is high too:</p>
<ul>
<li>Using compiler lints to try phase out broken behavior.</li>
</ul>
<p>If the impact isn't too high:</p>
<ul>
<li>Looping in maintainers of broken crates and submitting PRs to fix them.</li>
</ul>
<h3><a class="header" href="#are-there-new-impls-for-stable-traits" id="are-there-new-impls-for-stable-traits">Are there new impls for stable traits?</a></h3>
<p>A lot of PRs to the standard library are adding new impls for already stable traits, which can break consumers in many weird and wonderful ways. The following sections gives some examples of breakage from new trait impls that may not be obvious just from the change made to the standard library.</p>
<h4><a class="header" href="#inference-breaks-when-a-second-generic-impl-is-introduced" id="inference-breaks-when-a-second-generic-impl-is-introduced">Inference breaks when a second generic impl is introduced</a></h4>
<p>Rust will use the fact that there's only a single impl for a generic trait during inference. This breaks once a second impl makes the type of that generic ambiguous. Say we have:</p>
<pre><pre class="playpen"><code class="language-rust">
<span class="boring">#![allow(unused_variables)]
</span><span class="boring">fn main() {
</span>// in `std`
impl From&lt;&amp;str&gt; for Arc&lt;str&gt; { .. }
<span class="boring">}
</span></code></pre></pre>
<pre><pre class="playpen"><code class="language-rust">
<span class="boring">#![allow(unused_variables)]
</span><span class="boring">fn main() {
</span>// in an external `lib`
let b = Arc::from(&quot;a&quot;);
<span class="boring">}
</span></code></pre></pre>
<p>then we add:</p>
<pre><code class="language-diff">impl From&lt;&amp;str&gt; for Arc&lt;str&gt; { .. }
+ impl From&lt;&amp;str&gt; for Arc&lt;String&gt; { .. }
</code></pre>
<p>then</p>
<pre><pre class="playpen"><code class="language-rust">
<span class="boring">#![allow(unused_variables)]
</span><span class="boring">fn main() {
</span>let b = Arc::from(&quot;a&quot;);
<span class="boring">}
</span></code></pre></pre>
<p>will no longer compile, because we've previously been relying on inference to figure out the <code>T</code> in <code>Box&lt;T&gt;</code>.</p>
<p>This kind of breakage can be ok, but a <a href="https://github.com/rust-lang/crater"><code>crater</code></a> run should estimate the scope.</p>
<h4><a class="header" href="#deref-coercion-breaks-when-a-new-impl-is-introduced" id="deref-coercion-breaks-when-a-new-impl-is-introduced">Deref coercion breaks when a new impl is introduced</a></h4>
<p>Rust will use deref coercion to find a valid trait impl if the arguments don't type check directly. This only seems to occur if there's a single impl so introducing a new one may break consumers relying on deref coercion. Say we have:</p>
<pre><pre class="playpen"><code class="language-rust">
<span class="boring">#![allow(unused_variables)]
</span><span class="boring">fn main() {
</span>// in `std`
impl Add&lt;&amp;str&gt; for String { .. }

impl Deref for String { type Target = str; .. }
<span class="boring">}
</span></code></pre></pre>
<pre><pre class="playpen"><code class="language-rust">
<span class="boring">#![allow(unused_variables)]
</span><span class="boring">fn main() {
</span>// in an external `lib`
let a = String::from(&quot;a&quot;);
let b = String::from(&quot;b&quot;);

let c = a + &amp;b;
<span class="boring">}
</span></code></pre></pre>
<p>then we add:</p>
<pre><code class="language-diff">impl Add&lt;&amp;str&gt; for String { .. }
+ impl Add&lt;char&gt; for String { .. }
</code></pre>
<p>then</p>
<pre><pre class="playpen"><code class="language-rust">
<span class="boring">#![allow(unused_variables)]
</span><span class="boring">fn main() {
</span>let c = a + &amp;b;
<span class="boring">}
</span></code></pre></pre>
<p>will no longer compile, because we won't attempt to use deref to coerce the <code>&amp;String</code> into <code>&amp;str</code>.</p>
<p>This kind of breakage can be ok, but a <a href="https://github.com/rust-lang/crater"><code>crater</code></a> run should estimate the scope.</p>
<h3><a class="header" href="#could-an-implementation-use-existing-functionality" id="could-an-implementation-use-existing-functionality">Could an implementation use existing functionality?</a></h3>
<p>Types like <code>String</code> are implemented in terms of <code>Vec&lt;u8&gt;</code> and can use methods on <code>str</code> through deref coersion. <code>Vec&lt;T&gt;</code> can use methods on <code>[T]</code> through deref coersion. When possible, methods on a wrapping type like <code>String</code> should defer to methods that already exist on their underlying storage or deref target.</p>
<h3><a class="header" href="#are-there-fundamental-items-involved" id="are-there-fundamental-items-involved">Are there <code>#[fundamental]</code> items involved?</a></h3>
<p>Blanket trait impls can't be added to <code>#[fundamental]</code> types because they have different coherence rules. See <a href="https://rust-lang.github.io/rfcs/1023-rebalancing-coherence.html">RFC 1023</a> for details. That includes:</p>
<ul>
<li><code>&amp;T</code></li>
<li><code>&amp;mut T</code></li>
<li><code>Box&lt;T&gt;</code></li>
<li><code>Pin&lt;T&gt;</code></li>
</ul>
<h3><a class="header" href="#is-specialization-involved" id="is-specialization-involved">Is specialization involved?</a></h3>
<p><strong>NOTE(2019-02-10):</strong> Due to recent soundness holes introduced by specialization in the standard library (c.f. <a href="https://github.com/rust-lang/rust/pull/68358">#68358</a> and <a href="https://github.com/rust-lang/rust/issues/67194">#67194</a>) the language team decided on a design meeting to place a moratorium on new uses of specialization until we have some checks in place ensuring soundness for internal uses.</p>
<p>We try to avoid leaning on specialization too heavily, limiting its use to optimizing specific implementations. These specialized optimizations use a private trait to find the correct implementation, rather than specializing the public method itself. Any use of specialization that changes how methods are dispatched for external callers should be carefully considered.</p>
<h3><a class="header" href="#are-there-public-enums" id="are-there-public-enums">Are there public enums?</a></h3>
<p>Public enums should have a <code>#[non_exhaustive]</code> attribute if there's any possibility of new variants being introduced, so that they can be added without causing breakage.</p>
<h3><a class="header" href="#does-this-change-drop-order" id="does-this-change-drop-order">Does this change drop order?</a></h3>
<p>Changes to collection internals may affect the order their items are dropped in. This has been accepted in the past, but should be noted.</p>
<h3><a class="header" href="#how-could-mem-break-assumptions" id="how-could-mem-break-assumptions">How could <code>mem</code> break assumptions?</a></h3>
<h4><a class="header" href="#memreplace-and-memswap" id="memreplace-and-memswap"><code>mem::replace</code> and <code>mem::swap</code></a></h4>
<p>Any value behind a <code>&amp;mut</code> reference can be replaced with a new one using <code>mem::replace</code> or <code>mem::swap</code>, so code shouldn't assume any reachable mutable references can't have their internals changed by replacing.</p>
<h4><a class="header" href="#memforget" id="memforget"><code>mem::forget</code></a></h4>
<p>Rust doesn't guarantee destructors will run when a value is leaked (which can be done with <code>mem::forget</code>), so code should avoid relying on them for maintaining safety. Remember, <a href="http://cglab.ca/%7Eabeinges/blah/everyone-poops">everyone poops</a>.</p>
<p>It's ok not to run a destructor when a value is leaked because its storage isn't deallocated or repurposed. If the storage is initialized and is being deallocated or repurposed then destructors need to be run first, because <a href="https://doc.rust-lang.org/nightly/std/pin/index.html#drop-guarantee">memory may be pinned</a>. Having said that, there can still be exceptions for skipping destructors when deallocating if you can guarantee there's never pinning involved.</p>
<h3><a class="header" href="#how-is-performance-impacted" id="how-is-performance-impacted">How is performance impacted?</a></h3>
<p>Changes to hot code might impact performance in consumers, for better or for worse. Appropriate benchmarks should give an idea of how performance characteristics change. For changes that affect <code>rustc</code> itself, you can also do a <a href="https://github.com/rust-lang-nursery/rustc-perf"><code>rust-timer</code></a> run.</p>
<h3><a class="header" href="#is-the-commit-log-tidy" id="is-the-commit-log-tidy">Is the commit log tidy?</a></h3>
<p>PRs shouldn’t have merge commits in them. If they become out of date with <code>master</code> then they need to be rebased.</p>
<h3><a class="header" href="#are-functions-const-stabilized-or-constified" id="are-functions-const-stabilized-or-constified">Are functions const-stabilized or constified?</a></h3>
<p>Please CC <code>@rust-lang/wg-const-eval</code>.</p>
<h2><a class="header" href="#merging-prs" id="merging-prs">Merging PRs</a></h2>
<p>PRs to <a href="https://github.com/rust-lang/rust"><code>rust-lang/rust</code></a> aren’t merged manually using GitHub’s UI or by pushing remote branches. Everything goes through <a href="https://github.com/rust-lang/homu"><code>bors</code></a>.</p>
<h3><a class="header" href="#when-to-rollup" id="when-to-rollup">When to <code>rollup</code></a></h3>
<p>For Libs PRs, rolling up is usually fine, in particular if it's only a new unstable addition or if it only touches docs (with the exception of intra doc links which complicates things while the feature has bugs...).</p>
<p>If a submodule is affected then probably don't <code>rollup</code>. If the feature affects perf then also avoid <code>rollup</code> -- mark it as <code>rollup=never</code>.</p>
<h3><a class="header" href="#when-theres-new-public-items" id="when-theres-new-public-items">When there’s new public items</a></h3>
<p>If the feature is new, then a tracking issue should be opened for it. Have a look at some previous <a href="https://github.com/rust-lang/rust/issues?q=label%3AC-tracking-issue+label%3AT-libs">tracking issues</a> to get an idea of what needs to go in there. The <code>issue</code> field on <code>#[unstable]</code> attributes should be updated with the tracking issue number.</p>
<p>Unstable features can be merged as normal through <a href="https://github.com/rust-lang/homu"><code>bors</code></a> once they look ready.</p>
<h3><a class="header" href="#when-theres-new-trait-impls" id="when-theres-new-trait-impls">When there’s new trait impls</a></h3>
<p>There’s no way to make a trait impl for a stable trait unstable, so <strong>any PRs that add new impls for already stable traits must go through a FCP before merging.</strong> If the trait itself is unstable though, then the impl needs to be unstable too.</p>
<h3><a class="header" href="#when-a-feature-is-being-stabilized" id="when-a-feature-is-being-stabilized">When a feature is being stabilized</a></h3>
<p>Features can be stabilized in a PR that replaces <code>#[unstable]</code> attributes with <code>#[stable]</code> ones. The feature needs to have an accepted RFC before stabilizing. They also need to go through a FCP before merging.</p>
<p>You can find the right version to use in the <code>#[stable]</code> attribute by checking the <a href="https://forge.rust-lang.org/">Forge</a>.</p>
<h1><a class="header" href="#release" id="release">Release</a></h1>
<p>This section documents the process around creating a new release of the
compiler, tools, as well information on The Rust Programming Language's platform
support.</p>
<h3><a class="header" href="#external-links-6" id="external-links-6">External Links</a></h3>
<ul>
<li>The <a href="https://buildbot2.rust-lang.org/homu/">Homu/Bors</a> page provides links to the pull request testing queues for the
<code>rust-lang</code> GitHub organisation, as well as providing an overview of the bot's
syntax you can use to interact with it.</li>
<li><a href="https://rust-lang.github.io/rustup-components-history/index.html">Rustup Component History</a> documents when a component was last available (if
it was available) for a specific platform on nightly.</li>
<li><a href="https://rust-lang-nursery.github.io/rustc-pr-tracking/">PR Tracking</a> provides visualisations of pull requests made to the
<code>rust-lang/rust</code> repository.</li>
<li>kennytm's <a href="https://github.com/kennytm/rustup-toolchain-install-master"><code>rustup-toolchain-install-master</code></a> is a utility to install
the latest generated artifacts from CI into <code>rustup</code>.</li>
</ul>
<h1><a class="header" href="#beta-backporting" id="beta-backporting">Beta Backporting</a></h1>
<p>There's a steady trickle of patches that need to be ported to the beta branch.
Only a few people are even aware of the process, but this is actually something
anybody can do.</p>
<h2><a class="header" href="#backporting-in-rust-langrust" id="backporting-in-rust-langrust">Backporting in <code>rust-lang/rust</code></a></h2>
<p>When somebody identifies a PR that should be backported to beta they tag it
<a href="https://github.com/rust-lang/rust/pulls?q=is%3Apr+is%3Aclosed+label%3Abeta-nominated"><code>beta-nominated</code></a>.
That means they want one of the teams to evaluate whether the patch should be
backported. I also suggest applying the <code>I-nominated</code> and and a <code>T-</code> (team) tag
as appropriate: that'll <em>really</em> get their attention. Anybody with triage access
is free to make these tags. Backports are mostly done to fix regressions. If the
team thinks it should be backported they'll then additionally tag it
<a href="https://github.com/rust-lang/rust/pulls?q=is%3Apr+is%3Aclosed+label%3Abeta-accepted"><code>beta-accepted</code></a>.</p>
<p>At that point the PR is ready to be backported. So the list of patches ready for
a backport is those tagged
<a href="https://github.com/rust-lang/rust/pulls?q=is%3Apr+label%3Abeta-accepted+is%3Aclosed+label%3Abeta-nominated">both <code>beta-nominated</code> and <code>beta-accepted</code></a>.</p>
<p>So now somebody needs to go through those PR's and cherry-pick their commits to
the beta branch. Those cherry-picks are then submitted as a PR <em>against the
beta branch</em>, with a title started with <code>[beta]</code> (so reviewers can see its
specialness). The OP of that PR should contain links to all the PRs being
backported. <a href="https://github.com/rust-lang/rust/pull/64097">Here's an example</a>.
Anybody can make these PRs!</p>
<p>After that a reviewer needs to verify that the backport looks correct, that it's
submitted to the beta branch, and then approve via <code>@bors: r+</code>. Finally, they
need to follow the links to the original PRs and <em>remove the <code>beta-nominated</code>
tag</em> (people forget to do this a lot). This last step indicates that the
backport has been completed, so the <code>beta-nominated</code> and <code>beta-accepted</code> tags
have three states.</p>
<h2><a class="header" href="#backporting-in-rust-langcargo" id="backporting-in-rust-langcargo">Backporting in <code>rust-lang/cargo</code></a></h2>
<p>The procedure for backporting fixes to Cargo is similar but slightly more
extended than the <code>rust-lang/rust</code> repo's procedure. Currently there aren't
backport tags in the Cargo repository, but you'll initiate the backport process
by commenting on an associated PR, requesting a backport. Once a Cargo team
member has approved the backport to happen you're good to start sending PRs!</p>
<ul>
<li>
<p>First you'll send a PR to the <code>rust-1.21.0</code> branch of Cargo (replace 1.21 with
the current rustc beta version number). Like with <code>rust-lang/rust</code> you'll
prefix the title of your PR with <code>[beta]</code> and ensure it's flagged as going to
beta.</p>
</li>
<li>
<p>Next a Cargo reviewer will <code>@bors: r+</code> the PR and put it into the queue.
Eventually bors will automatically merge the PR (when tests are passing) to
the appropriate Cargo branch.</p>
</li>
<li>
<p>Finally you'll send a PR to the <code>rust-lang/rust</code> repository's <code>beta</code> branch,
updating the Cargo submodule. The Cargo submodule should be updated to the tip
of the <code>rust-1.21.0</code> branch (the branch your Cargo PR was merged to). As like
before, ensure you've got <code>[beta]</code> in the PR title.</p>
</li>
</ul>
<p>After that's all said and done the Cargo change is ready to get scheduled onto
the beta release!</p>
<h1><a class="header" href="#rust-platform-support" id="rust-platform-support">Rust Platform Support</a></h1>
<p>The Rust compiler runs on, and compiles to, a great number of platforms, though
not all platforms are equally supported. Rust's support levels are organized
into three tiers, each with a different set of guarantees.</p>
<p>Platforms are identified by their &quot;target triple&quot; which is the string to inform
the compiler what kind of output should be produced. The columns below indicate
whether the corresponding component works on the specified platform.</p>
<h2><a class="header" href="#tier-1" id="tier-1">Tier 1</a></h2>
<p>Tier 1 platforms can be thought of as &quot;guaranteed to work&quot;.
Specifically they will each satisfy the following requirements:</p>
<ul>
<li>Official binary releases are provided for the platform.</li>
<li>Automated testing is set up to run tests for the platform.</li>
<li>Landing changes to the <code>rust-lang/rust</code> repository's master branch is gated on
tests passing.</li>
<li>Documentation for how to use and how to build the platform is available.</li>
</ul>
<table><thead><tr><th>target</th><th>std</th><th>rustc</th><th>cargo</th><th>notes</th></tr></thead><tbody>
<tr><td><code>i686-pc-windows-gnu</code></td><td>✓</td><td>✓</td><td>✓</td><td>32-bit MinGW (Windows 7+)</td></tr>
<tr><td><code>i686-pc-windows-msvc</code></td><td>✓</td><td>✓</td><td>✓</td><td>32-bit MSVC (Windows 7+)</td></tr>
<tr><td><code>i686-unknown-linux-gnu</code></td><td>✓</td><td>✓</td><td>✓</td><td>32-bit Linux (2.6.18+)</td></tr>
<tr><td><code>x86_64-apple-darwin</code></td><td>✓</td><td>✓</td><td>✓</td><td>64-bit OSX (10.7+, Lion+)</td></tr>
<tr><td><code>x86_64-pc-windows-gnu</code></td><td>✓</td><td>✓</td><td>✓</td><td>64-bit MinGW (Windows 7+)</td></tr>
<tr><td><code>x86_64-pc-windows-msvc</code></td><td>✓</td><td>✓</td><td>✓</td><td>64-bit MSVC (Windows 7+)</td></tr>
<tr><td><code>x86_64-unknown-linux-gnu</code></td><td>✓</td><td>✓</td><td>✓</td><td>64-bit Linux (2.6.18+)</td></tr>
</tbody></table>
<h2><a class="header" href="#tier-2" id="tier-2">Tier 2</a></h2>
<p>Tier 2 platforms can be thought of as &quot;guaranteed to build&quot;. Automated tests
are not run so it's not guaranteed to produce a working build, but platforms
often work to quite a good degree and patches are always welcome!
Specifically, these platforms are required to have each of the following:</p>
<ul>
<li>Official binary releases are provided for the platform.</li>
<li>Automated building is set up, but may not be running tests.</li>
<li>Landing changes to the <code>rust-lang/rust</code> repository's master branch is gated on
platforms <strong>building</strong>. For some platforms only the standard library is
compiled, but for others <code>rustc</code> and <code>cargo</code> are too.</li>
</ul>
<table><thead><tr><th>target</th><th>std</th><th>rustc</th><th>cargo</th><th>notes</th></tr></thead><tbody>
<tr><td><code>aarch64-apple-ios</code></td><td>✓</td><td></td><td></td><td>ARM64 iOS</td></tr>
<tr><td><code>aarch64-fuchsia</code></td><td>✓</td><td></td><td></td><td>ARM64 Fuchsia</td></tr>
<tr><td><code>aarch64-linux-android</code></td><td>✓</td><td></td><td></td><td>ARM64 Android</td></tr>
<tr><td><code>aarch64-pc-windows-msvc</code></td><td>✓</td><td></td><td></td><td>ARM64 Windows MSVC</td></tr>
<tr><td><code>aarch64-unknown-linux-gnu</code></td><td>✓</td><td>✓</td><td>✓</td><td>ARM64 Linux</td></tr>
<tr><td><code>aarch64-unknown-linux-musl</code></td><td>✓</td><td></td><td></td><td>ARM64 Linux with MUSL</td></tr>
<tr><td><code>arm-linux-androideabi</code></td><td>✓</td><td></td><td></td><td>ARMv7 Android</td></tr>
<tr><td><code>arm-unknown-linux-gnueabi</code></td><td>✓</td><td>✓</td><td>✓</td><td>ARMv6 Linux</td></tr>
<tr><td><code>arm-unknown-linux-gnueabihf</code></td><td>✓</td><td>✓</td><td>✓</td><td>ARMv6 Linux, hardfloat</td></tr>
<tr><td><code>arm-unknown-linux-musleabi</code></td><td>✓</td><td></td><td></td><td>ARMv6 Linux with MUSL</td></tr>
<tr><td><code>arm-unknown-linux-musleabihf</code></td><td>✓</td><td></td><td></td><td>ARMv6 Linux with MUSL, hardfloat</td></tr>
<tr><td><code>armebv7r-none-eabi</code></td><td>*</td><td></td><td></td><td>Bare ARMv7-R, Big Endian</td></tr>
<tr><td><code>armebv7r-none-eabihf</code></td><td>*</td><td></td><td></td><td>Bare ARMv7-R, Big Endian, hardfloat</td></tr>
<tr><td><code>armv5te-unknown-linux-gnueabi</code></td><td>✓</td><td></td><td></td><td>ARMv5TE Linux</td></tr>
<tr><td><code>armv5te-unknown-linux-musleabi</code></td><td>✓</td><td></td><td></td><td>ARMv5TE Linux with MUSL</td></tr>
<tr><td><code>armv7-linux-androideabi</code></td><td>✓</td><td></td><td></td><td>ARMv7a Android</td></tr>
<tr><td><code>armv7a-none-eabi</code></td><td>*</td><td></td><td></td><td>Bare ARMv7-A</td></tr>
<tr><td><code>armv7r-none-eabi</code></td><td>*</td><td></td><td></td><td>Bare ARMv7-R</td></tr>
<tr><td><code>armv7r-none-eabihf</code></td><td>*</td><td></td><td></td><td>Bare ARMv7-R, hardfloat</td></tr>
<tr><td><code>armv7-unknown-linux-gnueabihf</code></td><td>✓</td><td>✓</td><td>✓</td><td>ARMv7 Linux</td></tr>
<tr><td><code>armv7-unknown-linux-musleabihf</code></td><td>✓</td><td></td><td></td><td>ARMv7 Linux with MUSL</td></tr>
<tr><td><code>asmjs-unknown-emscripten</code></td><td>✓</td><td></td><td></td><td>asm.js via Emscripten</td></tr>
<tr><td><code>i586-pc-windows-msvc</code></td><td>✓</td><td></td><td></td><td>32-bit Windows w/o SSE</td></tr>
<tr><td><code>i586-unknown-linux-gnu</code></td><td>✓</td><td></td><td></td><td>32-bit Linux w/o SSE</td></tr>
<tr><td><code>i586-unknown-linux-musl</code></td><td>✓</td><td></td><td></td><td>32-bit Linux w/o SSE, MUSL</td></tr>
<tr><td><code>i686-linux-android</code></td><td>✓</td><td></td><td></td><td>32-bit x86 Android</td></tr>
<tr><td><code>i686-unknown-freebsd</code></td><td>✓</td><td>✓</td><td>✓</td><td>32-bit FreeBSD</td></tr>
<tr><td><code>i686-unknown-linux-musl</code></td><td>✓</td><td></td><td></td><td>32-bit Linux with MUSL</td></tr>
<tr><td><code>mips-unknown-linux-gnu</code></td><td>✓</td><td>✓</td><td>✓</td><td>MIPS Linux</td></tr>
<tr><td><code>mips-unknown-linux-musl</code></td><td>✓</td><td></td><td></td><td>MIPS Linux with MUSL</td></tr>
<tr><td><code>mips64-unknown-linux-gnuabi64</code></td><td>✓</td><td>✓</td><td>✓</td><td>MIPS64 Linux, n64 ABI</td></tr>
<tr><td><code>mips64el-unknown-linux-gnuabi64</code></td><td>✓</td><td>✓</td><td>✓</td><td>MIPS64 (LE) Linux, n64 ABI</td></tr>
<tr><td><code>mipsel-unknown-linux-gnu</code></td><td>✓</td><td>✓</td><td>✓</td><td>MIPS (LE) Linux</td></tr>
<tr><td><code>mipsel-unknown-linux-musl</code></td><td>✓</td><td></td><td></td><td>MIPS (LE) Linux with MUSL</td></tr>
<tr><td><code>powerpc-unknown-linux-gnu</code></td><td>✓</td><td>✓</td><td>✓</td><td>PowerPC Linux</td></tr>
<tr><td><code>powerpc64-unknown-linux-gnu</code></td><td>✓</td><td>✓</td><td>✓</td><td>PPC64 Linux</td></tr>
<tr><td><code>powerpc64le-unknown-linux-gnu</code></td><td>✓</td><td>✓</td><td>✓</td><td>PPC64LE Linux</td></tr>
<tr><td><code>riscv32imac-unknown-none-elf</code></td><td>*</td><td></td><td></td><td>Bare RISC-V (RV32IMAC ISA)</td></tr>
<tr><td><code>riscv32imc-unknown-none-elf</code></td><td>*</td><td></td><td></td><td>Bare RISC-V (RV32IMC ISA)</td></tr>
<tr><td><code>riscv64gc-unknown-none-elf</code></td><td>*</td><td></td><td></td><td>Bare RISC-V (RV64IMAFDC ISA)</td></tr>
<tr><td><code>riscv64imac-unknown-none-elf</code></td><td>*</td><td></td><td></td><td>Bare RISC-V (RV64IMAC ISA)</td></tr>
<tr><td><code>s390x-unknown-linux-gnu</code></td><td>✓</td><td>✓</td><td>✓</td><td>S390x Linux</td></tr>
<tr><td><code>sparc64-unknown-linux-gnu</code></td><td>✓</td><td></td><td></td><td>SPARC Linux</td></tr>
<tr><td><code>sparcv9-sun-solaris</code></td><td>✓</td><td></td><td></td><td>SPARC Solaris 10/11, illumos</td></tr>
<tr><td><code>thumbv6m-none-eabi</code></td><td>*</td><td></td><td></td><td>Bare Cortex-M0, M0+, M1</td></tr>
<tr><td><code>thumbv7em-none-eabi</code></td><td>*</td><td></td><td></td><td>Bare Cortex-M4, M7</td></tr>
<tr><td><code>thumbv7em-none-eabihf</code></td><td>*</td><td></td><td></td><td>Bare Cortex-M4F, M7F, FPU, hardfloat</td></tr>
<tr><td><code>thumbv7m-none-eabi</code></td><td>*</td><td></td><td></td><td>Bare Cortex-M3</td></tr>
<tr><td><code>thumbv7neon-linux-androideabi</code></td><td>✓</td><td></td><td></td><td>Thumb2-mode ARMv7a Android with NEON</td></tr>
<tr><td><code>thumbv7neon-unknown-linux-gnueabihf</code></td><td>✓</td><td></td><td></td><td>Thumb2-mode ARMv7a Linux with NEON</td></tr>
<tr><td><code>wasm32-unknown-emscripten</code></td><td>✓</td><td></td><td></td><td>WebAssembly via Emscripten</td></tr>
<tr><td><code>wasm32-unknown-unknown</code></td><td>✓</td><td></td><td></td><td>WebAssembly</td></tr>
<tr><td><code>wasm32-wasi</code></td><td>✓</td><td></td><td></td><td>WebAssembly with WASI</td></tr>
<tr><td><code>x86_64-apple-ios</code></td><td>✓</td><td></td><td></td><td>64-bit x86 iOS</td></tr>
<tr><td><code>x86_64-fortanix-unknown-sgx</code></td><td>✓</td><td></td><td></td><td><a href="https://edp.fortanix.com/">Fortanix ABI</a> for 64-bit Intel SGX</td></tr>
<tr><td><code>x86_64-fuchsia</code></td><td>✓</td><td></td><td></td><td>64-bit Fuchsia</td></tr>
<tr><td><code>x86_64-linux-android</code></td><td>✓</td><td></td><td></td><td>64-bit x86 Android</td></tr>
<tr><td><code>x86_64-rumprun-netbsd</code></td><td>✓</td><td></td><td></td><td>64-bit NetBSD Rump Kernel</td></tr>
<tr><td><code>x86_64-sun-solaris</code></td><td>✓</td><td></td><td></td><td>64-bit Solaris 10/11, illumos</td></tr>
<tr><td><code>x86_64-unknown-cloudabi</code></td><td>✓</td><td></td><td></td><td>64-bit CloudABI</td></tr>
<tr><td><code>x86_64-unknown-freebsd</code></td><td>✓</td><td>✓</td><td>✓</td><td>64-bit FreeBSD</td></tr>
<tr><td><code>x86_64-unknown-linux-gnux32</code></td><td>✓</td><td></td><td></td><td>64-bit Linux (x32 ABI)</td></tr>
<tr><td><code>x86_64-unknown-linux-musl</code></td><td>✓</td><td>✓</td><td>✓</td><td>64-bit Linux with MUSL</td></tr>
<tr><td><code>x86_64-unknown-netbsd</code></td><td>✓</td><td>✓</td><td>✓</td><td>NetBSD/amd64</td></tr>
<tr><td><code>x86_64-unknown-redox</code></td><td>✓</td><td></td><td></td><td>Redox OS</td></tr>
</tbody></table>
<h2><a class="header" href="#tier-25" id="tier-25">Tier 2.5</a></h2>
<p>Tier 2.5 platforms can be thought of as &quot;guaranteed to build&quot;, but without
builds available through <code>rustup</code>. Automated tests are not run so it's not
guaranteed to produce a working build, but platforms often work to quite a good
degree and patches are always welcome! Specifically, these platforms are
required to have each of the following:</p>
<ul>
<li>Automated building is set up, but may not be running tests.</li>
<li>Landing changes to the <code>rust-lang/rust</code> repository's master branch is gated on
platforms <strong>building</strong>. For some platforms only the standard library is
compiled, but for others <code>rustc</code> and <code>cargo</code> are too.</li>
</ul>
<p><strong>This status is accidental: no new platforms should reach this state</strong></p>
<table><thead><tr><th>target</th><th>std</th><th>rustc</th><th>cargo</th><th>notes</th></tr></thead><tbody>
<tr><td><code>aarch64-unknown-cloudabi</code></td><td>✓</td><td></td><td></td><td>ARM64 CloudABI</td></tr>
<tr><td><code>armv7-unknown-cloudabi-eabihf</code></td><td>✓</td><td></td><td></td><td>ARMv7 CloudABI, hardfloat</td></tr>
<tr><td><code>i686-unknown-cloudabi</code></td><td>✓</td><td></td><td></td><td>32-bit CloudABI</td></tr>
<tr><td><code>powerpc-unknown-linux-gnuspe</code></td><td>✓</td><td></td><td></td><td>PowerPC SPE Linux</td></tr>
<tr><td><code>sparc-unknown-linux-gnu</code></td><td>✓</td><td></td><td></td><td>32-bit SPARC Linux</td></tr>
</tbody></table>
<h2><a class="header" href="#tier-3" id="tier-3">Tier 3</a></h2>
<p>Tier 3 platforms are those which the Rust codebase has support for, but which
are not built or tested automatically, and may not work. Official builds are
not available.</p>
<table><thead><tr><th>target</th><th>std</th><th>rustc</th><th>cargo</th><th>notes</th></tr></thead><tbody>
<tr><td><code>aarch64-unknown-freebsd</code></td><td>✓</td><td>✓</td><td>✓</td><td>ARM64 FreeBSD</td></tr>
<tr><td><code>aarch64-unknown-hermit</code></td><td>?</td><td></td><td></td><td></td></tr>
<tr><td><code>aarch64-unknown-netbsd</code></td><td>?</td><td></td><td></td><td></td></tr>
<tr><td><code>aarch64-unknown-none</code></td><td>?</td><td></td><td></td><td></td></tr>
<tr><td><code>aarch64-unknown-openbsd</code></td><td>✓</td><td>✓</td><td>✓</td><td>ARM64 OpenBSD</td></tr>
<tr><td><code>aarch64-unknown-redox</code></td><td>?</td><td></td><td></td><td></td></tr>
<tr><td><code>aarch64-uwp-windows-msvc</code></td><td>?</td><td></td><td></td><td></td></tr>
<tr><td><code>aarch64-wrs-vxworks</code></td><td>?</td><td></td><td></td><td></td></tr>
<tr><td><code>armv4t-unknown-linux-gnueabi</code></td><td>?</td><td></td><td></td><td></td></tr>
<tr><td><code>armv6-unknown-freebsd</code></td><td>✓</td><td>✓</td><td>✓</td><td>ARMv6 FreeBSD</td></tr>
<tr><td><code>armv6-unknown-netbsd-eabihf</code></td><td>?</td><td></td><td></td><td></td></tr>
<tr><td><code>armv7-apple-ios</code></td><td>✓</td><td></td><td></td><td>RMv7 iOS, Cortex-</td></tr>
<tr><td><code>armv7-unknown-freebsd</code></td><td>✓</td><td>✓</td><td>✓</td><td>ARMv7 FreeBSD</td></tr>
<tr><td><code>armv7-unknown-netbsd-eabihf</code></td><td>?</td><td></td><td></td><td></td></tr>
<tr><td><code>armv7-wrs-vxworks-eabihf</code></td><td>?</td><td></td><td></td><td></td></tr>
<tr><td><code>armv7s-apple-ios</code></td><td>✓</td><td></td><td></td><td></td></tr>
<tr><td><code>hexagon-unknown-linux-musl</code></td><td>?</td><td></td><td></td><td></td></tr>
<tr><td><code>i386-apple-ios</code></td><td>✓</td><td></td><td></td><td>32-bit x86 iOS</td></tr>
<tr><td><code>i686-apple-darwin</code></td><td>✓</td><td>✓</td><td>✓</td><td>32-bit OSX (10.7+, Lion+)</td></tr>
<tr><td><code>i686-pc-windows-msvc</code></td><td>✓</td><td></td><td></td><td>32-bit Windows XP support</td></tr>
<tr><td><code>i686-unknown-haiku</code></td><td>✓</td><td>✓</td><td>✓</td><td>32-bit Haiku</td></tr>
<tr><td><code>i686-unknown-netbsd</code></td><td>✓</td><td></td><td></td><td>NetBSD/i386 with SSE2</td></tr>
<tr><td><code>i686-unknown-openbsd</code></td><td>✓</td><td>✓</td><td>✓</td><td>32-bit OpenBSD</td></tr>
<tr><td><code>i686-uwp-windows-gnu</code></td><td>?</td><td></td><td></td><td></td></tr>
<tr><td><code>i686-uwp-windows-msvc</code></td><td>?</td><td></td><td></td><td></td></tr>
<tr><td><code>i686-wrs-vxworks</code></td><td>?</td><td></td><td></td><td></td></tr>
<tr><td><code>mips-unknown-linux-uclibc</code></td><td>✓</td><td></td><td></td><td>MIPS Linux with uClibc</td></tr>
<tr><td><code>mips64-unknown-linux-muslabi64</code></td><td>?</td><td></td><td></td><td></td></tr>
<tr><td><code>mips64el-unknown-linux-muslabi64</code></td><td>?</td><td></td><td></td><td></td></tr>
<tr><td><code>mipsel-unknown-linux-uclibc</code></td><td>✓</td><td></td><td></td><td>MIPS (LE) Linux with uClibc</td></tr>
<tr><td><code>mipsisa32r6-unknown-linux-gnu</code></td><td>?</td><td></td><td></td><td></td></tr>
<tr><td><code>mipsisa32r6el-unknown-linux-gnu</code></td><td>?</td><td></td><td></td><td></td></tr>
<tr><td><code>mipsisa64r6-unknown-linux-gnuabi64</code></td><td>?</td><td></td><td></td><td></td></tr>
<tr><td><code>mipsisa64r6el-unknown-linux-gnuabi64</code></td><td>?</td><td></td><td></td><td></td></tr>
<tr><td><code>msp430-none-elf</code></td><td>*</td><td></td><td></td><td>16-bit MSP430 microcontrollers</td></tr>
<tr><td><code>nvptx64-nvidia-cuda</code></td><td>**</td><td></td><td></td><td>--emit=asm generates PTX code that <a href="https://github.com/japaric-archived/nvptx#targets">runs on NVIDIA GPUs</a></td></tr>
<tr><td><code>powerpc-unknown-linux-musl</code></td><td>?</td><td></td><td></td><td></td></tr>
<tr><td><code>powerpc-unknown-netbsd</code></td><td>?</td><td></td><td></td><td></td></tr>
<tr><td><code>powerpc-wrs-vxworks</code></td><td>?</td><td></td><td></td><td></td></tr>
<tr><td><code>powerpc-wrs-vxworks-spe</code></td><td>?</td><td></td><td></td><td></td></tr>
<tr><td><code>powerpc64-unknown-freebsd</code></td><td>✓</td><td>✓</td><td>✓</td><td>PPC64 FreeBSD (ELFv1 and ELFv2)</td></tr>
<tr><td><code>powerpc64-unknown-linux-musl</code></td><td>?</td><td></td><td></td><td></td></tr>
<tr><td><code>powerpc64-wrs-vxworks</code></td><td>?</td><td></td><td></td><td></td></tr>
<tr><td><code>powerpc64le-unknown-linux-musl</code></td><td>?</td><td></td><td></td><td></td></tr>
<tr><td><code>riscv32i-unknown-none-elf</code></td><td>?</td><td></td><td></td><td></td></tr>
<tr><td><code>riscv64gc-unknown-linux-gnu</code></td><td>✓</td><td>✓</td><td>✓</td><td></td></tr>
<tr><td><code>sparc64-unknown-netbsd</code></td><td>✓</td><td>✓</td><td></td><td>NetBSD/sparc64</td></tr>
<tr><td><code>sparc64-unknown-openbsd</code></td><td>?</td><td></td><td></td><td></td></tr>
<tr><td><code>thumbv7a-pc-windows-msvc</code></td><td>?</td><td></td><td></td><td></td></tr>
<tr><td><code>thumbv8m.base-none-eabi</code></td><td>?</td><td></td><td></td><td></td></tr>
<tr><td><code>thumbv8m.main-none-eabi</code></td><td>?</td><td></td><td></td><td></td></tr>
<tr><td><code>thumbv8m.main-none-eabihf</code></td><td>?</td><td></td><td></td><td></td></tr>
<tr><td><code>wasm32-experimental-emscripten</code></td><td>?</td><td></td><td></td><td></td></tr>
<tr><td><code>x86_64-pc-solaris</code></td><td>?</td><td></td><td></td><td></td></tr>
<tr><td><code>x86_64-pc-windows-msvc</code></td><td>✓</td><td></td><td></td><td>64-bit Windows XP support</td></tr>
<tr><td><code>x86_64-unknown-bitrig</code></td><td>✓</td><td>✓</td><td></td><td>64-bit Bitrig</td></tr>
<tr><td><code>x86_64-unknown-dragonfly</code></td><td>✓</td><td>✓</td><td>✓</td><td>64-bit DragonFlyBSD</td></tr>
<tr><td><code>x86_64-unknown-haiku</code></td><td>✓</td><td>✓</td><td>✓</td><td>64-bit Haiku</td></tr>
<tr><td><code>x86_64-unknown-hermit</code></td><td>?</td><td></td><td></td><td></td></tr>
<tr><td><code>x86_64-unknown-l4re-uclibc</code></td><td>?</td><td></td><td></td><td></td></tr>
<tr><td><code>x86_64-unknown-openbsd</code></td><td>✓</td><td>✓</td><td>✓</td><td>64-bit OpenBSD</td></tr>
<tr><td><code>x86_64-unknown-uefi</code></td><td>?</td><td></td><td></td><td></td></tr>
<tr><td><code>x86_64-uwp-windows-gnu</code></td><td>✓</td><td></td><td></td><td></td></tr>
<tr><td><code>x86_64-uwp-windows-msvc</code></td><td>✓</td><td></td><td></td><td></td></tr>
<tr><td><code>x86_64-wrs-vxworks</code></td><td>?</td><td></td><td></td><td></td></tr>
</tbody></table>
<p>* These are bare-metal microcontroller targets that only have access to the
core library, not std.</p>
<p>** There’s backend support for these targets but no target built into rustc
(yet). You’ll have to write your own target specification file (see the
links in the table). These targets only support the core library.</p>
<p>? These are targets that haven't yet been documented here. If you can shed some
light on these platforms support, please create an issue or PR on the <a href="https://github.com/rust-lang/rust-forge">Rust
Forge repo</a>.</p>
<p>But those aren't the only platforms Rust can compile to! Those are the ones with
built-in target definitions and/or standard library support. When linking only
to the core library, Rust can also target additional &quot;bare metal&quot; platforms in
the x86, ARM, MIPS, and PowerPC families, though it may require defining custom
target specifications to do so.</p>
<h1><a class="header" href="#preparing-release-notes" id="preparing-release-notes">Preparing Release Notes</a></h1>
<p>The release notes for the next release should be compiled at the beginning of
the beta cycle, 6 weeks ahead of the release.</p>
<p>Clone the <a href="https://github.com/rust-lang/relnotes">relnotes</a> utility. This program pulls all pull requests made against
<code>rust-lang/rust</code> and <code>rust-lang/cargo</code> within the latest release cycle and
prints out a markdown document containing all the pull requests, categorised
into their respective sections where possible, and prints the document to
<code>stdout</code>.</p>
<p>Only pull requests that impact stable users of Rust should be included.
Generally, more exciting items go toward the top of sections. Most items are
simply links to the PR that landed them; some that need more explanation have
additional, unlinked text; anything supported by an RFC has an additional RFC
link. Reuse the PR titles or write descriptions as needed for clarity.</p>
<p>Try to keep the language of the document independent of en-US or en-UK, when it
can't be avoided defer to en-US grammar and syntax.</p>
<h1><a class="header" href="#the-rust-release-process" id="the-rust-release-process">The Rust Release Process</a></h1>
<p>Here's how Rust is currently released:</p>
<h2><a class="header" href="#promote-beta-to-stable-t-3-days-monday" id="promote-beta-to-stable-t-3-days-monday">Promote beta to stable (T-3 days, Monday)</a></h2>
<p>Promote beta to stable. Temporarily turn off GitHub branch protection for the
<code>stable</code> branch in rust-lang/rust repo. In your local Rust repo:</p>
<pre><code class="language-sh">$ git fetch origin
$ git push origin origin/beta:stable -f
# make sure that the release notes file is as fresh as possible
$ git checkout origin/master -- RELEASES.md
</code></pre>
<p>Re-enable branch protection for the <code>stable</code> branch. Send a PR to rust-lang/rust
on the stable branch making the following changes:</p>
<ul>
<li>Update <code>src/ci/run.sh</code> to pass <code>channel=stable</code>, not <code>channel=beta</code>.</li>
</ul>
<p>Once the PR is sent, r+ it and give it a high <code>p=1000</code>.</p>
<p>The stable build will <strong>not</strong> deploy automatically to prod. The
rust-central-station repository is configured to upload to <strong>dev</strong> every hour if
it detects a change. You should be able to browse changes in dev.</p>
<p>As soon as this build is done post a message to irlo asking for testing. The
index is
https://dev-static-rust-lang-org.s3.amazonaws.com/dist/2015-09-17/index.html and
our URL is then https://dev-static.rust-lang.org/dist/2015-09-17/index.html.</p>
<p>Test rustup with</p>
<pre><code class="language-sh">RUSTUP_DIST_SERVER=https://dev-static.rust-lang.org rustup update stable
</code></pre>
<p>If something goes wrong, and we rebuild stable artifacts, you'll need to
invalidate the dev-static bucket for RCS to re-release it.</p>
<ol>
<li>Download https://dev-static.rust-lang/dist/channel-rust-1.35.0.toml The
version number must be less than the current release, but otherwise doesn't
matter.</li>
<li>Rename the file locally to channel-rust-stable.toml</li>
<li>Upload the file to the dev-static bucket into the dist folder, replacing
channel-rust-stable.toml.</li>
<li>Go to CloudFront in AWS, to the dev-static bucket, and issue an invalidation
for &quot;/dist/channel-rust-stable.toml&quot;. This is necessary until
https://github.com/rust-lang/rust-central-station/issues/49 is fixed.</li>
<li>(optional) login to central station, and run the following. This starts the
dev-static promotion immediately, vs. waiting till the next hour.</li>
</ol>
<pre><code class="language-bash">docker exec -d -it rcs bash -c 'promote-release /tmp/stable stable /data/secrets-dev.toml 2&gt;&amp;1 | logger --tag release-stable'
</code></pre>
<h2><a class="header" href="#promote-master-to-beta-t-2-days-tuesday" id="promote-master-to-beta-t-2-days-tuesday">Promote master to beta (T-2 days, Tuesday)</a></h2>
<p>Create a new branch on <code>rust-lang/cargo</code> for the new beta. Here, <code>rust-lang</code> is
the remote for https://github.com/rust-lang/rust.git. Replace <code>YY</code> with the
minor version of master. First determine the branch point for cargo in
<code>rust-lang/rust</code>, and then create a new branch:</p>
<pre><code class="language-sh">$ cd rust
$ git fetch rust-lang
$ CARGO_SHA=`git rev-parse rust-lang/master:src/tools/cargo`
$ cd src/tools/cargo
$ git branch rust-1.YY.0 $CARGO_SHA
$ git push origin rust-1.YY.0
</code></pre>
<p>You'll need to temporarily disable branch protection on GitHub to push the new
branch.</p>
<p>In theory one day we'll do the same for rust-lang/rls, but for now we haven't
done this yet.</p>
<p>Temporarily disable banch protection on GitHub for the <code>beta</code> branch of the Rust
repo. Promote rust-lang/rust's master branch to beta as with yesterday:</p>
<pre><code class="language-sh">$ git fetch rust-lang
$ git push rust-lang rust-lang/master:beta -f
</code></pre>
<p>Re-enable branch protection on GitHub. Send a PR to the freshly created beta
branch of rust-lang/rust which:</p>
<ul>
<li>Update src/stage0.txt
<ul>
<li>Change <code>date</code> to &quot;YYYY-MM-DD&quot; where the date is the archive date the stable
build was uploaded</li>
<li>Change <code>rustc</code> to &quot;X.Y.Z&quot; where that's the version of rustc you just build</li>
<li>Change <code>cargo</code> to &quot;A.B.C&quot; where it's Cargo's version. That's typically
&quot;0.(Y+1).0&quot; wrt the rustc version.</li>
<li>Comment <code>rustfmt: nightly-YYYY-MM-DD</code></li>
<li>Uncomment <code>dev: 1</code></li>
</ul>
</li>
<li>Update src/ci/run.sh to pass &quot;--release-channel=beta&quot;.</li>
</ul>
<p>Note that you probably don't want to update the RLS if it's working, but if it's
not working beta won't land and it'll need to get updated. After this PR merges
(through @bors) the beta should be automatically released.</p>
<h2><a class="header" href="#master-bootstrap-update-t-1-day-wednesday" id="master-bootstrap-update-t-1-day-wednesday">Master bootstrap update (T-1 day, Wednesday)</a></h2>
<p>Write a new blog post, update rust-www, and update rust-forge. Submit PRs for
tomorrow.</p>
<p>Send a PR to the master branch to:</p>
<ul>
<li>modify src/stage0.txt to bootstrap from yesterday's beta</li>
<li>modify src/bootstrap/channel.rs with the new version number</li>
</ul>
<h2><a class="header" href="#release-day-thursday" id="release-day-thursday">Release day (Thursday)</a></h2>
<p>Decide on a time to do the release, T.</p>
<ul>
<li>
<p><strong>T-30m</strong> - This is on rust-central-station:</p>
<pre><code>docker exec -d -it rcs bash -c 'promote-release /tmp/stable stable /data/secrets.toml 2&gt;&amp;1 | logger --tag release-stable-realz'
</code></pre>
<p>That'll, in the background, schedule the <code>promote-release</code> binary to run on
the production secrets (not the dev secrets). That'll sign everything, upload
it, update the html index pages, and invalidate the CDN. Note that this takes
about 30 minutes right now. Logs are in <code>/opt/rcs/logs</code>.</p>
</li>
<li>
<p><strong>T-10m</strong> - Locally, tag the new release and upload it. Use &quot;x.y.z release&quot; as
the commit message.</p>
<pre><code class="language-sh">$ git tag -u FA1BE5FE 1.3.0 $COMMIT_SHA
$ git push rust-lang 1.3.0
</code></pre>
<p>After this <a href="https://travis-ci.com/rust-lang/thanks">Update thanks.rust-lang.org</a> by triggering a build
on Travis.</p>
</li>
<li>
<p><strong>T-5m</strong> - Merge blog post.</p>
</li>
<li>
<p><strong>T</strong> - Tweet and post everything!</p>
<ul>
<li>Twitter <a href="https://twitter.com/rustlang">@rustlang</a></li>
<li>Reddit <a href="https://www.reddit.com/r/rust/">/r/rust</a></li>
<li><a href="https://news.ycombinator.com/">Hacker News</a></li>
<li><a href="https://users.rust-lang.org/">Users forum</a></li>
</ul>
</li>
<li>
<p><strong>T+5m</strong> - Tag Cargo the same way as rust-lang/rust and then run
<code>cargo publish</code> for the tag you just created. You'll first need to comment
out <code>cargo-test-macro</code> from Cargo.toml, then publish <code>crates-io</code> (in
<code>crates/crates-io</code>) and finally publish <code>cargo</code> itself.</p>
<p>To publish Cargo you may have to bump the version numbers for the crates-io and Cargo crates; there's no need to do that in a formal commit though, so your tag and the published code may differentiate in that way.</p>
</li>
<li>
<p><strong>T+1hr</strong> Send a PR to the beta branch to comment out <code>dev: 1</code> again and
update the date to download from (modifying <code>src/stage0.txt</code>).</p>
</li>
</ul>
<p>Bask in your success.</p>
<h2><a class="header" href="#update-dependencies-t1-day-friday" id="update-dependencies-t1-day-friday">Update dependencies (T+1 day, Friday)</a></h2>
<p>In the repo:</p>
<pre><code class="language-bash">$ cd src
$ cargo update
</code></pre>
<p>The very ambitious can use https://crates.io/crates/cargo-outdated and update
through breaking changes.</p>
<h2><a class="header" href="#publishing-a-nightly-based-off-a-try-build" id="publishing-a-nightly-based-off-a-try-build">Publishing a nightly based off a try build</a></h2>
<p>Sometimes a PR requires testing how it behaves when downloaded from rustup, for
example after a manifest change. In those cases it's possible to publish a new
nightly based off that PR on dev-static.rust-lang.org.</p>
<p>Once the try build finishes make sure the merge commit for your PR is at the
top of <a href="https://github.com/rust-lang/rust/commits/try">the <code>try</code> branch</a>, log into the rust-central-station server
and run this command:</p>
<pre><code>docker exec -d -it rcs bash -c 'PROMOTE_RELEASE_OVERRIDE_BRANCH=try promote-release /tmp/nightly-tmp nightly /data/secrets-dev.toml 2&gt;&amp;1 | logger --tag release-nightly-tmp'
</code></pre>
<p>If the <code>try</code> branch doesn't contain the merge commit (because a new build
started in the meantime) you can create a new branch pointing to the merge
commit and run (replacing <code>BRANCH_NAME</code> with the name of the branch):</p>
<pre><code>docker exec -d -it rcs bash -c 'PROMOTE_RELEASE_OVERRIDE_BRANCH=BRANCH_NAME promote-release /tmp/nightly-tmp nightly /data/secrets-dev.toml 2&gt;&amp;1 | logger --tag release-nightly-tmp'
</code></pre>
<p>You can follow the build progress with:</p>
<pre><code>sudo tail -n 1000 -f /var/log/syslog | grep release-nightly-tmp
</code></pre>
<p>Once the build ends it's possible to install the new nightly with:</p>
<pre><code>RUSTUP_DIST_SERVER=https://dev-static.rust-lang.org rustup toolchain install nightly
</code></pre>
<h1><a class="header" href="#rollup-procedure" id="rollup-procedure">Rollup Procedure</a></h1>
<h2><a class="header" href="#background" id="background">Background</a></h2>
<p>The Rust project has a policy that every pull request must be tested after merge
before it can be pushed to master. As PR volume increases this can scale poorly,
especially given the long (~3.5hr) current CI duration for Rust.</p>
<p>Enter rollups - changes that small, not performance sensitive, or not platform
dependent are marked with the <code>rollup</code> command to bors (<code>@bors r+ rollup</code> to
approve a PR and mark as a rollup, <code>@bors rollup</code> to mark a previously approved
PR, <code>@bors rollup-</code> to un-mark as a rollup).  'Performing a Rollup' then means
collecting these changes into one PR and merging them all at once. The rollup
command accepts three values <code>always</code>, <code>maybe</code>, and <code>never</code>. <code>@bors rollup</code> is
equivalent to <code>rollup=always</code> (which will indicate that a PR should always be
included in a rollup), and <code>@bors rollup-</code> is equivalent to <code>@bors rollup=maybe</code>
which is used to indicate that someone should try rollup the PR. <code>rollup=never</code>
indicates that a PR should never be included in a rollup, this should generally
only be used for PRs which are large additions or changes which could cause
breakage or large perf changes.</p>
<p>You can see the list of rollup PRs on Rust's <a href="https://buildbot2.rust-lang.org/homu/queue/rust">Homu queue</a>, they are
listed at the bottom of the 'approved' queue with a priority of 'rollup' meaning
they will not be merged by themselves until everything in front of them in the
queue has been merged.</p>
<h2><a class="header" href="#making-a-rollup" id="making-a-rollup">Making a Rollup</a></h2>
<ol>
<li>Using the interface on <a href="https://buildbot2.rust-lang.org/homu/queue/rust">Homu queue</a>, select a few pull requests and then use
&quot;rollup&quot; button to make one. (The text about fairness can be ignored.)</li>
<li>Use the <code>@bors r+ rollup=never p=&lt;NUMBER_OF_PRS_IN_ROLLUP&gt;</code> command in the
pull request thread.</li>
<li>Mark the pull request with the label <code>rollup</code>.</li>
<li>If the rollup fails, use the logs rust-highfive (really it is
rust-log-analyzer) provides to bisect the failure to a specific PR and do
<code>@bors r-</code>. If the PR is running, you need to do <code>@bors r- retry</code>. Otherwise,
your rollup succeeded. If it did, proceed to the next rollup (every now and
then let <code>rollup=never</code> and toolstate PRs progress).</li>
<li>Recreate the rollup without the offending PR starting again from <strong>1.</strong></li>
</ol>
<h2><a class="header" href="#selecting-pull-requests" id="selecting-pull-requests">Selecting Pull Requests</a></h2>
<p>This is something you will learn to improve over time. Some basic tips include
(from obvious to less):</p>
<ol>
<li>Avoid <code>rollup=never</code> PRs (these are red in the interface).</li>
<li>Include all PRs marked with <code>rollup=always</code> (these are green). Try to check
if some of the pull requests in this list shouldn't be rolled up — in the
interest of time you can do so sometimes after you've made the rollup PR.</li>
<li>Avoid pull requests that touch the CI configuration or bootstrap.
(Unless the CI PRs have been marked as <code>rollup</code>. -- see 2.)</li>
<li>Avoid having too many large diff pull requests in the same rollup.</li>
<li>Avoid having too many submodule updates in the same rollup (especially LLVM).
(Updating LLVM frequently forces most devs to rebuild LLVM which is not fun.)</li>
<li>Do not include toolstate PRs like those fixing Miri, Clippy, etc.</li>
<li>Do include docs PRs (they should hopefully be marked as green).</li>
</ol>
<h2><a class="header" href="#failed-rollups" id="failed-rollups">Failed rollups</a></h2>
<p>If the rollup has failed, run the <code>@bors retry</code> command if the
failure was spurious (e.g. due to a network problem or a timeout). If it wasn't spurious,
find the offending PR and throw it out by copying a link to the rust-highfive comment,
and writing <code>Failed in &lt;link_to_comment&gt;, @bors r-</code>. Hopefully,
the author or reviewer will give feedback to get the PR fixed or confirm that it's not
at fault.</p>
<p>Once you've removed the offending PR, re-create your rollup without it (see 1.).
Sometimes however, it is hard to find the offending PR. If so, use your intuition
to avoid the PRs that you suspect are the problem and recreate the rollup.
Another strategy is to raise the priority of the PRs you suspect,
mark them as <code>rollup=never</code> and let bors test them standalone to dismiss
or confirm your hypothesis.</p>
<p>If a rollup continues to fail you can run the <code>@bors rollup=never</code> command to
never rollup the PR in question.</p>
<h1><a class="header" href="#triage-procedure" id="triage-procedure">Triage Procedure</a></h1>
<h2><a class="header" href="#pull-request-triage" id="pull-request-triage">Pull Request Triage</a></h2>
<h3><a class="header" href="#status-tags" id="status-tags">Status Tags</a></h3>
<ul>
<li><a href="https://github.com/rust-lang/rust/pulls?q=is%3Aopen+is%3Apr+sort%3Aupdated-asc+label%3AS-waiting-on-author+-label%3AI-nominated+-label%3Aneeds-fcp">S-waiting-on-author</a> - Author needs to make changes to address reviewer
comments, or merge conflicts/test failures are present. This also covers more
obscure cases, like a PR being blocked on another, or waiting for a <a href="https://github.com/rust-lang-nursery/crater">crater</a>
run -- it is the author's responsibility to push the PR forward.</li>
<li><a href="https://github.com/rust-lang/rust/pulls?q=is%3Aopen+is%3Apr+sort%3Aupdated-asc+label%3AS-waiting-on-review+-label%3AI-nominated+-label%3Aneeds-fcp">S-waiting-on-review</a> - Review is incomplete</li>
<li><a href="https://github.com/rust-lang/rust/pulls?q=is%3Aopen+is%3Apr+label%3AS-waiting-on-team+sort%3Aupdated-desc">S-waiting-on-team</a> - A T- label is marked, and team has been cc-ed for
feedback.</li>
<li><a href="https://github.com/rust-lang/rust/pulls?q=is%3Aopen+is%3Apr+label%3AS-waiting-on-bors+sort%3Aupdated-asc">S-waiting-on-bors</a> - Currently approved, waiting to merge. Managed by <a href="https://github.com/rust-lang/homu">Bors</a>.</li>
<li><a href="https://github.com/rust-lang/rust/pulls?q=is%3Aopen+is%3Apr+label%3AS-waiting-on-crater+sort%3Aupdated-asc">S-waiting-on-crater</a> - Waiting to see what the impact the PR will have on the
ecosystem</li>
<li><a href="https://github.com/rust-lang/rust/pulls?q=is%3Aopen+is%3Apr+label%3AS-waiting-on-bikeshed+sort%3Aupdated-asc">S-waiting-on-bikeshed</a> - Waiting on the consensus over a minor detail</li>
<li><a href="https://github.com/rust-lang/rust/pulls?q=is%3Aopen+is%3Apr+label%3AS-waiting-on-perf+sort%3Aupdated-asc">S-waiting-on-perf</a> - Waiting on the results of a perf run</li>
<li><a href="https://github.com/rust-lang/rust/pulls?q=is%3Aopen+is%3Apr+label%3AS-blocked+sort%3Aupdated-asc">S-blocked</a> - Waiting for another PR to be merged or for discussion to be
resolved</li>
<li><a href="https://github.com/rust-lang/rust/pulls?q=is%3Apr+label%3AS-blocked-closed+sort%3Aupdated-asc">S-blocked-closed</a> - Closed because resolving the block is expected to take a
long time</li>
<li><a href="https://github.com/rust-lang/rust/pulls?q=is%3Apr+label%3AS-inactive-closed+sort%3Aupdated-asc">S-inactive-closed</a> - Closed due to inactivity.</li>
</ul>
<h3><a class="header" href="#procedure" id="procedure">Procedure</a></h3>
<p><strong>IMPORTANT:</strong> Whenever you do PR triage, please fill out the following form:
<a href="https://goo.gl/forms/YKYVFYjBq28Hm3qQ2">goo.gl/forms/YKYVFYjBq28Hm3qQ2</a>. If you
want to create a bookmark for yourself, you can adapt
<a href="https://docs.google.com/forms/d/e/1FAIpQLSfdcbG9tSX49LuY9h1NCLKb6oU4tGalB3PrkN6yIHHWaptUbw/viewform?entry.1711461865=YOUR_GITHUB_USERNAME">this link</a>
to prefill your GitHub username.</p>
<p><em>Note:</em> When you are pinging people in triage comments, you should mention that
you are doing triage in the comment you post. For example, start your comments
with something like &quot;Ping from triage ...&quot;.&quot;</p>
<p>First ensure that the status tag matches the current state of the PR. Change the
tag if necessary, and apply the procedure for the new tag.</p>
<h4><a class="header" href="#a-hrefhttpsgithubcomrust-langrustpullsqis3aopenis3aprno3aassigneeunassigned-prsa" id="a-hrefhttpsgithubcomrust-langrustpullsqis3aopenis3aprno3aassigneeunassigned-prsa"><a href="https://github.com/rust-lang/rust/pulls?q=is%3Aopen+is%3Apr+no%3Aassignee">Unassigned PRs</a></a></h4>
<p>All PRs that have no assignee (except rollups) should be assigned to a random
member of the responsible team.</p>
<h4><a class="header" href="#a-hrefhttpsgithubcomrust-langrustpullsutf8e29c93qis3aopen20is3apr20sort3aupdated-asc20-label3as-inactive20-label3as-waiting-on-author20-label3as-waiting-on-team20-label3as-waiting-on-bors20-label3as-waiting-on-crater20-label3as-waiting-on-team20-label3as-waiting-on-review20-label3as-blocked20-label3as-waiting-on-bikeshed20-label3as-waiting-on-fcp20-label3as-waiting-on-perfunlabeled-prsa" id="a-hrefhttpsgithubcomrust-langrustpullsutf8e29c93qis3aopen20is3apr20sort3aupdated-asc20-label3as-inactive20-label3as-waiting-on-author20-label3as-waiting-on-team20-label3as-waiting-on-bors20-label3as-waiting-on-crater20-label3as-waiting-on-team20-label3as-waiting-on-review20-label3as-blocked20-label3as-waiting-on-bikeshed20-label3as-waiting-on-fcp20-label3as-waiting-on-perfunlabeled-prsa"><a href="https://github.com/rust-lang/rust/pulls?utf8=%E2%9C%93&amp;q=is%3Aopen%20is%3Apr%20sort%3Aupdated-asc%20-label%3AS-inactive%20-label%3AS-waiting-on-author%20-label%3AS-waiting-on-team%20-label%3AS-waiting-on-bors%20-label%3AS-waiting-on-crater%20-label%3AS-waiting-on-team%20-label%3AS-waiting-on-review%20-label%3AS-blocked%20-label%3AS-waiting-on-bikeshed%20-label%3AS-waiting-on-fcp%20-label%3AS-waiting-on-perf">Unlabeled PRs</a></a></h4>
<p>All unlabeled PRs should be processed. The steps below are not mutually
exclusive, any number of them may apply.</p>
<p>When <strong>no review has happened</strong>, if the PR is a work in progress (e.g., test
failures, merge conflict) mark <code>S-waiting-on-author</code>. Otherwise, mark
<code>S-waiting-on-review</code>. If no human has checked in yet and you don't recognise
the submitter as a regular contributor, leave a comment saying something like
&quot;Thanks for the PR! We’ll periodically check in on it to make sure that
@reviewer or someone else from the team reviews it soon.&quot;</p>
<p>At this point, all PRs must have a tag applied.</p>
<h4><a class="header" href="#a-hrefhttpsgithubcomrust-langrustpullsqis3aopenis3aprsort3aupdated-asclabel3as-waiting-on-author-label3ai-nominated-label3aneeds-fcps-waiting-on-author-prsa" id="a-hrefhttpsgithubcomrust-langrustpullsqis3aopenis3aprsort3aupdated-asclabel3as-waiting-on-author-label3ai-nominated-label3aneeds-fcps-waiting-on-author-prsa"><a href="https://github.com/rust-lang/rust/pulls?q=is%3Aopen+is%3Apr+sort%3Aupdated-asc+label%3AS-waiting-on-author+-label%3AI-nominated+-label%3Aneeds-fcp">S-waiting-on-author PRs</a></a></h4>
<p>PRs with, roughly, more than a week of inactivity need to be processed. These
can be found by looking at the &quot;updated X days ago&quot; on GitHub's PR list.</p>
<p>If the author hasn't responded for more than a week to a request for changes or
a status update, ping the author on GitHub asking for them to check in on the
PR's state. If they've given advance warning that they are unavailable for a
period of time and therefore won't be able to address comments, do not ping
until after that time. It is a good idea to start the message with &quot;Ping from
Triage...&quot; so that the concerned parties know it is coming from the triage team.</p>
<p>If the author has not responded to a previous ping, meaning more than 2 weeks
have passed with no activity, the PR should be closed with a message thanking
the author for their work, asking the them to reopen when they have a chance to
make the necessary changes, and warning them not to push to the PR while it is
closed as that prevents it from being reopened. Tag the PR with
<code>S-inactive-closed</code>.</p>
<p><em>TIP</em>: if an author is unavailable and you know they won't have a chance to come
to a PR for a while, you can 'bump' the PR by removing and readding the tag
(note that removing/readding requires clicking off the tag selection dropdown
between the two actions).</p>
<p>If the PR is blocked on another PR, issue, or some kind of discussion, add a
comment clearly identifying what is blocking the PR (something like &quot;This PR
appears to be blocked on #12345&quot;) and change the state to <code>S-blocked</code>. Follow
the instruction for <code>S-blocked</code> to determine whether you should also close the
PR.</p>
<h4><a class="header" href="#a-hrefhttpsgithubcomrust-langrustpullsqis3aopenis3aprsort3aupdated-asclabel3as-waiting-on-review-label3ai-nominated-label3aneeds-fcps-waiting-on-review-prsa" id="a-hrefhttpsgithubcomrust-langrustpullsqis3aopenis3aprsort3aupdated-asclabel3as-waiting-on-review-label3ai-nominated-label3aneeds-fcps-waiting-on-review-prsa"><a href="https://github.com/rust-lang/rust/pulls?q=is%3Aopen+is%3Apr+sort%3Aupdated-asc+label%3AS-waiting-on-review+-label%3AI-nominated+-label%3Aneeds-fcp">S-waiting-on-review PRs</a></a></h4>
<p>PRs with, roughly, more than a week of inactivity need to be processed. These
can be found by looking at the &quot;updated X days ago&quot; on GitHub's PR list.</p>
<p>If the review is complete the label should be changed from <code>S-waiting-on-review</code>
to <code>S-waiting-on-author</code>.</p>
<p>Otherwise, the reviewer should be pinged. It is a good idea to start the message
with &quot;Ping from Triage...&quot; so that the concerned parties know it is coming from
the triage team, and the message should be asking the reviewer to either review
or update a review of the PR. If the reviewer has already been pinged, meaning
more than 2 weeks have passed with no activity, another reviewer on their team
should be pinged. Note that if the reviewer has expressed that they are busy, do
not ping them until they are available again. If the PR is not already labeled
with a team (<code>T-</code>), find the team assigned to the PR's issue which should have a
<code>T-</code> label.</p>
<p>The <code>r?</code> command is needed to override a reviewer, however not all triagers will
have sufficient permissions. In this case sending a message to the <code>#triage-wg</code>
Discord or pinging @Dylan-DPC will be necessary.</p>
<p>If the PR is blocked on another PR, add a comment clearly identifying the
blocking PR (something like &quot;This PR appears to be blocked on #12345&quot;) and
change the state to <code>S-blocked</code>.</p>
<p>If the pr is tagged with <code>final-comment-period</code> it does not need to be triaged unless the process has stalled for a reasonable period of time. These PRs have a form from RFCbot that looks like:</p>
<blockquote>
<p>Team member <strong>@Donald</strong> has proposed to merge this. The next step is review by the rest of the tagged team members:</p>
<ul>
<li><input disabled="" type="checkbox"/>
@Huey</li>
<li><input disabled="" type="checkbox" checked=""/>
@Dewey</li>
<li><input disabled="" type="checkbox"/>
@Louie</li>
</ul>
</blockquote>
<p>At this point, ping the appropriate people to check their boxes to sign off on the PR.</p>
<p>If <em>this</em> stalls nominate the PR for prioritizing at the next team triage meeting by marking it with <code>I-nominated</code>.</p>
<p>PRs tagged with <code>finshed-final-comment-period</code> are eligible for triage.</p>
<h4><a class="header" href="#a-hrefhttpsgithubcomrust-langrustpullsqis3aopenis3aprlabel3as-waiting-on-teamsort3aupdated-descs-waiting-on-team-prsa" id="a-hrefhttpsgithubcomrust-langrustpullsqis3aopenis3aprlabel3as-waiting-on-teamsort3aupdated-descs-waiting-on-team-prsa"><a href="https://github.com/rust-lang/rust/pulls?q=is%3Aopen+is%3Apr+label%3AS-waiting-on-team+sort%3Aupdated-desc">S-waiting-on-team PRs</a></a></h4>
<p>PRs active within the last 4 days or inactive for greater than 2 weeks need to
be processed. These can be found by looking at the &quot;updated X days ago&quot; on
GitHub's PR list.</p>
<p>First, ensure that the status tag matches the current state of the PR. Change
the tag if necessary, and apply the procedure for the new tag now. Verify that
there is a T- tag for all PRs that remain in this category.</p>
<p>If the PR has been inactive for greater than 2 weeks, add the <code>I-nominated</code>
label and ping the team, requesting a new assignee or other appropriate action.</p>
<p>If there has been recent activity, the team might have taken some action meaning
the state has changed but the label has not yet been updated. Therefore, we also
check the most recent ones.</p>
<h4><a class="header" href="#a-hrefhttpsgithubcomrust-langrustpullsqis3aopenis3aprlabel3as-waiting-on-borssort3aupdated-ascs-waiting-on-bors-prsa" id="a-hrefhttpsgithubcomrust-langrustpullsqis3aopenis3aprlabel3as-waiting-on-borssort3aupdated-ascs-waiting-on-bors-prsa"><a href="https://github.com/rust-lang/rust/pulls?q=is%3Aopen+is%3Apr+label%3AS-waiting-on-bors+sort%3Aupdated-asc">S-waiting-on-bors PRs</a></a></h4>
<p><a href="https://github.com/rust-lang/homu">Bors</a> automatically manages this label but human intervention may be required
if there is an issue.</p>
<h4><a class="header" href="#a-hrefhttpsgithubcomrust-langrustpullsqis3aopenis3aprlabel3as-waiting-on-cratersort3aupdated-ascs-waiting-on-crater-prsa" id="a-hrefhttpsgithubcomrust-langrustpullsqis3aopenis3aprlabel3as-waiting-on-cratersort3aupdated-ascs-waiting-on-crater-prsa"><a href="https://github.com/rust-lang/rust/pulls?q=is%3Aopen+is%3Apr+label%3AS-waiting-on-crater+sort%3Aupdated-asc">S-waiting-on-crater PRs</a></a></h4>
<p>All PRs should be processed.</p>
<p>If the PR has been active in the last three days, make sure it's present on the
crater
<a href="https://docs.google.com/spreadsheets/d/1VPi_7ErvvX76fa3VqvQ3YnQmDk3bS7fYnkzvApIWkKo/edit#gid=0">spreadsheet</a>.
Fill in the link to the PR and set status as &quot;Pending&quot;.</p>
<p>If crater has been run and results include failures, change the tag to
<code>S-waiting-on-review</code> for the reviewer to be responsible for deciding what
should be done with the information provided by the failures.</p>
<p>If crater has been run and the results do not include failures, change the tag
to <code>S-waiting-on-review</code> for the reviewer to take one last look and approve.</p>
<p>If crater has not been run and it has been more than 3 days since a crater run
was requested, ping the last three distinct listed people on the spreadsheet in
the infra irc channel and request a crater run.</p>
<p>If crater has been started (the person starting should leave a comment) and it
has been more than 5 days since an update, ping the person starting the run on
IRC and GitHub.</p>
<h4><a class="header" href="#a-hrefhttpsgithubcomrust-langrustpullsqis3aopenis3aprlabel3as-waiting-on-bikeshedsort3aupdated-ascs-waiting-on-bikesheda" id="a-hrefhttpsgithubcomrust-langrustpullsqis3aopenis3aprlabel3as-waiting-on-bikeshedsort3aupdated-ascs-waiting-on-bikesheda"><a href="https://github.com/rust-lang/rust/pulls?q=is%3Aopen+is%3Apr+label%3AS-waiting-on-bikeshed+sort%3Aupdated-asc">S-waiting-on-bikeshed</a></a></h4>
<p>PRs inactive for greater than 7 days need to be processed. These can be found by
looking at the &quot;updated X days ago&quot; on GitHub's PR list.</p>
<p>Find the source of the discussion and see if it has been resolved.</p>
<p>If it has been resolved, move it back to <code>S-waiting-on-author</code> or
<code>S-waiting-on-review</code> as appropriate. Add a comment notifying the author or
reviewer that the PR is now unblocked.</p>
<p>If it has not been resolved, remove and re-add the <code>S-waiting-on-bikeshed</code> tag.
This resets the update time so the PR won't be reviewed for another week.</p>
<h4><a class="header" href="#a-hrefhttpsgithubcomrust-langrustpullsqis3aopenis3aprlabel3as-blockedsort3aupdated-ascs-blocked-prsa" id="a-hrefhttpsgithubcomrust-langrustpullsqis3aopenis3aprlabel3as-blockedsort3aupdated-ascs-blocked-prsa"><a href="https://github.com/rust-lang/rust/pulls?q=is%3Aopen+is%3Apr+label%3AS-blocked+sort%3Aupdated-asc">S-blocked PRs</a></a></h4>
<p>Blocked PRs can remain blocked for a long time. To avoid needlessly re-triaging
them, they should be closed if the blocking issue is unlikely to be resolved
soon. If you close a blocked PR, apply the S-blocked-closed label and invite the
author to re-open the PR once the issue has been resolved. If you feel
uncomfortable just closing the PR, feel free to link to this document. As a rule
of thumb, consider these guidelines:</p>
<ul>
<li>PRs blocked on discussion (such as RFCs or WG decisions) should be closed
immediately, since those discussions generally take a long time.</li>
<li>PRs blocked on other PRs should be closed, unless the blocking PR looks
like it's going to be merged soon.</li>
<li>PRs which have already been blocked for two weeks should generally be closed,
unless there is a clear indication that they will be unblocked soon.</li>
</ul>
<p>Blocked PRs which have not been closed should be triaged as follows:</p>
<p>PRs inactive for greater than 7 days need to be processed. These can be found by
looking at the &quot;updated X days ago&quot; on GitHub's PR list.</p>
<p>Find the blocking issue from the triage comment and see if it has been resolved.</p>
<p>If it has been resolved, move it back to <code>S-waiting-on-author</code> or
<code>S-waiting-on-review</code> as appropriate. Add a comment notifying the author or
reviewer that the PR is now unblocked.</p>
<p>If it has not been resolved, remove and re-add the <code>S-blocked</code> tag. This resets
the update time so the PR won't be reviewed for another week.</p>
<h4><a class="header" href="#a-hrefhttpsgithubcomrust-langrustpullsqis3aprlabel3as-blocked-closedsort3aupdated-ascs-blocked-closed-prsa" id="a-hrefhttpsgithubcomrust-langrustpullsqis3aprlabel3as-blocked-closedsort3aupdated-ascs-blocked-closed-prsa"><a href="https://github.com/rust-lang/rust/pulls?q=is%3Apr+label%3AS-blocked-closed+sort%3Aupdated-asc">S-blocked-closed PRs</a></a></h4>
<p>These never need to be looked at, although if you want you can go through the
PRs and see if any have been unblocked. This label is for PRs which are blocked
and have been closed because it is unlikely that the blocking issue will be
resolved soon.</p>
<h4><a class="header" href="#a-hrefhttpsgithubcomrust-langrustpullsqis3aprlabel3as-inactive-closedsort3aupdated-ascs-inactive-closed-prsa" id="a-hrefhttpsgithubcomrust-langrustpullsqis3aprlabel3as-inactive-closedsort3aupdated-ascs-inactive-closed-prsa"><a href="https://github.com/rust-lang/rust/pulls?q=is%3Apr+label%3AS-inactive-closed+sort%3Aupdated-asc">S-inactive-closed PRs</a></a></h4>
<p>These never need to be looked at. PRs which have been closed due inactivity.
This is a terminal state for the time being, primarily oriented towards easing
future work.</p>
<h2><a class="header" href="#issue-triage" id="issue-triage">Issue triage</a></h2>
<p>Issue triage is mostly much simpler. After finishing PR triage, go to the <a href="https://github.com/rust-lang/rust/issues?utf8=%E2%9C%93&amp;q=is%3Aissue%20is%3Aopen%20sort%3Acreated-asc%20-label%3AC-feature-request%20-label%3AC-enhancement%20-label%3AC-cleanup%20-label%3AC-bug%20-label%3AC-tracking-issue%20-label%3AC-future-compatibility%20-label%3AC-question%20-label%3AC-feature-accepted">list
of untagged issues</a> and add tags as you see fit. The following categories
should, ideally, be assigned to each issue:</p>
<ul>
<li>At least one <code>A-</code> tag. This represents the area of the issue, so an issue
relating to benchmarks or testing would get A-libtest. If you can't find an
appropriate tag for the issue, it's possible that creating one is the right
thing to do. Try to pick just one tag to give, unless you're giving the
A-diagnostics tag, in which case one more tag is a good idea.</li>
<li>One, and only one, <code>C-</code> tag. This represents that category of the issue.
<ul>
<li><code>C-bug</code>: Bugs. These are things like ICEs or other failures of the compiler
to do what it's supposed to in a way that breaks correct user code. It's not
always easy to tell if code is correct, and the compiler broken, though, but
tend towards assuming it's the compiler's fault: at least, we should give a
better diagnostic. Note that as of now, I-slow, and I-compile{time,mem} are
not considered bugs, rather, they are enhancements, since they do not break
user code.</li>
<li><code>C-cleanup</code>: Refactoring and cleanup work within the compiler.</li>
<li><code>C-enhancement</code>: Diagnostic improvements, primarily, or other nice to haves,
but not critical issues. Somewhat implies that this is a minor addition.</li>
<li><code>C-feature-request</code>: An addition of an impl is the primary thing here.
Sometimes minor lang features also qualify, though in general it's likely
those should be closed in favor of RFCs. It's recommended that triagers
should close issues in favor of the author opening a thread on internals or
rust-lang/rfcs for language changes that are more significant than adding an
impl.</li>
<li><code>C-feature-accepted</code>: Feature-requests that a relevant team would like to
see an implementation for before final judgement is rendered. It's likely
that such an implementation would be merged, unless breakage (e.g.,
inference-related) occurs.</li>
<li><code>C-future-compatibility</code>: Used for tracking issues for future compatibility
lints.</li>
<li><code>C-tracking-issue</code>: This is used for both feature tracking issues (feature
gates) and issues which track some question or concern of a team. These are
maintained on GitHub over internals because GH is a more stable location and
easier to refer to in the long run.</li>
</ul>
</li>
<li>At least one <code>T-</code> tag. Assign the appropriate team to the issue; sometimes
this is multiple teams, but usually falls into either dev-tools, compiler, or
libs. Sometimes the lang team needs to make a decision.</li>
<li>If necessary, add <code>I-</code> tags as you see fit. Particularly, <code>I-ICE</code> is the
dominant tag to be added.</li>
<li>If applicable, add platform tags (<code>O-</code>). It's fine to add more than one.</li>
</ul>
<p>If an issue has been tagged with an <code>E-</code> category tag, such as <code>E-help-wanted</code>
and has been taken up by someone, but there has been no activity for 7 days, ask
if they require assistance, and inform them that after 14 days this issue will
be made available to anyone. After 14 days re-add the help tag and deassign them
if necessary.</p>
<h2><a class="header" href="#state-of-rust-triage" id="state-of-rust-triage">State Of Rust Triage</a></h2>
<ol>
<li>Visit the <a href="https://github.com/rust-lang/rust/projects/8">State Of Rust</a> project page. Each card has three pieces of
information.
<ul>
<li>“Feature” — The name of the feature with a link to the tracking issue.</li>
<li>“What’s next?” — What we are waiting on to implement and stabilise the RFC.</li>
<li>“Last Update” — The last time this card has been triaged.</li>
</ul>
</li>
<li>For each card that you choose to triage:</li>
<li>Visit the respective tracking issue, and any related issues that the tracking
issue is recently mentioned in.</li>
<li>If the “What’s next?” on the card does not match what you think the current
state is, update it with the new information.</li>
<li>If the implementation of an RFC has changed since the last update, move it to
the relevant column.
<ul>
<li>If there are PRs merged that implement the RFC the card would move to
“Implemented”.</li>
<li>If there are only open PRs or the PRs don’t implement the full RFC the card
would be moved to “Implementation in progress”.</li>
<li>If there has been a decision to deprecate the RFC, move that to the
“Deprecated” column.</li>
</ul>
</li>
<li>If there have been no meaningful changes to the RFC within 21 days, ping
someone for an update on the status of the feature.
<ul>
<li>If there have been PRs implementing the RFC, ping the author(s).</li>
<li>If author has not responded within a week, or there are no relevant PRs,
ping the relevant team.</li>
<li>If there is no clear choice for the team that should be doing the
implementation, please add this to release team meeting notes (which can be
found in the <a href="https://discord.gg/rust-lang">#release Discord channel</a>).</li>
</ul>
</li>
<li>Update the date on the “Last update” and move that to the bottom of the
column.</li>
</ol>
<h1><a class="header" href="#triaging-crater-runs" id="triaging-crater-runs">Triaging Crater Runs</a></h1>
<h2><a class="header" href="#running-crater" id="running-crater">Running crater</a></h2>
<p>We regularly run Crater runs, and this documents the procedure for triaging a beta run; it may also
be applicable to non-release team runs (e.g., PR crater runs) with minor modifications.</p>
<p>First, file a new issue titled &quot;Crater runs for 1.x&quot; (<a href="https://github.com/rust-lang/rust/issues/66244">example</a>)</p>
<p>A crater run for beta should be started as soon as we have beta out. Use the following craterbot
invocations.</p>
<p>$BETA_VERSION is e.g. 1.40.0-1, increment the 1 if it's not the first beta crater run, you can also
use the auto-incremented counter on the beta <code>rustc --version</code>.</p>
<p>$STABLE is e.g. 1.39.0 (the stable release)
$BETA is beta-YYYY-MM-DD, get the date by looking at https://static.rust-lang.org/manifests.txt and
get the date of the most recent channel-rust-beta.toml.</p>
<pre><code>@craterbot run name=beta-$BETA_VERSION start=$STABLE end=$BETA mode=build-and-test cap-lints=warn p=10
@craterbot run name=beta-rustdoc-$BETA_VERSION start=$STABLE end=$BETA mode=rustdoc cap-lints=warn p=5
</code></pre>
<p>Once the runs complete, you want to triage them</p>
<h2><a class="header" href="#triaging" id="triaging">Triaging</a></h2>
<p>These steps should generally be done for the normal rustc run, and then followed up by a triage of
the rustdoc run. Ignore failures in rustdoc that look to be rooted in rustc (i.e., duplicate
failures).</p>
<p>There will usually be quite a few regressions -- there are a couple tools that can help reduce the
amount of work that you need to do. It's mostly a matter of personal preference which is more
helpful.</p>
<ul>
<li>https://github.com/Mark-Simulacrum/crater-generate-report/
<ul>
<li>This groups regressions by 'root' by parsing the logs to look for the compilation failed
messages printed by Cargo</li>
</ul>
</li>
<li>https://github.com/Centril/crater-cat-errors
<ul>
<li>This groups regressions by the &quot;error&quot; message, also by parsing logs</li>
</ul>
</li>
</ul>
<p>If you've written a tool, feel free to add it here! We're still figuring out what the best UI for
this is.</p>
<p>Regardless of the tool you've run, you ultimately need to read through a bunch of logs and try to
quickly determine if they're genuine failures or spurious. Most of the time, a compiler failure is
genuine, and test failures are mostly spurious, but this usually requires some level of guessing.</p>
<p>Once you've determined that something is a genuine failure, add it to a list somewhere (local file,
HackMD, whatever) with the error &quot;category.&quot; Mostly, you're trying to group things such that the
regressions in a single group are all caused by the same set of commits, and different groups have
different causes.</p>
<p>Once this is done, and you have all the regressions triaged into their separate groups, you want to
file a new issue for each group. It should have the <code>regression-from-stable-to-beta</code> and
<code>T-compiler</code> label by default, possibly <code>T-libs</code> if it's a standard library regression, but that's
relatively rare. If you happen to think you know the PR that caused the failure, cc the PR author in
a separate comment and link to the PR; otherwise compiler team will triage the issue soon.</p>
<p>Leave a comment on the original issue with the crater runs linking to all the issues you just
opened, ideally with the issue titles as well.</p>
<p>You're done!</p>
<h2><a class="header" href="#re-running-rustc-on-a-crate" id="re-running-rustc-on-a-crate">Re-running rustc on a crate</a></h2>
<p>For the crates which we're not sure about, you can try running crater locally, or build the crate
directly (<a href="https://gist.githubusercontent.com/lqd/4a8af10389d10840d90655c109df5eac/raw/1bb8ac86e211b745b1674041bc725a859b390c3c/cratesio-curl"><code>cratesio-curl</code></a> can be helpful). Be careful -- regardless of what you do, you are running arbitrary code locally. It's
also fine to file issues for the crates you're not sure about and let the triage process naturally
categorize the error, though it's not good to do this for <em>all</em> the crates. Once you've triaged a
crater run a couple times you get a pretty good sense of what is spurious and what isn't, too.</p>
<p>You can run crater on just a single crate by doing something like this (at least, as of now).
Note that this will download several gigabytes (on first use) and requires Docker to be running.</p>
<pre><code>git clone https://github.com/rust-lang/crater
cd crater
cargo run -- prepare-local
CRATES=&quot;crates-io-crate-0.4.0,owner/repository-name&quot; # Edit this.
cargo run -- define-ex --crate-select=list:$CRATES --cap-lints=forbid 1.38.0 beta # Edit the stable version.
cargo run -- run-graph --threads 4
cargo run -- gen-report work/ex/default/
# view report for this crate
</code></pre>
<p>It's also possible to re-queue a subset of crates onto the official builders, for which that take a
look at: https://gist.github.com/ecstatic-morse/be799bfa4d3b3d6e163fa61a9c30706f</p>
<h2><a class="header" href="#determining-the-root-cause-of-the-regression" id="determining-the-root-cause-of-the-regression">Determining the root cause of the regression</a></h2>
<p>It's not always apparent why a crate stopped building. This isn't generally something done as part
of crater triage -- but can be a good followup. Here, <a href="https://github.com/rust-lang/cargo-bisect-rustc"><code>cargo-bisect-rustc</code></a> and Felix's
<a href="http://blog.pnkfx.org/blog/2019/11/18/rust-bug-minimization-patterns/">minimization guide</a> are excellent tools to apply.</p>
<h1><a class="header" href="#archive" id="archive">Archive</a></h1>
<p>This section is for content that has become outdated, but that we want to keep
available to be read for historical/archival reasons.</p>
<h1><a class="header" href="#friends-of-the-tree" id="friends-of-the-tree">Friends of the Tree</a></h1>
<p><a href="http://www.rust-lang.org/team.html">The Rust Team</a> likes to occasionally
recognize people who have made outstanding contributions to The Rust Project,
its ecosystem, and its community. These people are 'Friends of the Tree',
archived here for eternal glory.</p>
<h2><a class="header" href="#2016-02-26-mitaa" id="2016-02-26-mitaa">2016-02-26 @mitaa</a></h2>
<p>This week we would like to nominate @mitaa as Friend of the Tree. Recently @mitaa
<a href="https://github.com/rust-lang/rust/pull/31837">has</a> <a href="https://github.com/rust-lang/rust/pull/31835">sent</a> <a href="https://github.com/rust-lang/rust/pull/31839">a</a> <a href="https://github.com/rust-lang/rust/pull/31715">wave</a> <a href="https://github.com/rust-lang/rust/pull/31626">of</a> <a href="https://github.com/rust-lang/rust/pull/31614">fixes</a> <a href="https://github.com/rust-lang/rust/pull/31602">to</a>
<a href="https://github.com/rust-lang/rust/pull/31596">rustdoc</a> (yes those are all separate links) with even more on the way!
Rustdoc has historically been a tool in need of some love, and the extra help in
fixing bugs is especially appreciated. Thanks @mitaa!</p>
<h2><a class="header" href="#2016-02-12-jeffrey-seyfried-jseyfried" id="2016-02-12-jeffrey-seyfried-jseyfried">2016-02-12 Jeffrey Seyfried (@jseyfried)</a></h2>
<p><strong>This week's friend of the tree is Jeffrey Seyfried (@jseyfried)!</strong></p>
<p>Jeffrey Seyfried (@jseyfried) has made some awesome contributions to name
resolution. He has fixed a ton of bugs, reported previously unknown edge cases,
and done some big refactorings, all of which have helped improve a complex and
somewhat neglected part of the compiler.</p>
<h2><a class="header" href="#2015-12-04-vadim-petrochenkov-petrochenkov" id="2015-12-04-vadim-petrochenkov-petrochenkov">2015-12-04 Vadim Petrochenkov @petrochenkov</a></h2>
<p>This week we'd like to nominate @petrochenkov for Friend of the Tree. Vadim has
been doing some absolutely amazing compiler work recently such as <a href="https://github.com/rust-lang/rust/pull/29726">fixing
privacy bugs</a>, <a href="https://github.com/rust-lang/rust/pull/29748">fixing hygiene bugs</a>, <a href="https://github.com/rust-lang/rust/pull/29383">fixing pattern bugs</a>,
<a href="https://github.com/rust-lang/rust/pull/29952">paving the way</a> and <a href="https://github.com/rust-lang/rust/pull/30206">implementing <code>#[deprecated]</code></a>,
<a href="https://github.com/rust-lang/rust/pull/29973">fixing and closing many privacy holes</a>, <a href="https://github.com/rust-lang/rust/pull/30087">refactoring</a>
<a href="https://github.com/rust-lang/rust/pull/30095">and</a> <a href="https://github.com/rust-lang/rust/pull/30145">improving</a> the HIR, and reviving <a href="https://github.com/rust-lang/rust/pull/30184">the old type ascription
PR</a>. The list of outstanding bugs and projects in the compiler is
growing ever smaller now; thanks @petrochenkov!</p>
<h2><a class="header" href="#2015-11-16-peter-atashian-windowsbunny-retep998" id="2015-11-16-peter-atashian-windowsbunny-retep998">2015-11-16 Peter Atashian (WindowsBunny, retep998)</a></h2>
<p>In his own words, WindowsBunny is &quot;a hopping encyclopedia of all the issues
windows users might run into and how to solve them.&quot; One of the heroes that make
Rust work on Windows, he actively pushes the frontiers of what Rust can do on
the platform. He is also notably the maintainer of the
<a href="https://crates.io/crates/winapi">winapi</a> family of crates, a comprehensive set
of bindings to the Windows system APIs. You da bunny, WindowsBunny. Also, a
friend of the tree.</p>
<p><a href="https://internals.rust-lang.org/t/subteam-reports-2015-11-16/2910">Source</a>.</p>
<h2><a class="header" href="#2015-10-31-marcus-klaas" id="2015-10-31-marcus-klaas">2015-10-31 Marcus Klaas</a></h2>
<p>Today @nrc would like to nominated @marcusklaas as Friend of the Tree:</p>
<p>Marcus is one of the primary authors of
<a href="https://github.com/nrc/rustfmt">rustfmt</a>. He has been involved since the early
days and is now the
<a href="https://github.com/nrc/rustfmt/graphs/contributors">top contributor</a>. He has
fixed innumerable bugs, implemented new features, reviewed a tonne of PRs, and
contributed to the design of the project. Rustfmt would not be the software it
is today without his hard work; he is indeed a Friend Of The Tree.</p>
<h2><a class="header" href="#2015-10-16-ryan-prichard" id="2015-10-16-ryan-prichard">2015-10-16 Ryan Prichard</a></h2>
<p>nmatsakis would also like to declare Ryan Prichard a <strong>Friend of the Tree</strong>.
Over the last few months, Ryan has been comparing the Rust compiler's parsing
behavior with that of the rust-grammar project, which aims to create a LALR(1)
grammar for parsing Rust. Ryan has found a number of inconsistencies and bugs
between the two. This kind of work is useful for two reasons: it finds bugs,
obviously, which are often hard to uncover any other way. Second, it helps pave
the way for a true Rust reference grammar outside of the compiler source itself.
So Ryan Prichard, thanks!</p>
<h2><a class="header" href="#2015-10-02-vikrant-chaudhary" id="2015-10-02-vikrant-chaudhary">2015-10-02 Vikrant Chaudhary</a></h2>
<p><a href="https://github.com/nasa42">Vikrant Chaudhary (nasa42)</a> is an individual who
believes in the Rust community. Since June he has been contributing to
<a href="http://this-week-in-rust.org">This Week in Rust</a>, coordinating its publication
on
<a href="https://users.rust-lang.org/t/this-week-in-rust-editors-thread/1806/51">urlo</a>,
and stirring up contributions. He recently rolled out an overhaul to the site's
design that brings it more inline with the main website. Today Vikrant is the
main editor on the weekly newsletter, assisted by
<a href="http://github.com/llogiq">llogiq</a> and other contributors. Thanks for keeping
TWiR running, Vikrant, you friend of the tree.</p>
<p><a href="https://internals.rust-lang.org/t/subteam-reports-2015-10-02/2716">Source</a>.</p>
<h2><a class="header" href="#2015-07-24-tshepang-lekhonkhobe" id="2015-07-24-tshepang-lekhonkhobe">2015-07-24 Tshepang Lekhonkhobe</a></h2>
<p><a href="http://github.com/Gankro">@Gankro</a> has nominated
<a href="http://github.com/tshepang">@tshepang</a> for Friend of the Tree this week:</p>
<p>Over the last year Tshepang has landed over 100 improvements to our
documentation. Tshepang saw where documentation was not, and said &quot;No. This will
not do.&quot;</p>
<p>We should all endeavor to care about docs as much as Tshepang.</p>
<p><a href="https://internals.rust-lang.org/t/subteam-reports-2015-07-24/2397">Source</a>.</p>
<h2><a class="header" href="#2015-05-19-chris-morgan" id="2015-05-19-chris-morgan">2015-05-19 Chris Morgan</a></h2>
<p>I'd like to nominate Chris Morgan (@chris-morgan) for Friend of the Tree today.
Chris recently redesigned the play.rust-lang.org site for the 1.0 release,
giving the site a more modern and rustic feel to it. Chris has been contributing
to Rust for quite some time now, his first contribution dating back to July 2013
and also being one of the early pioneers in the space of HTTP libraries written
in Rust. Chris truly is a friend of the tree!</p>
<h2><a class="header" href="#2015-03-24-andrew-gallant-burntsushi" id="2015-03-24-andrew-gallant-burntsushi">2015-03-24 Andrew Gallant (BurntSushi)</a></h2>
<p><a href="https://github.com/burntsushi">BurntSushi</a> is an individual who practically needs no introduction. He's
written many of the world's most popular crates, including <a href="https://github.com/docopt/docopt.rs">docopt.rs</a>, <a href="https://github.com/rust-lang/regex">regex</a>,
<a href="https://github.com/BurntSushi/quickcheck">quickcheck</a>, <a href="https://github.com/BurntSushi/rust-cbor">cbor</a>, and <a href="https://github.com/BurntSushi/byteorder">byteorder</a>. Don't forget his CSV swiss-army-knife,
<a href="https://github.com/BurntSushi/xsv">xsv</a>, built on <a href="https://github.com/BurntSushi/rust-csv">rust-csv</a>. Feedback from his early work on libraries helped
informed the evolution of Rust during a critical time in its development, and
BurntSushi continues to churn out the kind of Rust gems that can only come from
someone who is a skilled friendofthetree.</p>
<h2><a class="header" href="#2015-03-03-manish-goregaokar-manishearth" id="2015-03-03-manish-goregaokar-manishearth">2015-03-03 Manish Goregaokar (Manishearth)</a></h2>
<p>Manish started working on Servo as part of the GSoC program in 2014, where he
implemented XMLHttpRequest. Since then he's become in integral part of the Servo
team while finishing his university studies and organizing Rust community
events. In 2015 he took an interest in bors' queue and started making rollup PRs
to accelerate the integration process. Nursing the PR queue is the kind of
time-consuming labor that creates friends of the tree like Manish, the rollup
friend of the tree.</p>
<h2><a class="header" href="#2015-02-17-toby-scrace" id="2015-02-17-toby-scrace">2015-02-17 Toby Scrace</a></h2>
<p>Today I would like to nominate Toby Scrace as Friend of the Tree. Toby emailed
me over the weekend about a login vulnerability on crates.io where you could log
in to whomever the previously logged in user was regardless of whether the
GitHub authentication was successful or not. I very much appreciate Toby
emailing me privately ahead of time, and I definitely feel that Toby has earned
becoming Friend of the Tree.</p>
<h2><a class="header" href="#2015-02-10-jonathan-reem-reem" id="2015-02-10-jonathan-reem-reem">2015-02-10 Jonathan Reem (reem)</a></h2>
<p>Jonathan Reem has been making an impact on Rust since May 2014. His primary
contribution has been as the main author of the prominent <a href="https://github.com/iron/iron">Iron</a> web
framework, though he has also created several other popular projects including
the testing framework <a href="https://github.com/reem/stainless">stainless</a>. His practical experience with these projects
has led to several improvements in upstream rust, most notably his complete
rewrite of the <code>TaskPool</code> type. Reem is doing everything he can to advance the
Rust cause.</p>
<h2><a class="header" href="#2015-01-20-barosl-lee-barosl" id="2015-01-20-barosl-lee-barosl">2015-01-20 Barosl Lee (barosl)</a></h2>
<p>Today I would like to nominate Barosl Lee (@barosl) for Friend of the Tree.
Barosl has recently rewritten our bors cron job in a new project called <a href="https://github.com/barosl/homu">homu</a>.
Homu has a number of benefits including:</p>
<ul>
<li>Zero &quot;down time&quot; between testing different PRs (compared to 30+ minutes for
bors!)</li>
<li>A new rollup button to create separate rollup PRs from other PRs.</li>
<li>Multiple repositories are supported (Cargo and Rust are on the same page)</li>
</ul>
<p>Homu was recently deployed for rust-lang/rust thanks to a number of issues being
closed out by Barosl, and it's been working fantastically so far! Barosl has
also been super responsive to any new issues cropping up. Barosl truly is a
Friend of the Tree!</p>
<h2><a class="header" href="#2015-01-13-kang-seonghoon-lifthrasiir-yurume" id="2015-01-13-kang-seonghoon-lifthrasiir-yurume">2015-01-13 Kang Seonghoon (lifthrasiir, Yurume)</a></h2>
<p>Seonghoon has been an active member of the Rust community since early 2013, and
although he has made a number of valuable contributions to Rust itself, his
greatest work has been in developing key libraries out of tree. <a href="https://github.com/lifthrasiir/rust-encoding">rust-encoding</a>,
one of the most popular crates in Cargo, performs character encoding, and
<a href="https://github.com/lifthrasiir/rust-chrono">rust-chrono</a> date / time handling, both of which fill critical holes in the
functionality of the standard library. <a href="https://github.com/lifthrasiir/rust-strconv">rust-strconv</a> is a prototype of
efficient numerical string conversions that is a candidate for future inclusion
in the standard library. He maintains a <a href="https://lifthrasiir.github.io/rustlog/">blog</a> where he discusses his
work.</p>
<h2><a class="header" href="#2015-01-06-jorge-aparicio-japaric" id="2015-01-06-jorge-aparicio-japaric">2015-01-06 Jorge Aparicio (japaric)</a></h2>
<p>I nominate Jorge Aparicio (japaric) for Friend of the Tree (for the second time,
no less!). japaric has done tremendous work porting the codebase to use the new
language features that are now available. First, he converted APIs in the
standard library to take full advantage of DST after it landed. Next, he
converted APIs to use unboxed closures. Then, he converted a large portion of
the libraries to use associated types. Finally, he removed boxed closures from
the compiler entirely. He has also worked to roll out RFCs changing the
overloaded operators and comparison traits, including both their definitions and
their impact on the standard library. And this list excludes a number of smaller
changes, like deprecating older syntax. The alpha release would not be where it
is without him; Japaric is simply one of the best friends the tree has ever had.</p>
<h2><a class="header" href="#2014-12-30-kevin-ballard-kballard-eridius" id="2014-12-30-kevin-ballard-kballard-eridius">2014-12-30 Kevin Ballard (kballard, Eridius)</a></h2>
<p>This is a belated recognition of Kevin Ballard (aka @kballard, aka Eridius) as a
friend of the tree. Kevin put a lot of work into Unicode issues in Rust,
especially as related to platform-specific constraints. He wrote the current
path module in part to accommodate these constraints, and participated in the
recent redesign of the module. He has also been a dedicated and watchful
reviewer. Thanks, Kevin, for your contributions!</p>
<h2><a class="header" href="#2014-12-16-gábor-lehel-glaebhoerl" id="2014-12-16-gábor-lehel-glaebhoerl">2014-12-16 Gábor Lehel (glaebhoerl)</a></h2>
<p>Gabor's major contributions to Rust have been in the area of language design. In
the last year he has produced a number of very high quality RFCs, and though
many of them of not yet been accepted, his ideas are often thought-provoking and
have had a strong influence on the direction of the language. His <a href="https://github.com/rust-lang/rfcs/pull/243">trait based
exception handling RFC</a> was particularly innovative, as well that <a href="https://github.com/rust-lang/rfcs/pull/146">for
future-proofing checked arithmetic</a>. Gabor is an exceedingly clever
Friend of the Tree.</p>
<h2><a class="header" href="#2014-11-11-brian-koropoff-unwound" id="2014-11-11-brian-koropoff-unwound">2014-11-11 Brian Koropoff (unwound)</a></h2>
<p>In the last few weeks, he has fixed many, many tricky ICEs all over the
compiler, but particularly in the area of unboxed closures and the borrow
checker. He has also completely rewritten how unboxed closures interact with
monomorphization and had a huge impact on making them usable. Brian Koropoff is
truly a Friend of the Tree.</p>
<h2><a class="header" href="#2014-10-07-alexis-beingessner-gankro" id="2014-10-07-alexis-beingessner-gankro">2014-10-07 Alexis Beingessner (Gankro)</a></h2>
<p>Alexis Beingessner (aka @Gankro) began contributing to Rust in July, and has
already had a major impact on several library-related areas. His main focus has
been collections. He completely rewrote BTree, providing a vastly more complete
and efficient implementation. He proposed and implemented the new Entry API.
He's written extensive new documentation for the collections crate. He pitched
in on collections reform.</p>
<p>And he added collapse-all to rustdoc!</p>
<p>Alexis is, without a doubt, a FOTT.</p>
<h2><a class="header" href="#2014-09-02-jorge-aparicio-japaric" id="2014-09-02-jorge-aparicio-japaric">2014-09-02 Jorge Aparicio (japaric)</a></h2>
<p>Jorge has made several high-impact contributions to the wider Rust community. He
is the primary author of rustbyexample.com, and last week published &quot;eulermark&quot;,
a comparison of language performance on project Euler problems, which happily
showed Rust performing quite well. As part of his benchmarking work he has
ported the 'criterion' benchmarking framework to Rust.</p>
<h2><a class="header" href="#2014-07-29-björn-steinbrink-dotdash-doener" id="2014-07-29-björn-steinbrink-dotdash-doener">2014-07-29 Björn Steinbrink (dotdash, doener)</a></h2>
<p>Contributing since April 2013. Björn has done many optimizations for Rust,
including removing allocation bloat in iterators, fmt, and managed boxes;
optimizing <code>fail!</code>; adding strategic inlining in the libraries; speeding up data
structures in the compiler; eliminating quadratic blowup in translation, and
other IR bloat problems.</p>
<p>He's really done an amazing number of optimizations to Rust.</p>
<p>Most recently he earned huge kudos by teaching LLVM about the lifetime of
variables, allowing Rust to make much more efficient use of the stack.</p>
<p>Björn is a total FOTT.</p>
<h2><a class="header" href="#2014-07-22-jonas-hietala-treeman" id="2014-07-22-jonas-hietala-treeman">2014-07-22 Jonas Hietala (treeman)</a></h2>
<p>Jonas Hietala, aka @treeman, has been contributing a large amount of
documentation examples recently for modules such as hashmap, treemap,
priority_queue, collections, bigint, and vec. He has also additionally been
fixing UI bugs in the compiler such as those related to format!</p>
<p>Jonas continues to add new examples/documentation every day, making
documentation more approachable and understandable for all newcomers. Jonas
truly is a friend of the tree!</p>
<h2><a class="header" href="#2014-07-08-sven-nilson-bvssvni-long_void" id="2014-07-08-sven-nilson-bvssvni-long_void">2014-07-08 Sven Nilson (bvssvni, long_void)</a></h2>
<p>Sven Nilson has done a great deal of work to build up the Rust crate ecosystem,
starting with the well-regarded rust-empty project that provides boilerplate
build infrastructure and - crucially - integrates well with other tools like
Cargo.</p>
<p>His Piston project is one of the most promising Rust projects, and its one that
integrates a number of crates, stressing Rust's tooling at just the right time:
when we need to start learning how to support large-scale external projects.</p>
<p>Sven is a friend of the tree.</p>
<h2><a class="header" href="#2014-06-24-jakub-wieczorek-jakub-" id="2014-06-24-jakub-wieczorek-jakub-">2014-06-24 Jakub Wieczorek (jakub-)</a></h2>
<p>jakub-, otherwise known as Jakub Wieczorek, has recently been working very hard
to improve and fix lots of match-related functionality, a place where very few
dare to venture! Most of this code appears to be untouched for quite some time
now, and it's receiving some well-deserved love now.</p>
<p>Jakub has fixed 10 bugs this month alone, many of which have been long-standing
problems in the compiler. He has also been very responsive in fixing bugs as
well as triaging issues that come up from fun match assertions.</p>
<p>Jakub truly is a friend of the tree!</p>
<h2><a class="header" href="#2014-04-22-klutzy" id="2014-04-22-klutzy">2014-04-22 klutzy</a></h2>
<p>klutzy has been doing an amazing amount of Windows work for years now. He picks
up issues that affect our quality on Windows and picks them off 1 by 1. It's
tedious and doesn't get a ton of thanks, but is hugely appreciated by us. As
part of the Korean community, he has also done a lot of work for the local
community there. He is a friend of the tree. Thank you!</p>
<ul>
<li>Rust on Windows crusader</li>
<li>Fixed issues with x86 C ABI struct arguments</li>
<li>Fixed multiple issues with non-US locales</li>
</ul>
<h2><a class="header" href="#2014-03-18-clark-gaebel-cgaebel" id="2014-03-18-clark-gaebel-cgaebel">2014-03-18 Clark Gaebel (cgaebel)</a></h2>
<p>This week's friend of the tree is Clark Gaebel. He just landed a huge first
contribution to Rust. He dove in and made our hashmaps significantly faster by
implementing Robin Hood hashing. He is an excellent friend of the tree.</p>
<h2><a class="header" href="#2014-02-25-erick-tryzelaar-erickt" id="2014-02-25-erick-tryzelaar-erickt">2014-02-25 Erick Tryzelaar (erickt)</a></h2>
<ul>
<li>Contributing since May 2011</li>
<li>Wrote the serialization crate</li>
<li>Organizes the bay area Rust meetups</li>
<li>Just rewrote the Hash trait</li>
</ul>
<h2><a class="header" href="#2014-02-11-flavio-percoco-flaper87" id="2014-02-11-flavio-percoco-flaper87">2014-02-11 Flavio Percoco (FlaPer87)</a></h2>
<ul>
<li>Contributing since September</li>
<li>Does issue triage</li>
<li>Organizing community events in Italy</li>
<li>Optimized the 'pow' function</li>
<li>Recently been fixing lots of small but important bugs</li>
</ul>
<h2><a class="header" href="#2014-01-27---jeff-olson-olsonjefferey" id="2014-01-27---jeff-olson-olsonjefferey">2014-01-27 - Jeff Olson (olsonjefferey)</a></h2>
<ul>
<li>Contributing since February 2012</li>
<li>Did the original libuv integration</li>
<li>Implemented our second attempt at I/O, first using libuv</li>
<li>Ported parts of the C++ runtime to Rust</li>
<li>Implemented file I/O for the newest runtime</li>
<li>Last week published an article about file I/O on the Safari books blog</li>
</ul>
<h2><a class="header" href="#2014-01-21---steven-fackler-sfackler" id="2014-01-21---steven-fackler-sfackler">2014-01-21 - Steven Fackler (sfackler)</a></h2>
<ul>
<li>Contributing since last May</li>
<li>CMU grad</li>
<li>Lots of library improvements, Base64, Bitv, I/O</li>
<li>Rustdoc improvements</li>
<li>Mut/RefCell</li>
<li>std::io::util</li>
<li>external module loading</li>
</ul>
<h2><a class="header" href="#2014-01-14---eduard-burtescu-eddyb" id="2014-01-14---eduard-burtescu-eddyb">2014-01-14 - Eduard Burtescu (eddyb)</a></h2>
<ul>
<li>Contributing since October</li>
<li>Working on the compiler, including trans</li>
<li>Reduced rustc memory usage</li>
<li>Optimized vector operations</li>
<li>Helping refactor the compiler to eliminate use of deprecated features</li>
<li>Cleaned up ancient code in the compiler</li>
<li>Removed our long-standing incorrect use of the environment argument to pass
the self param</li>
</ul>
<h2><a class="header" href="#2014-01-07---vadim-chugunov-vadimcn" id="2014-01-07---vadim-chugunov-vadimcn">2014-01-07 - Vadim Chugunov (vadimcn)</a></h2>
<ul>
<li>Contributing since June</li>
<li>Fixed numerous bugs on Windows</li>
<li>Fixing broken tests</li>
<li>Improved compatibility with newer mingw versions</li>
<li>Eliminated our runtime C++ dependency by implementing unwinding through
libunwind</li>
</ul>
<h1><a class="header" href="#rust-release-history" id="rust-release-history">Rust Release history</a></h1>
<p>This is an archive of Rust release artifacts from 0.1–1.7.0. Each release is
signed with the Rust <a href="https://www.rust-lang.org/rust-key.gpg.ascii">GPG signing key</a> (<a href="https://www.rust-lang.org/rust-key-old.gpg.ascii">older key</a>, <a href="https://www.rust-lang.org/rust-key-very-old.gpg.ascii">even
older key</a>).</p>
<h2><a class="header" href="#170" id="170">1.7.0</a></h2>
<ul>
<li><a href="http://blog.rust-lang.org/2016/03/02/Rust-1.7.html">Announcement</a></li>
<li><a href="https://github.com/rust-lang/rust/blob/stable/RELEASES.md#version-170-2016-03-03">Release notes</a></li>
<li><a href="https://static.rust-lang.org/dist/rustc-1.7.0-src.tar.gz">Source code</a> (<a href="https://static.rust-lang.org/dist/rustc-1.7.0-src.tar.gz.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-1.7.0-x86_64-pc-windows-gnu.exe">Windows x86_64 .exe gnu installer</a>
(<a href="https://static.rust-lang.org/dist/rust-1.7.0-x86_64-pc-windows-gnu.exe.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-1.7.0-x86_64-pc-windows-gnu.msi">Windows x86_64 .msi gnu installer</a>
(<a href="https://static.rust-lang.org/dist/rust-1.7.0-x86_64-pc-windows-gnu.msi.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-1.7.0-x86_64-pc-windows-msvc.exe">Windows x86_64 .exe MSVC installer</a>
(<a href="https://static.rust-lang.org/dist/rust-1.7.0-x86_64-pc-windows-msvc.exe.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-1.7.0-x86_64-pc-windows-msvc.msi">Windows x86_64 .msi MSVC installer</a>
(<a href="https://static.rust-lang.org/dist/rust-1.7.0-x86_64-pc-windows-msvc.msi.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-1.7.0-i686-pc-windows-gnu.exe">Windows i686 .exe gnu installer</a>
(<a href="https://static.rust-lang.org/dist/rust-1.7.0-i686-pc-windows-gnu.exe.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-1.7.0-i686-pc-windows-gnu.msi">Windows i686 .msi gnu installer</a>
(<a href="https://static.rust-lang.org/dist/rust-1.7.0-i686-pc-windows-gnu.msi.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-1.7.0-i686-pc-windows-msvc.exe">Windows i686 .exe MSVC installer</a>
(<a href="https://static.rust-lang.org/dist/rust-1.7.0-i686-pc-windows-msvc.exe.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-1.7.0-i686-pc-windows-msvc.msi">Windows i686 .msi MSVC installer</a>
(<a href="https://static.rust-lang.org/dist/rust-1.7.0-i686-pc-windows-msvc.msi.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-1.7.0-x86_64-unknown-linux-gnu.tar.gz">Linux x86_64 tarball</a> (<a href="https://static.rust-lang.org/dist/rust-1.7.0-x86_64-unknown-linux-gnu.tar.gz.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-1.7.0-i686-unknown-linux-gnu.tar.gz">Linux i686 tarball</a> (<a href="https://static.rust-lang.org/dist/rust-1.7.0-i686-unknown-linux-gnu.tar.gz.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-1.7.0-i686-apple-darwin.pkg">Mac OS X i686 pkg</a> (<a href="https://static.rust-lang.org/dist/rust-1.7.0-i686-apple-darwin.pkg.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-1.7.0-i686-apple-darwin.tar.gz">Mac OS X i686 tarball</a>
(<a href="https://static.rust-lang.org/dist/rust-1.7.0-i686-apple-darwin.tar.gz.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-1.7.0-x86_64-apple-darwin.pkg">Mac OS X x86_64 pkg</a> (<a href="https://static.rust-lang.org/dist/rust-1.7.0-x86_64-apple-darwin.pkg.asc">signature</a>)</li>
</ul>
<h2><a class="header" href="#160" id="160">1.6.0</a></h2>
<ul>
<li><a href="http://blog.rust-lang.org/2016/01/21/Rust-1.6.html">Announcement</a></li>
<li><a href="https://github.com/rust-lang/rust/blob/stable/RELEASES.md#version-160-2016-01-21">Release notes</a></li>
</ul>
<h2><a class="header" href="#150" id="150">1.5.0</a></h2>
<ul>
<li><a href="http://blog.rust-lang.org/2015/12/10/Rust-1.5.html">Announcement</a></li>
<li><a href="https://github.com/rust-lang/rust/blob/stable/RELEASES.md#version-150-2015-12-10">Release notes</a></li>
</ul>
<h2><a class="header" href="#140" id="140">1.4.0</a></h2>
<ul>
<li><a href="http://blog.rust-lang.org/2015/10/29/Rust-1.4.html">Announcement</a></li>
<li><a href="https://github.com/rust-lang/rust/blob/8ab8581f6921bc7a8e3fa4defffd2814372dcb15/RELEASES.md#version-140-october-2015">Release notes</a></li>
</ul>
<h2><a class="header" href="#130" id="130">1.3.0</a></h2>
<ul>
<li><a href="http://blog.rust-lang.org/2015/09/17/Rust-1.3.html">Announcement</a></li>
<li><a href="https://github.com/rust-lang/rust/blob/master/RELEASES.md#version-130-september-2015">Release notes</a></li>
</ul>
<h2><a class="header" href="#120" id="120">1.2.0</a></h2>
<ul>
<li><a href="http://blog.rust-lang.org/2015/08/06/Rust-1.2.html">Announcement</a></li>
<li><a href="https://github.com/rust-lang/rust/blob/master/RELEASES.md#version-120-2015-08-07">Release notes</a></li>
</ul>
<h2><a class="header" href="#110" id="110">1.1.0</a></h2>
<ul>
<li><a href="http://blog.rust-lang.org/2015/06/25/Rust-1.1.html">Announcement</a></li>
<li><a href="https://github.com/rust-lang/rust/blob/master/RELEASES.md#version-110-2015-06-25">Release notes</a></li>
</ul>
<h2><a class="header" href="#100" id="100">1.0.0</a></h2>
<ul>
<li><a href="http://blog.rust-lang.org/2015/05/15/Rust-1.0.html">Announcement</a></li>
<li><a href="https://github.com/rust-lang/rust/blob/master/RELEASES.md#version-100-2015-05-15">Release notes</a></li>
</ul>
<h2><a class="header" href="#100-beta" id="100-beta">1.0.0-beta</a></h2>
<ul>
<li><a href="http://blog.rust-lang.org/2015/04/03/Rust-1.0-beta.html">Announcement</a></li>
</ul>
<h2><a class="header" href="#100-alpha2" id="100-alpha2">1.0.0-alpha.2</a></h2>
<ul>
<li><a href="http://blog.rust-lang.org/2015/02/20/Rust-1.0-alpha2.html">Announcement</a></li>
<li><a href="https://github.com/mozilla/rust/blob/1.0.0-alpha.2/RELEASES.md">Release notes</a></li>
<li><a href="https://static.rust-lang.org/dist/rust-1.0.0-alpha.2.tar.gz">Source code</a> (<a href="https://static.rust-lang.org/dist/rust-1.0.0-alpha.2.tar.gz.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-1.0.0-alpha.2-x86_64-pc-windows-gnu.exe">Windows x86_64 .exe installer</a>
(<a href="https://static.rust-lang.org/dist/rust-1.0.0-alpha.2-x86_64-pc-windows-gnu.exe.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-1.0.0-alpha.2-i686-pc-windows-gnu.exe">Windows i686 .exe installer</a>
(<a href="https://static.rust-lang.org/dist/rust-1.0.0-alpha.2-i686-pc-windows-gnu.exe.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-1.0.0-alpha.2-x86_64-pc-windows-gnu.msi">Windows x86_64 .msi installer</a>
(<a href="https://static.rust-lang.org/dist/rust-1.0.0-alpha.2-x86_64-pc-windows-gnu.msi.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-1.0.0-alpha.2-i686-pc-windows-gnu.msi">Windows i686 .msi installer</a>
(<a href="https://static.rust-lang.org/dist/rust-1.0.0-alpha.2-i686-pc-windows-gnu.msi.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-1.0.0-alpha.2-x86_64-unknown-linux-gnu.tar.gz">Linux x86_64 tarball</a>
(<a href="https://static.rust-lang.org/dist/rust-1.0.0-alpha.2-x86_64-unknown-linux-gnu.tar.gz.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-1.0.0-alpha.2-i686-unknown-linux-gnu.tar.gz">Linux i686 tarball</a>
(<a href="https://static.rust-lang.org/dist/rust-1.0.0-alpha.2-i686-unknown-linux-gnu.tar.gz.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-1.0.0-alpha.2-x86_64-apple-darwin.pkg">Mac OS X x86_64 pkg</a>
(<a href="https://static.rust-lang.org/dist/rust-1.0.0-alpha.2-x86_64-apple-darwin.pkg.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-1.0.0-alpha.2-i686-apple-darwin.pkg">Mac OS X i686 pkg</a>
(<a href="https://static.rust-lang.org/dist/rust-1.0.0-alpha.2-i686-apple-darwin.pkg.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-1.0.0-alpha.2-x86_64-apple-darwin.tar.gz">Mac OS X x86_64 tarball</a>
(<a href="https://static.rust-lang.org/dist/rust-1.0.0-alpha.2-x86_64-apple-darwin.tar.gz.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-1.0.0-alpha.2-i686-apple-darwin.tar.gz">Mac OS X i686 tarball</a>
(<a href="https://static.rust-lang.org/dist/rust-1.0.0-alpha.2-i686-apple-darwin.tar.gz.asc">signature</a>)</li>
<li><a href="http://doc.rust-lang.org/1.0.0-alpha.2/index.html">Documentation</a></li>
</ul>
<h2><a class="header" href="#100-alpha" id="100-alpha">1.0.0-alpha</a></h2>
<ul>
<li><a href="http://blog.rust-lang.org/2015/01/09/Rust-1.0-alpha.html">Announcement</a></li>
<li><a href="https://github.com/mozilla/rust/blob/1.0.0-alpha/RELEASES.md">Release notes</a></li>
<li><a href="https://static.rust-lang.org/dist/rust-1.0.0-alpha.tar.gz">Source code</a> (<a href="https://static.rust-lang.org/dist/rust-1.0.0-alpha.tar.gz.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-1.0.0-alpha-x86_64-pc-windows-gnu.exe">Windows x86_64 installer</a>
(<a href="https://static.rust-lang.org/dist/rust-1.0.0-alpha-x86_64-pc-windows-gnu.exe.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-1.0.0-alpha-i686-pc-windows-gnu.exe">Windows i686 installer</a>
(<a href="https://static.rust-lang.org/dist/rust-1.0.0-alpha-i686-pc-windows-gnu.exe.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-1.0.0-alpha-x86_64-unknown-linux-gnu.tar.gz">Linux x86_64 tarball</a>
(<a href="https://static.rust-lang.org/dist/rust-1.0.0-alpha-x86_64-unknown-linux-gnu.tar.gz.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-1.0.0-alpha-i686-unknown-linux-gnu.tar.gz">Linux i686 tarball</a>
(<a href="https://static.rust-lang.org/dist/rust-1.0.0-alpha-i686-unknown-linux-gnu.tar.gz.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-1.0.0-alpha-x86_64-apple-darwin.pkg">Mac OS X x86_64 pkg</a>
(<a href="https://static.rust-lang.org/dist/rust-1.0.0-alpha-x86_64-apple-darwin.pkg.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-1.0.0-alpha-i686-apple-darwin.pkg">Mac OS X i686 pkg</a>
(<a href="https://static.rust-lang.org/dist/rust-1.0.0-alpha-i686-apple-darwin.pkg.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-1.0.0-alpha-x86_64-apple-darwin.tar.gz">Mac OS X x86_64 tarball</a>
(<a href="https://static.rust-lang.org/dist/rust-1.0.0-alpha-x86_64-apple-darwin.tar.gz.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-1.0.0-alpha-i686-apple-darwin.tar.gz">Mac OS X i686 tarball</a>
(<a href="https://static.rust-lang.org/dist/rust-1.0.0-alpha-i686-apple-darwin.tar.gz.asc">signature</a>)</li>
<li><a href="http://doc.rust-lang.org/1.0.0-alpha/index.html">Documentation</a></li>
</ul>
<h1><a class="header" href="#rust-0x" id="rust-0x">Rust 0.x</a></h1>
<p>In addition to the included short-form release in the mailing list, each
0.x release has a longer explanation in the release notes.</p>
<h2><a class="header" href="#0120" id="0120">0.12.0</a></h2>
<ul>
<li><a href="https://mail.mozilla.org/pipermail/rust-dev/2014-October/011267.html">Announcement</a></li>
<li><a href="https://github.com/mozilla/rust/blob/0.12.0/RELEASES.md">Release notes</a></li>
<li><a href="https://static.rust-lang.org/dist/rust-0.12.0.tar.gz">Source code</a> (<a href="https://static.rust-lang.org/dist/rust-0.12.0.tar.gz.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-0.12.0-x86_64-w64-mingw32.exe">Windows x86_64 installer</a>
(<a href="https://static.rust-lang.org/dist/rust-0.12.0-x86_64-w64-mingw32.exe.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-0.12.0-i686-w64-mingw32.exe">Windows i686 installer</a>
(<a href="https://static.rust-lang.org/dist/rust-0.12.0-i686-w64-mingw32.exe.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-0.12.0-x86_64-unknown-linux-gnu.tar.gz">Linux x86_64 tarball</a> (<a href="https://static.rust-lang.org/dist/rust-0.12.0-x86_64-unknown-linux-gnu.tar.gz.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-0.12.0-i686-unknown-linux-gnu.tar.gz">Linux i686 tarball</a> (<a href="https://static.rust-lang.org/dist/rust-0.12.0-i686-unknown-linux-gnu.tar.gz.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-0.12.0-x86_64-apple-darwin.pkg">Mac OS X x86_64 pkg</a>
(<a href="https://static.rust-lang.org/dist/rust-0.12.0-x86_64-apple-darwin.pkg.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-0.12.0-i686-apple-darwin.pkg">Mac OS X i686 pkg</a> (<a href="https://static.rust-lang.org/dist/rust-0.12.0-i686-apple-darwin.pkg.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-0.12.0-x86_64-apple-darwin.tar.gz">Mac OS X x86_64 tarball</a>
(<a href="https://static.rust-lang.org/dist/rust-0.12.0-x86_64-apple-darwin.tar.gz.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-0.12.0-i686-apple-darwin.tar.gz">Mac OS X i686 tarball</a>
(<a href="https://static.rust-lang.org/dist/rust-0.12.0-i686-apple-darwin.tar.gz.asc">signature</a>)</li>
<li><a href="http://doc.rust-lang.org/0.12.0/index.html">Documentation</a></li>
</ul>
<h2><a class="header" href="#0110" id="0110">0.11.0</a></h2>
<ul>
<li><a href="https://mail.mozilla.org/pipermail/rust-dev/2014-July/010655.html">Announcement</a></li>
<li><a href="https://github.com/mozilla/rust/blob/0.11.0/RELEASES.txt">Release notes</a></li>
<li><a href="https://static.rust-lang.org/dist/rust-0.11.0.tar.gz">Source code</a> (<a href="https://static.rust-lang.org/dist/rust-0.11.0.tar.gz.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-0.11.0-install.exe">Windows installer</a> (<a href="https://static.rust-lang.org/dist/rust-0.11.0-install.exe.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-0.11.0-x86_64-unknown-linux-gnu.tar.gz">Linux x86_64 tarball</a> (<a href="https://static.rust-lang.org/dist/rust-0.11.0-x86_64-unknown-linux-gnu.tar.gz.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-0.11.0-i686-unknown-linux-gnu.tar.gz">Linux i686 tarball</a> (<a href="https://static.rust-lang.org/dist/rust-0.11.0-i686-unknown-linux-gnu.tar.gz.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-0.11.0-x86_64-apple-darwin.pkg">Mac OS X x86_64 pkg</a>
(<a href="https://static.rust-lang.org/dist/rust-0.11.0-x86_64-apple-darwin.pkg.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-0.11.0-i686-apple-darwin.pkg">Mac OS X i686 pkg</a> (<a href="https://static.rust-lang.org/dist/rust-0.11.0-i686-apple-darwin.pkg.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-0.11.0-x86_64-apple-darwin.tar.gz">Mac OS X x86_64 tarball</a>
(<a href="https://static.rust-lang.org/dist/rust-0.11.0-x86_64-apple-darwin.tar.gz.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-0.11.0-i686-apple-darwin.tar.gz">Mac OS X i686 tarball</a>
(<a href="https://static.rust-lang.org/dist/rust-0.11.0-i686-apple-darwin.tar.gz.asc">signature</a>)</li>
<li><a href="http://doc.rust-lang.org/0.11.0/index.html">Documentation</a></li>
</ul>
<h2><a class="header" href="#010" id="010">0.10</a></h2>
<ul>
<li><a href="https://mail.mozilla.org/pipermail/rust-dev/2014-April/009387.html">Announcement</a></li>
<li><a href="https://github.com/mozilla/rust/blob/0.10/RELEASES.txt">Release notes</a></li>
<li><a href="https://static.rust-lang.org/dist/rust-0.10.tar.gz">Source code</a> (<a href="https://static.rust-lang.org/dist/rust-0.10.tar.gz.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-0.10-install.exe">Windows installer</a> (<a href="https://static.rust-lang.org/dist/rust-0.10-install.exe.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-0.10-x86_64-unknown-linux-gnu.tar.gz">Linux x86_64 tarball</a> (<a href="https://static.rust-lang.org/dist/rust-0.10-x86_64-unknown-linux-gnu.tar.gz.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-0.10-i686-unknown-linux-gnu.tar.gz">Linux i686 tarball</a> (<a href="https://static.rust-lang.org/dist/rust-0.10-i686-unknown-linux-gnu.tar.gz.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-0.10-x86_64-apple-darwin.pkg">Mac OS X x86_64 pkg</a> (<a href="https://static.rust-lang.org/dist/rust-0.10-x86_64-apple-darwin.pkg.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-0.10-i686-apple-darwin.pkg">Mac OS X i686 pkg</a> (<a href="https://static.rust-lang.org/dist/rust-0.10-i686-apple-darwin.pkg.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-0.10-x86_64-apple-darwin.tar.gz">Mac OS X x86_64 tarball</a>
(<a href="https://static.rust-lang.org/dist/rust-0.10-x86_64-apple-darwin.tar.gz.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-0.10-i686-apple-darwin.tar.gz">Mac OS X i686 tarball</a> (<a href="https://static.rust-lang.org/dist/rust-0.10-i686-apple-darwin.tar.gz.asc">signature</a>)</li>
<li><a href="http://doc.rust-lang.org/doc/0.10/index.html">Documentation</a></li>
</ul>
<h2><a class="header" href="#09" id="09">0.9</a></h2>
<ul>
<li><a href="https://mail.mozilla.org/pipermail/rust-dev/2014-January/007753.html">Announcement</a></li>
<li><a href="https://github.com/mozilla/rust/blob/0.9/RELEASES.txt">Release notes</a></li>
<li><a href="https://static.rust-lang.org/dist/rust-0.9.tar.gz">Source code</a> (<a href="https://static.rust-lang.org/dist/rust-0.9.tar.gz.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-0.9-install.exe">Windows installer</a> (<a href="https://static.rust-lang.org/dist/rust-0.9-install.exe.asc">signature</a>)</li>
<li><a href="http://doc.rust-lang.org/doc/0.9/index.html">Documentation</a></li>
</ul>
<h2><a class="header" href="#08" id="08">0.8</a></h2>
<ul>
<li><a href="https://mail.mozilla.org/pipermail/rust-dev/2013-September/005804.html">Announcement</a></li>
<li><a href="https://github.com/mozilla/rust/blob/0.8/RELEASES.txt">Release notes</a></li>
<li><a href="https://static.rust-lang.org/dist/rust-0.8.tar.gz">Source code</a> (<a href="https://static.rust-lang.org/dist/rust-0.8.tar.gz.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-0.8-install.exe">Windows installer</a> (<a href="https://static.rust-lang.org/dist/rust-0.8-install.exe.asc">signature</a>)</li>
<li><a href="http://doc.rust-lang.org/doc/0.8/tutorial.html">Tutorial</a>
<ul>
<li><a href="http://doc.rust-lang.org/doc/0.8/tutorial-borrowed-ptr.html">borrowed pointers</a> |
<a href="http://doc.rust-lang.org/doc/0.8/tutorial-conditions.html">conditions</a> | <a href="http://doc.rust-lang.org/doc/0.8/tutorial-container.html">containers</a>
| <a href="http://doc.rust-lang.org/doc/0.8/tutorial-ffi.html">ffi</a> | <a href="http://doc.rust-lang.org/doc/0.8/tutorial-macros.html">macros</a> |
<a href="http://doc.rust-lang.org/doc/0.8/tutorial-rustpkg.html">rustpkg</a> | <a href="http://doc.rust-lang.org/doc/0.8/tutorial-tasks.html">tasks</a></li>
</ul>
</li>
<li><a href="http://doc.rust-lang.org/doc/0.8/rust.html">Manual</a> (<a href="http://doc.rust-lang.org/doc/0.8/rust.pdf">PDF</a>)</li>
<li><a href="http://doc.rust-lang.org/doc/0.8/rustpkg.html">Rustpkg manual</a></li>
<li><a href="http://doc.rust-lang.org/doc/0.8/std/index.html">Standard library docs</a></li>
<li><a href="http://doc.rust-lang.org/doc/0.8/extra/index.html">Extra library docs</a></li>
</ul>
<h2><a class="header" href="#07" id="07">0.7</a></h2>
<ul>
<li><a href="https://mail.mozilla.org/pipermail/rust-dev/2013-July/004667.html">Announcement</a></li>
<li><a href="https://github.com/mozilla/rust/blob/release-0.7/RELEASES.txt">Release notes</a></li>
<li><a href="https://static.rust-lang.org/dist/rust-0.7.tar.gz">Source code</a> (<a href="https://static.rust-lang.org/dist/rust-0.7.tar.gz.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-0.7-install.exe">Windows installer</a> (<a href="https://static.rust-lang.org/dist/rust-0.7-install.exe.asc">signature</a>)</li>
<li><a href="http://doc.rust-lang.org/doc/0.7/tutorial.html">Tutorial</a></li>
<li><a href="http://doc.rust-lang.org/doc/0.7/rust.html">Manual</a> (<a href="http://doc.rust-lang.org/doc/0.7/rust.pdf">PDF</a>)</li>
<li><a href="http://doc.rust-lang.org/doc/0.7/std/index.html">Standard library docs</a></li>
<li><a href="http://doc.rust-lang.org/doc/0.7/extra/index.html">Extra library docs</a></li>
</ul>
<h2><a class="header" href="#06" id="06">0.6</a></h2>
<ul>
<li><a href="https://mail.mozilla.org/pipermail/rust-dev/2013-April/003427.html">Announcement</a></li>
<li><a href="https://github.com/mozilla/rust/blob/release-0.6/RELEASES.txt">Release notes</a></li>
<li><a href="https://static.rust-lang.org/dist/rust-0.6.tar.gz">Source code</a> (<a href="https://static.rust-lang.org/dist/rust-0.6.tar.gz.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-0.6-install.exe">Windows installer</a> (<a href="https://static.rust-lang.org/dist/rust-0.6-install.exe.asc">signature</a>)</li>
<li><a href="http://doc.rust-lang.org/doc/0.6/tutorial.html">Tutorial</a></li>
<li><a href="http://doc.rust-lang.org/doc/0.6/rust.html">Manual</a> (<a href="http://doc.rust-lang.org/doc/0.6/rust.pdf">PDF</a>)</li>
<li><a href="http://doc.rust-lang.org/doc/0.6/core/index.html">Core library docs</a></li>
<li><a href="http://doc.rust-lang.org/doc/0.6/std/index.html">Standard library docs</a></li>
</ul>
<h2><a class="header" href="#05" id="05">0.5</a></h2>
<ul>
<li><a href="https://mail.mozilla.org/pipermail/rust-dev/2012-December/002787.html">Announcement</a></li>
<li><a href="https://github.com/mozilla/rust/blob/release-0.5/RELEASES.txt">Release notes</a></li>
<li><a href="https://static.rust-lang.org/dist/rust-0.5.tar.gz">Source code</a> (<a href="https://static.rust-lang.org/dist/rust-0.5.tar.gz.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-0.5-install.exe">Windows installer</a> (<a href="https://static.rust-lang.org/dist/rust-0.5-install.exe.asc">signature</a>)</li>
<li><a href="http://doc.rust-lang.org/doc/0.5/tutorial.html">Tutorial</a></li>
<li><a href="http://doc.rust-lang.org/doc/0.5/rust.html">Manual</a> (<a href="http://doc.rust-lang.org/doc/0.5/rust.pdf">PDF</a>)</li>
<li><a href="http://doc.rust-lang.org/doc/0.5/core/index.html">Core library docs</a></li>
<li><a href="http://doc.rust-lang.org/doc/0.5/std/index.html">Standard library docs</a></li>
</ul>
<h2><a class="header" href="#04" id="04">0.4</a></h2>
<ul>
<li><a href="https://mail.mozilla.org/pipermail/rust-dev/2012-October/002489.html">Announcement</a></li>
<li><a href="https://github.com/mozilla/rust/blob/release-0.4/RELEASES.txt">Release notes</a></li>
<li><a href="https://static.rust-lang.org/dist/rust-0.4.tar.gz">Source code</a> (<a href="https://static.rust-lang.org/dist/rust-0.4.tar.gz.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-0.4-install.exe">Windows installer</a> (<a href="https://static.rust-lang.org/dist/rust-0.4-install.exe.asc">signature</a>)</li>
<li><a href="http://doc.rust-lang.org/doc/0.4/tutorial.html">Tutorial</a></li>
<li><a href="http://doc.rust-lang.org/doc/0.4/rust.html">Manual</a> (<a href="http://doc.rust-lang.org/doc/0.4/rust.pdf">PDF</a>)</li>
<li><a href="http://doc.rust-lang.org/doc/0.4/core/index.html">Core library docs</a></li>
<li><a href="http://doc.rust-lang.org/doc/0.4/std/index.html">Standard library docs</a></li>
</ul>
<h2><a class="header" href="#031" id="031">0.3.1</a></h2>
<ul>
<li><a href="https://mail.mozilla.org/pipermail/rust-dev/2012-July/002152.html">Announcement</a></li>
<li><a href="https://github.com/mozilla/rust/blob/release-0.3.1/RELEASES.txt">Release notes</a></li>
<li><a href="https://static.rust-lang.org/dist/rust-0.3.1.tar.gz">Source code</a> (<a href="https://static.rust-lang.org/dist/rust-0.3.1.tar.gz.asc">signature</a>)</li>
</ul>
<p>This was an OS X bugfix release.</p>
<h2><a class="header" href="#03" id="03">0.3</a></h2>
<ul>
<li><a href="https://mail.mozilla.org/pipermail/rust-dev/2012-July/002087.html">Announcement</a></li>
<li><a href="https://github.com/mozilla/rust/blob/release-0.3/RELEASES.txt">Release notes</a></li>
<li><a href="https://static.rust-lang.org/dist/rust-0.3.tar.gz">Source code</a> (<a href="https://static.rust-lang.org/dist/rust-0.3.tar.gz.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-0.3-install.exe">Windows installer</a> (<a href="https://static.rust-lang.org/dist/rust-0.3-install.exe.asc">signature</a>)</li>
<li><a href="http://doc.rust-lang.org/doc/0.3/tutorial.html">Tutorial</a></li>
<li><a href="http://doc.rust-lang.org/doc/0.3/rust.html">Manual</a> (<a href="http://doc.rust-lang.org/doc/0.3/rust.pdf">PDF</a>)</li>
<li><a href="http://doc.rust-lang.org/doc/0.3/core/index.html">Core library docs</a></li>
<li><a href="http://doc.rust-lang.org/doc/0.3/std/index.html">Standard library docs</a></li>
</ul>
<h2><a class="header" href="#02" id="02">0.2</a></h2>
<ul>
<li><a href="https://mail.mozilla.org/pipermail/rust-dev/2012-March/001511.html">Announcement</a></li>
<li><a href="https://github.com/mozilla/rust/blob/release-0.2/RELEASES.txt">Release notes</a></li>
<li><a href="https://static.rust-lang.org/dist/rust-0.2.tar.gz">Source code</a> (<a href="https://static.rust-lang.org/dist/rust-0.2.tar.gz.asc">signature</a>)</li>
<li><a href="https://static.rust-lang.org/dist/rust-0.2-install.exe">Windows installer</a> (<a href="https://static.rust-lang.org/dist/rust-0.2-install.exe.asc">signature</a>)</li>
</ul>
<h2><a class="header" href="#01" id="01">0.1</a></h2>
<ul>
<li><a href="https://mail.mozilla.org/pipermail/rust-dev/2012-January/001256.html">Announcement</a></li>
<li><a href="https://github.com/mozilla/rust/blob/release-0.1/RELEASES.txt">Release notes</a></li>
<li><a href="https://static.rust-lang.org/dist/rust-0.1.tar.gz">Source code</a> (<a href="https://static.rust-lang.org/dist/rust-0.1.tar.gz.asc">signature</a>)</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        

        

        
        
        
        <script type="text/javascript">
            window.playpen_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        <script type="text/javascript" src="js/moment.min.js"></script>
        
        <script type="text/javascript" src="js/index.js"></script>
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
        
        

    </body>
</html>
